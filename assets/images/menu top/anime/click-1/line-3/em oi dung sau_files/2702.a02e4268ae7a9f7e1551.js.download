"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2702],{27333:(e,i,o)=>{o.d(i,{DF:()=>l,nW:()=>a,Bn:()=>s,q2:()=>d});var t=o(40200),n=o(34011),r=o(29984);const l=(0,t.Z)("h3",{target:"e1aily490"})((({theme:e})=>[(0,r.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"P1"}),{display:"inline-block"},(0,r.YJ)({direction:e.direction,marginEnd:"4px"}),(0,r.f1)({max:767,style:Object.assign({display:"block"},r.wj)})]),"label:H3AuthorTitle;");l.defaultProps=Object.assign(Object.assign({},l.defaultProps),{"data-e2e":"video-author-uniqueid"});const a=(0,t.Z)(n.D,{target:"e1aily491"})({display:"block",":hover":{textDecoration:"none",[`${l}`]:{textDecoration:"underline"}}},(0,r.f1)({max:479,style:r.wj}),"label:StyledAuthorAnchor;"),s=(0,t.Z)("h4",{target:"e1aily492"})((({theme:e})=>[(0,r.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{display:"inline-block",lineHeight:"28px"},(0,r.f1)({max:767,style:Object.assign({display:"block",lineHeight:e.typography.P3.lineHeight},r.wj)})]),"label:H4AuthorName;");s.defaultProps=Object.assign(Object.assign({},s.defaultProps),{"data-e2e":"video-author-nickname"});const d=(0,t.Z)("span",{target:"e1aily493"})((({theme:e})=>[(0,r.GI)({theme:e,typography:"P3"}),{display:"inline-flex",alignItems:"center",verticalAlign:"middle",svg:{marginInlineEnd:"4px"}}]),"label:SpanPrivateOrFriend;")},32441:(e,i,o)=>{o.d(i,{H:()=>g});var t=o(74512),n=o(32735),r=o(40200),l=o(29984);const a=(0,r.Z)("div",{target:"e12301370"})({display:"flex",marginRight:"68px",paddingTop:"24px"},"label:DivOneColSkeletonContainer;"),s=(0,r.Z)("div",{target:"e12301371"})({width:"56px",height:"56px",flex:"0 0 56px",background:"rgba(18, 18, 18, 0.03)",borderRadius:"100%"},(({theme:{direction:e}})=>(0,l.YJ)({direction:e,marginEnd:"12px"})),(0,l.f1)({max:479,style:{display:"none"}}),"label:DivOneColSkeletonAvatar;"),d=(0,r.Z)("div",{target:"e12301372"})({display:"flex",flexDirection:"row",alignItems:"center",[`${s}`]:{width:"40px",height:"40px",flex:"0 0 40px",display:"none"}},(0,l.f1)({max:479,style:{[`${s}`]:{display:"block"}}}),"label:DivOneColSkeletonContentContainer;"),c=(0,r.Z)("div",{target:"e12301373"})({paddingTop:"10px",flex:"1 1 auto"},"label:DivOneColSkeletonWrapper;"),u=(0,r.Z)("div",{target:"e12301374"})((({styles:{width:e,marginBottom:i,marginTop:o},theme:t})=>({width:e,marginBottom:i,marginTop:o,maxWidth:"100%",height:"16px",background:t.colors.BGView,borderRadius:"2px"})),"label:DivOneColSkeletonContent;"),v={width:"200px",marginBottom:"6px"},p={width:"160px"},h={width:"478px",marginBottom:"5px",marginTop:"15px"},m={width:"478px",marginBottom:"0px"},g=(0,n.memo)((function(){return(0,t.jsxs)(a,{children:[(0,t.jsx)(s,{},void 0),(0,t.jsxs)(c,{children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(s,{},void 0),(0,t.jsxs)("div",{children:[(0,t.jsx)(u,{styles:v},void 0),(0,t.jsx)(u,{styles:p},void 0)]},void 0)]},void 0),(0,t.jsx)(u,{styles:h},void 0),(0,t.jsx)(u,{styles:m},void 0)]},void 0)]},void 0)}))},12724:(e,i,o)=>{o.d(i,{k7:()=>u,EN:()=>v,zt:()=>h,xg:()=>m,Yx:()=>g});var t=o(31191),n=o(74512),r=o(78629),l=o(40200),a=o(48689),s=o(34011),d=o(29984),c=o(27333);const u=(0,l.Z)("div",{target:"ecck2zc0"})((({theme:e})=>[{display:"flex",flexDirection:"row",alignItems:"flex-start",padding:"20px 0",position:"relative",maxWidth:"692px","::after":{content:'""',position:"absolute",left:0,bottom:0,width:"100%",height:"1px",transform:"scaleY(0.5)",background:e.colors.LinePrimary}},(0,d.f1)({max:1079,style:{width:"calc(100vw - 388px)"}},{max:1071,style:{width:"592px",maxWidth:"592px"}},{max:767,style:{width:"calc(100vw - 32px - 68px)"}})]),"label:DivItemContainer;");u.defaultProps=Object.assign(Object.assign({},u.defaultProps),{"data-e2e":"recommend-list-item-container"});const v=(0,l.Z)("div",{target:"ecck2zc1"})((({theme:{direction:e}})=>(0,d.YJ)({direction:e,marginStart:"12px"})),{width:"624px",flex:"1 1 624px"},(0,d.f1)({max:479,style:{marginLeft:"0",width:"100%",flex:"0 0 100%"}}),"label:DivContentContainer;"),p=[{flex:"0 0 auto",":hover":{[`& ~ ${v} ${c.DF}, & ~ ${c.nW} ${c.DF}`]:{textDecoration:"underline"}}},(0,d.f1)({max:479,style:{display:"none"}})];function h(e){return e?(0,l.Z)((e=>{var{className:i}=e,o=(0,t.__rest)(e,["className"]);return(0,n.jsx)(a.G,Object.assign({className:(0,r.cx)("avatar-anchor",i)},o),void 0)}),{target:"ecck2zc3"})(...p):(0,l.Z)((e=>{var{className:i}=e,o=(0,t.__rest)(e,["className"]);return(0,n.jsx)(s.D,Object.assign({className:(0,r.cx)("avatar-anchor",i)},o),void 0)}),{target:"ecck2zc4"})(...p)}const m=(0,l.Z)("div",{target:"ecck2zc6"})((({theme:{direction:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",".avatar-anchor":[{display:"none"},(0,d.YJ)({direction:e,marginEnd:"12px"})]})),(0,d.f1)({max:479,style:{marginBottom:"12px",".avatar-anchor":{display:"block"}}}),"label:DivAuthorContainer;"),g=(0,l.Z)("div",{target:"ecck2zc7"})((({theme:{direction:e}})=>(0,d.YJ)({direction:e,marginEnd:"114px"})),"label:DivTextInfoContainer;")},28360:(e,i,o)=>{o.d(i,{y:()=>b});var t=o(74512),n=o(32321),r=o(32735),l=o(52970),a=o(99915),s=o(86987),d=o(14656),c=o(18515),u=o(66164),v=o(42018),p=o(59719),h=o(40200);const m=(0,h.Z)("div",{target:"e18vm3210"})((({isStyleV2:e=!1})=>({width:e?"28px":"24px",height:e?"96px":"64px",margin:e?"8px 6px":"8px 7px 0px",display:"block",position:"relative",cursor:"initial",background:e?"rgba(255, 255, 255, 0.12)":"rgba(22, 24, 35, 0.34)",borderRadius:"32px"})),"label:DivVolumeControlContainer;"),g=(0,h.Z)("div",{target:"e18vm3211"})((({isStyleV2:e=!1})=>({width:e?"4px":"2px",height:e?"80px":"48px",backgroundColor:"rgba(255, 255, 255, 0.5)",position:"absolute",left:e?"12px":"11px",top:"8px",bottom:"8px",cursor:"pointer",borderRadius:"4px"})),"label:DivVolumeControlProgress;"),x=(0,h.Z)("div",{target:"e18vm3212"})((({theme:{colors:e},backgroundTheme:i,isStyleV2:o})=>({width:o?"4px":"2px",height:o?"80px":"48px",backgroundColor:"primary"===i?e.Primary:e.BGPrimary,position:"absolute",left:o?"12px":"11px",bottom:"8px",cursor:"pointer",transform:"scaleY(0)",transformOrigin:"bottom",borderRadius:"4px"})),"label:DivVolumeControlBar;"),f=(0,h.Z)("div",{target:"e18vm3213"})((({isStyleV2:e=!1})=>({width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",left:e?"8px":"6px",bottom:"8px",cursor:"pointer",zIndex:1})),"label:DivVolumeControlCircle;"),b=(0,r.memo)((function(e){var i;const o=(0,r.useRef)(null),h=(0,r.useRef)(null),b=(0,r.useRef)(null),k=(0,r.useRef)(!0),{setVolumeDragging:y,isStyleV2:w=!1}=e,{mute:C,volume:j,setVolume:_}=(0,l.DZ)(),I=(0,n.fz)(a.B),{$abTestVersion:S}=null!==(i=(0,s.L)((()=>["$abTestVersion"]),[]))&&void 0!==i?i:{},P=(0,d.x)(S,"seekbar_theme_test"),T=(0,r.useCallback)(((e,i)=>{I.handleSwitchSound({playMode:0,volume_from:e,volume_to:i})}),[I]),D=(0,r.useRef)(C);(0,r.useEffect)((()=>{D.current=C}),[C]);const{percent:M,bindDrag:O,seek:B,update:V}=(0,c.S)({direction:"vertical",progressRef:o,circleRef:h,barRef:b,initialPercent:j,draggingStateCb:y,progressReportCallback:T}),Z=(0,u.fB)((e=>{k.current?k.current=!1:_(e,D.current)}),[_],160);(0,r.useEffect)((()=>Z(M)),[M]),(0,r.useEffect)((()=>{C||j!==v.G||V(v.G)}),[C,j,V]);const R=C?0:M,L=R*(w?68:36);return(0,t.jsxs)(m,Object.assign({isStyleV2:w,onClick:p.UW},{children:[(0,t.jsx)(g,{isStyleV2:w,ref:o,onClick:B,onMouseDown:O},void 0),(0,t.jsx)(f,{isStyleV2:w,ref:h,style:{transform:`translateY(-${L}px)`},onMouseDown:O},void 0),(0,t.jsx)(x,{isStyleV2:w,backgroundTheme:"v2"===P||w?"primary":void 0,ref:b,style:{transform:`scaleY(${R})`},onClick:B,onMouseDown:O},void 0)]}),void 0)}))},76628:(e,i,o)=>{o.d(i,{SL:()=>yi});var t=o(74512),n=o(24246),r=o(32735),l=o(38229),a=o(73323),s=o(52970),d=o(52687),c=o(80829),u=o(17609),v=o(15490),p=o(54032),h=o(17941),m=o(24448),g=o(88916),x=o(99583),f=o(99350),b=o(59719),k=o(99971),y=o(34525),w=o(97870),C=o(60067),j=o(59493),_=o(57661),I=o(89793),S=o.n(I),P=o(88423),T=o.n(P),D=o(76427),M=o(60083),O=o(39917),B=o(27333);const V=(0,r.memo)((function(e){const{uniqueId:i,teaParams:o={},secret:l=!1,friend:a=!1,createTime:s=0,hideCreateTime:d=!1}=e,{t:c,timeTranslator:u}=(0,D.e)(),v=(0,n.mp)(m.z,{selector:e=>{const o=e.users[i];if(o)return T()(o,["secUid","nickname","verified","uniqueId","id"])},dependencies:[i],equalFn:(e,i)=>S()(e,i)}),{secUid:p,nickname:g,verified:x,id:f=""}=(0,h.m7)(v),b=(0,r.useMemo)((()=>Object.assign({to_user_id:f},o)),[f,o]);return v?(0,t.jsxs)(B.nW,Object.assign({uniqueId:i,secUid:p,teaParams:b},{children:[(0,t.jsxs)(B.DF,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:[i,x&&(0,t.jsx)(O.Q,{width:14,height:14},void 0)]}),void 0),(0,t.jsx)(B.Bn,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:g}),void 0),!d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:" · "},void 0),u(1e3*s)]},void 0),l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:" · "},void 0),(0,t.jsxs)(B.q2,{children:[(0,t.jsx)(j.Z,{width:16,height:16},void 0),c("video_label_private")]},void 0)]},void 0),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:" · "},void 0),(0,t.jsxs)(B.q2,{children:[(0,t.jsx)(_.Z,{width:16,height:16},void 0),c("Friends only")]},void 0)]},void 0)]}),void 0):(0,M.G)(["author"])}));var Z=o(37039),R=o(69847),L=o(14584),E=o(40200),$=o(29984),q=o(48504);const z=(0,E.Z)(q.W,{target:"eqy70r40"})((({theme:{direction:e}})=>[(0,$.YJ)({direction:e,end:"0"}),{position:"absolute",top:28,minWidth:"88px",padding:"0 10px","& > svg":{marginRight:"6px"}}]),"label:StyledFollowButton;"),N=(0,r.memo)((function({uniqueId:e,teaParams:i,e2eTag:o}){const n=(0,R.Q)(),{handleFollow:r,text:l,isFollowing:a,relation:s}=(0,L.w)({uniqueId:e,onNeedLogin:n,teaParams:i}),d=a?"default":"line";return(0,t.jsxs)(z,Object.assign({size:"small",onClick:r,buttonTheme:d,"data-e2e":o},{children:[2===s?(0,t.jsx)(Z.Z,{},void 0):null,l]}),void 0)}));var F=o(12724),A=o(28049),W=o(50542),Y=o(87905),G=o(66036),H=o(32321),U=o(90938),J=o(39189),K=o(86303),Q=o(86987),X=o(65768),ee=o(99915),ie=o(79006),oe=o(57852),te=o(69971),ne=o(62013),re=o(27721),le=o(70221),ae=o(92007),se=o(56749),de=o(91538),ce=o(50259),ue=o(90616),ve=o(63261),pe=o(41143),he=o(44435),me=o(69894),ge=o(25491),xe=o(17425),fe=o(4881),be=o(64281),ke=o(55094),ye=o(94673);const we=(0,o(87308).ZP)({resolved:{},chunkName:()=>"animation",isReady(e){const i=this.resolve(e);return!0===this.resolved[i]&&!o.m[i]},importAsync:()=>Promise.all([o.e(2539),o.e(5530),o.e(1050)]).then(o.bind(o,78769)),requireAsync(e){const i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((e=>(this.resolved[i]=!0,e)))},requireSync(e){const i=this.resolve(e);return o(i)},resolve:()=>78769}),Ce=({likedIcon:e,unlikeIcon:i,isLiked:o})=>{const[n,l]=(0,r.useState)(!1),a=(0,r.useRef)(!1);(0,r.useEffect)((()=>{o&&a.current&&l(o)}),[o]),(0,r.useEffect)((()=>{l(!o),a.current=!0}),[]);const s=(0,r.useCallback)((()=>{l(!1)}),[]);return o?(0,t.jsx)("div",{children:n?(0,t.jsx)(we,{autoplay:!0,onComplete:s},void 0):e},void 0):i};var je=o(32957);const _e=24,Ie=(0,t.jsx)(ve.Z,{width:_e,height:_e},void 0),Se=(0,t.jsx)("svg",Object.assign({width:_e,height:_e,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},{children:(0,t.jsx)("use",{xlinkHref:"#svg-ellipsis-right-fill"},void 0)}),void 0),Pe=(0,t.jsx)("svg",Object.assign({width:_e,height:_e,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},{children:(0,t.jsx)("use",{xlinkHref:"#svg-pc-share"},void 0)}),void 0),Te=(0,t.jsx)("svg",Object.assign({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:_e,height:_e},{children:(0,t.jsx)("use",{xlinkHref:"#svg-heart-fill"},void 0)}),void 0),De=(0,r.memo)((function(e){var i;const o=(0,U.Q)(),{itemId:l,onClickLike:a,onClickShare:s}=e,[d,c]=(0,n.b7)(p.A,{selector:e=>e[l],dependencies:[l]}),u=(0,n.mp)(m.z,{selector:e=>{var i;return e.users[null!==(i=null==d?void 0:d.author)&&void 0!==i?i:""]},dependencies:[null==d?void 0:d.author]}),v=(0,R.X)({action:(0,r.useCallback)((()=>{null==a||a(),c.postLikeVideo({id:l,enter_method:"click"})}),[c,l,a]),modalConfig:{query:{enter_method:"click_like"}}}),g=(0,H.fz)(pe.p),{expanded:x}=(0,ke.c)(),[f,b]=(0,r.useState)(!1),[k,y]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),j=(0,r.useRef)(0),_=(0,r.useCallback)((()=>{k||(b(!f),g.handleClickShare({author_id:null==u?void 0:u.id,group_id:l})),null==s||s()}),[s,g,f,l,u,k]),I=(0,r.useCallback)((()=>{g.handleSharePanelShow({group_id:l,author_id:null==u?void 0:u.id,share_option_type:x}),window.clearTimeout(j.current),b(!0)}),[l,g,null==u?void 0:u.id,x]),S=(0,r.useCallback)((()=>{k||(j.current=window.setTimeout((()=>{b(!1)}),300))}),[k]),P=(0,ye.V)(l),T=(0,ke.J)();(0,r.useEffect)((()=>{T()}),[T]);const D=(0,r.useMemo)((()=>({group_id:l,author_id:null==u?void 0:u.id})),[l,null==u?void 0:u.id]),O=(0,r.useMemo)((()=>(0,t.jsx)(Ce,{isLiked:null==d?void 0:d.digged,likedIcon:Ie,unlikeIcon:Te},void 0)),[null==d?void 0:d.digged]),B=(0,r.useCallback)((e=>{y(e)}),[]),V=(0,r.useCallback)((()=>{C(!0)}),[C]),Z=(0,r.useCallback)((()=>{C(!1)}),[C]);if(!d)return(0,M.G)(["item"]);const{stats:L,id:E}=d,$=(0,he.fH)({uniqueId:null!==(i=null==u?void 0:u.uniqueId)&&void 0!==i?i:"",secUid:null==u?void 0:u.secUid,videoId:E}),q=(0,me.c)(`https://www.tiktok.com${$}`,{sender_device:"pc"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(je.CL,{children:[(0,t.jsx)(fe.t,{styleType:0,text:(0,h.BT)(null==L?void 0:L.diggCount),Icon:O,onClick:v,e2eTag:"like"},void 0),(0,t.jsx)(fe.t,{styleType:0,text:(0,h.BT)(null==L?void 0:L.commentCount),Icon:Se,onClick:e.onClickComment,e2eTag:"comment"},void 0),(0,t.jsx)(fe.t,Object.assign({styleType:0,text:(null==L?void 0:L.shareCount)?(0,h.BT)(null==L?void 0:L.shareCount):o("Share"),Icon:Pe,onMouseEnter:I,onMouseLeave:S,onClick:_,e2eTag:"share"},{children:(0,t.jsx)(ge.G,Object.assign({placement:"topLeft",active:f,margin:-25,arrowMargin:36,verticalOffset:8,style:{paddingRight:4}},{children:(0,t.jsx)(je.qf,{children:(0,t.jsx)(be.mB,{videoId:E,mode:1,url:q,embedCode:P,enabled:d.shareEnabled,teaParams:D,onOtherModalOpen:B,onSendMessagePanelOpen:V},void 0)},void 0)}),void 0)}),void 0)]},void 0),w&&(0,t.jsx)(xe.J,{visible:w,videoId:E,onClose:Z},void 0)]},void 0)}));var Me=o(10207),Oe=o(14656),Be=o(18515),Ve=o(49449),Ze=o(15907),Re=o(19054),Le=o(63221);const Ee=(0,E.Z)("div",{target:"ek83qou0"})({width:"100%",height:"12px",position:"absolute",bottom:0,cursor:"initial"},"label:DivVideoControlBottom;"),$e=(0,E.Z)("div",{target:"ek83qou1"})({width:"100%",height:"16px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),qe=(0,E.Z)("div",{target:"ek83qou2"})({flex:"0 0 64px",maxWidth:"64px",marginInlineStart:"8px",fontSize:"10px",lineHeight:"16px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),ze=(0,E.Z)("div",{target:"ek83qou3"})({height:"2px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer"},"label:DivSeekBarProgress;"),Ne=(0,E.Z)("div",{target:"ek83qou4"})((({theme:{direction:e,colors:i},backgroundTheme:o})=>({height:"2px",width:"100%",backgroundColor:"primary"===o?i.Primary:i.BGPrimary,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),Fe=(0,E.Z)("div",{target:"ek83qou5"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),Ae=(0,E.Z)("div",{target:"ek83qou6"})((({show:e})=>({width:"100%",height:"16px",paddingInline:"12px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:"12px",cursor:"initial",display:"flex",[`:hover ${ze}`]:{height:"4px"},[`:hover ${Ne}`]:{height:"4px"},[`:hover ${Fe}`]:{display:"block"}})),"label:DivVideoControlContainer;"),We=(0,r.memo)((function(e){var i,o;const l=(0,r.useRef)(null),a=(0,r.useRef)(null),s=(0,r.useRef)(null),d=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[v,p]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!0),{direction:g}=(0,Me.u)(),[x,f]=(0,r.useState)(!0),{$abTestVersion:k,$user:y}=null!==(i=(0,Q.L)((()=>["$abTestVersion","$user"]),[]))&&void 0!==i?i:{},w=(0,Oe.x)(k,"seekbar_persistent_and_tooltip_test"),C="v1"!==w,j=(0,Oe.x)(k,"seekbar_theme_test"),{videoId:_,isActive:I,seek:S,videoRef:P,hideShortSeekBar:T,progressReportCallback:D,progressPreviewReportCallback:M}=e,[{duration:O,videoPercent:B,currentTime:V},Z]=(0,n.b7)(Le.M,{selector:e=>e[_]?e[_]:{duration:0,videoPercent:0,currentTime:0},dependencies:[]}),{percent:R,bindDrag:L,seek:E}=(0,Be.S)({direction:g,progressRef:a,circleRef:s,barRef:d,initialPercent:0,draggingStateCb:u,draggingPercentCb:S,progressReportCallback:D});(0,r.useEffect)((()=>{I||!V&&!B||Z.setVideoInfo({videoId:_,videoPercent:0})}),[I]),(0,r.useEffect)((()=>{V>=3&&m(!1)}),[V]);const $=null===(o=null==P?void 0:P.current)||void 0===o?void 0:o.currentCanPlay,q=!$&&0===V||T&&O<30;(0,r.useEffect)((()=>{!q&&h&&M()}),[q,h,M]),(0,r.useEffect)((()=>{$&&"v3"===w&&f((0,Ze.Z)(`${null==y?void 0:y.uid}`))}),[null==y?void 0:y.uid,$,w]),(0,r.useEffect)((()=>{var e,i;null===(e=P.current)||void 0===e||e.onSeeked((()=>{setTimeout((()=>{p(!1)}),0)})),null===(i=P.current)||void 0===i||i.onSeeking((()=>{p(!0)}))}),[P.current,p]);const z=(0,r.useCallback)((()=>{(0,Ze.j)(`${null==y?void 0:y.uid}`)}),[null==y?void 0:y.uid]),N=(0,r.useCallback)((()=>{(0,Ze.Z)(`${null==y?void 0:y.uid}`)||z(),x||f(!0)}),[null==y?void 0:y.uid,z,x]);if(q)return null;const F=c||v?R:B,A="ltr"===g?{left:`calc(${100*F}%)`}:{right:`calc(${100*F}%)`};return(0,t.jsx)(Re.H,Object.assign({visible:!x,text:"webapp_seekbar_tooltip",onShow:z},{children:(0,t.jsxs)(Ae,Object.assign({show:c||h||C,onMouseDown:b.UW,onClick:N},{children:[(0,t.jsxs)($e,Object.assign({ref:l},{children:[(0,t.jsx)(ze,{ref:a,onClick:E,onMouseDown:L},void 0),(0,t.jsx)(Fe,{ref:s,style:A,onMouseDown:L},void 0),(0,t.jsx)(Ne,{backgroundTheme:"v2"===j?"primary":void 0,ref:d,style:{transform:`scaleX(${F}) translateY(-50%)`},onClick:E,onMouseDown:L},void 0)]}),void 0),(0,t.jsx)(qe,{children:"ltr"===g?`${(0,Ve.x)(V)}/${(0,Ve.x)(O)}`:`${(0,Ve.x)(O)}/${(0,Ve.x)(V)}`},void 0)]}),void 0)}),void 0)}));var Ye=o(28360);const Ge="opacity .3s",He=(0,E.Z)("canvas",{target:"e71rlrn0"})((({horizontal:e})=>({display:"block",visibility:"hidden",[e?"width":"height"]:"100%"})),(0,$.f1)({max:479,style:{width:"100%",height:"auto"}}),"label:CanvasVideoCardPlaceholder;"),Ue=(0,E.Z)("div",{target:"e71rlrn1"})((({theme:e})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute"})),"label:DivMask;"),Je=(0,E.Z)("div",{target:"e71rlrn2"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),Ke=(0,E.Z)("div",{target:"e71rlrn3"})((({theme:e})=>({width:"64px",height:"64px",padding:"18px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),Qe=(0,E.Z)("div",{target:"e71rlrn4"})((({theme:e})=>({width:"232px",margin:"16px auto 0",fontSize:"14px",lineHeight:"20px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),Xe=(0,E.Z)("div",{target:"e71rlrn5"})((({theme:e})=>({width:"232px",margin:"8px auto 0",fontSize:"12px",lineHeight:"15px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),ei=(0,E.Z)("button",{target:"e71rlrn6"})((({theme:e})=>({width:"232px",height:"36px",cursor:"pointer",margin:"50px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"8px",fontSize:"14px",lineHeight:"20px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),ii=(0,E.Z)("div",{target:"e71rlrn7"})({position:"relative",boxSizing:"border-box",background:"#eee center no-repeat",backgroundSize:"cover",cursor:"pointer",borderRadius:"8px",overflow:"hidden"},(({theme:{direction:e}})=>(0,$.YJ)({direction:e,marginEnd:"20px"})),(({horizontal:e})=>{const i=e?"width":"height";return[{[i]:"600px"},(0,$.f1)({max:1919,style:{[i]:"calc(450px + (100vw - 768px) / 1152 * 100)"}},{max:767,style:{[i]:"calc(380px + (100vw - 480px) / 288 * 20)"}},{max:479,style:{width:"calc(100vw - 32px - 60px)",height:"auto"}})]}),"label:DivVideoCardContainer;");ii.defaultProps=Object.assign(Object.assign({},ii.defaultProps),{"data-e2e":"feed-video"});const oi=(0,E.Z)("div",{target:"e71rlrn8"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e,start:"12px"})),{position:"absolute",bottom:"12px",padding:"10px",width:"40px",height:"40px",transition:Ge,opacity:0},"label:DivPlayIconContainer;");oi.defaultProps=Object.assign(Object.assign({},oi.defaultProps),{"data-e2e":"video-play"});const ti=(0,E.Z)(oi,{target:"e71rlrn9"})({bottom:"26px"},"label:StyledDivPlayIconContainer;"),ni=(0,E.Z)(oi,{target:"e71rlrn10"})((({mute:e,theme:{direction:i}})=>[{padding:"8px",opacity:e?1:0},(0,$.YJ)({direction:i,start:"unset",end:"12px"})]),"label:StyledMuteIconContainer;");ni.defaultProps=Object.assign(Object.assign({},ni.defaultProps),{"data-e2e":"video-sound"});const ri=(0,E.Z)("div",{target:"e71rlrn11"})((({mute:e})=>[{padding:"8px",opacity:e?1:0,width:"40px",height:"40px",transition:Ge}]),"label:DivMuteIconContainer;"),li=(0,E.Z)("div",{target:"e71rlrn12"})({position:"absolute",bottom:"26px"},(({theme:{direction:e}})=>(0,$.YJ)({direction:e,start:"unset",end:"12px"})),"label:DivVoiceControlContainer;"),ai=(0,E.Z)("p",{target:"e71rlrn13"})((({theme:e})=>[(0,$.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:"ConstTextInverse"}),(0,$.YJ)({direction:e.direction,end:"16px"}),{position:"absolute",top:"24px",transition:Ge,opacity:0}]),"label:PReportText;");ai.defaultProps=Object.assign(Object.assign({},ai.defaultProps),{"data-e2e":"video-report"});const si=(0,E.Z)("svg",{target:"e71rlrn14"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e,marginEnd:"4px"})),{verticalAlign:"middle"},"label:SvgIconFlag;");si.defaultProps={fill:"currentColor",width:"1em",height:"1em"};const di=(0,E.Z)("div",{target:"e71rlrn15"})({position:"absolute",left:0,top:0,width:"100%",height:"100%",":hover":{[`${oi}, ${ti}, ${ni}, ${ri}, ${ai}, ${Ae}`]:{opacity:1}}},"label:DivVideoPlayerContainer;"),ci=(0,E.Z)("div",{target:"e71rlrn16"})({display:"flex",flexDirection:"row",alignItems:"flex-end"},"label:DivVideoWrapper;"),ui=(0,E.Z)("div",{target:"e71rlrn17"})({position:"absolute",top:0,left:0,right:0},"label:DivWarnInfoPosition;"),vi={width:20,height:20,fill:"#fff"},pi={width:24,height:24,fill:"#fff"},hi=(0,r.memo)((function({index:e,item:i,teaParams:o}){var l;const d=(0,U.Q)(),{id:c="",video:v,itemMute:m=!1,warnInfo:g,desc:x="",authorId:f=""}=(0,h.m7)(i),{width:k=1,height:y=1,playAddr:w="",cover:C=""}=(0,h.m7)(v),j=(0,r.useMemo)((()=>k/y||1),[k,y]),_=j>1,I=(0,n.mp)(J.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),S=(0,n.qj)(J.bg),P=(0,n.qj)(K.r),T=(0,n.qj)(p.A),[D,M]=(0,n.b7)(a.f,{selector:e=>{var i;return Number(null===(i=e.currentVideo)||void 0===i?void 0:i.index)},dependencies:[]}),O=D===e,{$user:B}=null!==(l=(0,Q.L)((()=>["$user"]),[]))&&void 0!==l?l:{},V=Boolean(B),{mute:Z,setMute:L}=(0,s.s_)(0),{isUseNativePlayer:E,xgplayerVid:$}=(0,X.It)(),[q,z]=(0,r.useState)(!0),N=(0,r.useRef)(!0),F=(0,r.useRef)(null),ve=(0,r.useRef)(!1),pe=(0,r.useCallback)((i=>{var o,t,n,r,l,a;i.preventDefault(),i.stopPropagation(),q?(M.updateVideo({currentVideo:{id:c,index:e,mode:0},playProgress:null!==(t=null===(o=F.current)||void 0===o?void 0:o.currentTime)&&void 0!==t?t:0}),null===(r=null===(n=F.current)||void 0===n?void 0:n.play)||void 0===r||r.call(n)):null===(a=null===(l=F.current)||void 0===l?void 0:l.pause)||void 0===a||a.call(l)}),[c,e,q,M]),he=(0,n.qj)(Le.M),me=(0,r.useCallback)((e=>{var i,o,t;const n=null===(i=F.current)||void 0===i?void 0:i.duration;he.setVideoInfo({videoId:c,videoPercent:e,currentTime:null!==(t=null===(o=F.current)||void 0===o?void 0:o.currentTime)&&void 0!==t?t:0,duration:n})}),[c,he]),ge=(0,r.useCallback)((e=>{var i,o;null===(o=null===(i=F.current)||void 0===i?void 0:i.seek)||void 0===o||o.call(i,e)}),[]),[xe,fe]=(0,r.useState)(!1),[be,ke]=(0,r.useState)(!1),ye=(0,r.useCallback)((()=>{fe(!0)}),[]),we=(0,r.useCallback)((()=>{fe(!1)}),[]),Ce=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),L(!Z)}),[Z,L]),je=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),i&&S.removeBlockVideo(i.id)}),[S,i]),_e=(0,r.useCallback)((()=>{ve.current=!0,setTimeout((()=>{ve.current=!1}),500)}),[]),Ie=(0,r.useCallback)((()=>{z(!0),N.current=!0}),[]),Se=(0,r.useCallback)((()=>{z(!1),N.current=!1}),[]),{showBrowserMode:Pe}=(0,r.useContext)(u._),Te=(0,H.fz)(ee.B),Me=(0,r.useCallback)(((e,i)=>{var t,n;Te.handleSeekBarClick(Object.assign({fromPercent:e,toPercent:i,video_length:null!==(n=null===(t=F.current)||void 0===t?void 0:t.duration)&&void 0!==n?n:0,is_pause:N.current,play_mode:"one_column"},o))}),[Te,o]),Oe=(0,r.useCallback)((()=>{var e,i;Te.handleSeekBarAutoShow(Object.assign({video_length:null!==(i=null===(e=F.current)||void 0===e?void 0:e.duration)&&void 0!==i?i:0,is_pause:N.current,play_mode:"one_column",show_method:"preview"},o))}),[Te,o]),Be=(0,H.fz)(ie.KF),Ve=(0,r.useCallback)((()=>{var i,t,n;ve.current&&(Pe({index:e,playProgress:null!==(t=null===(i=F.current)||void 0===i?void 0:i.currentTime)&&void 0!==t?t:0}),Te.handleEnterBrowser(Object.assign(Object.assign({},o),{from_mode:0})),null!==(n=oe.Bv.getItem("muted"))&&void 0!==n||L(!1),Be.reportVideoInteractStart({startTime:Date.now(),situation:"open_browser_mode"}),ve.current=!1)}),[e,Te,L,Pe,o,Be]),Ze=(0,r.useCallback)((()=>{ve.current=!0,Te.handleCommentShow(f,c),V?Ve():P.openModal({query:{enter_method:"click_comment"}})}),[Ve,V,P,Te,f,c]),Re=(0,R.X)({action:(0,r.useCallback)((e=>{if(!ve.current)return;const{clientX:i,clientY:o}=e;new te.B(i,o).emit(),T.postLikeVideo({id:c,forceLike:!0}),ve.current=!1}),[c,T]),modalConfig:{query:{enter_method:"click_like"}}}),$e=(0,ne.D)((()=>({onClick:Ve,onDoubleClick:Re})),[Ve,Re]),qe=(0,r.useMemo)((()=>q?(0,t.jsx)("svg",Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},vi,{children:(0,t.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0):(0,t.jsx)(A.Z,Object.assign({},vi),void 0)),[q]),ze=(0,r.useMemo)((()=>Z?(0,t.jsx)(W.Z,Object.assign({},pi),void 0):(0,t.jsx)(Y.Z,Object.assign({},pi),void 0)),[Z]),Ne=(0,ue.Q)({onShow:b.NS,item:i});(0,r.useEffect)((()=>{var e,o;i&&I.includes(i.id)&&(null===(o=null===(e=F.current)||void 0===e?void 0:e.pause)||void 0===o||o.call(e))}),[I,i]);const Fe=(0,r.useRef)(-1),Ae=(0,r.useRef)(0),{showVideoMask:Ge,videoMaskTitle:oi,videoMaskDesc:ni,icon:hi,videoMaskFirstButtonText:mi,videoMaskSecondButtonText:gi,maskType:xi}=(0,re.g)({playMode:0,item:null!=i?i:{},isLogin:V}),[{hideMaskTempVideoId:fi},bi]=(0,n.b7)(le.P),ki=(0,H.fz)(ae.W),yi=Ge&&fi!==c,wi=(0,r.useCallback)((()=>{clearTimeout(Fe.current),Ae.current=0}),[]);(0,r.useEffect)((()=>{O?(fi&&fi!==c&&bi.setHideMaskTempVideoId(""),yi&&("photo_sensitive_denied"===xi?ki.handleShowPhotosensitiveRemoved({group_id:c}):ki.handleShowMaskLayer({scenario:"general_sensitive"===xi?"general":"photosensitive",group_id:c}),Fe.current=window.setInterval((()=>{var e,i,o;Ae.current++>100&&wi(),(null===(e=F.current)||void 0===e?void 0:e.currentCanPlay)&&(null===(o=null===(i=F.current)||void 0===i?void 0:i.pause)||void 0===o||o.call(i),wi())}),50))):wi()}),[Ge,i,O,wi,fi,c,bi,yi,M,e,xi,ki]);const Ci=(0,r.useCallback)(((i,o)=>{var t,n,r,l;(0,b.NS)(i),wi(),bi.setHideMaskTempVideoId(c),M.updateVideo({currentVideo:{id:c,index:e,mode:0},playProgress:null!==(n=null===(t=F.current)||void 0===t?void 0:t.currentTime)&&void 0!==n?n:0}),null===(l=null===(r=F.current)||void 0===r?void 0:r.play)||void 0===l||l.call(r),ki.handleMaskLayerClickWatch({scenario:o,group_id:c})}),[wi,bi,c,M,e,ki]),ji=(0,r.useCallback)((e=>{Ci(e,"photosensitive"),bi.setSkipPhotoSensitive(!1)}),[Ci,bi]),_i=(0,r.useCallback)((e=>{Ci(e,"general")}),[Ci]);return(0,t.jsxs)(ci,{children:[(0,t.jsxs)(ii,Object.assign({horizontal:_,onClick:$e,onMouseDown:_e},{children:[(0,t.jsx)(He,{width:100*j,height:100,horizontal:_},void 0),(0,t.jsxs)(di,{children:[(0,t.jsx)(se.S,{isInExperiment:!E,desc:x,poster:C,horizontal:_,mode:0,ref:F,id:c,playUrl:w,index:e,itemMute:m,teaParams:o,playerTestVid:$,onVideoPause:Ie,onVideoPlay:Se,onTimeUpdate:me},void 0),(0,t.jsx)(ti,Object.assign({onClick:pe,onMouseDown:b.UW},{children:qe}),void 0),(0,t.jsxs)(li,Object.assign({onMouseEnter:ye,onMouseLeave:we,onMouseDown:b.UW},{children:[xe||be?(0,t.jsx)(Ye.y,{setVolumeDragging:ke},void 0):null,(0,t.jsx)(ri,Object.assign({"data-e2e":"video-sound",mute:Z,onClick:Ce},{children:ze}),void 0)]}),void 0),(0,t.jsx)(We,{videoId:c,isActive:O,seek:ge,videoRef:F,hideShortSeekBar:!0,progressReportCallback:Me,progressPreviewReportCallback:Oe},void 0),(0,t.jsx)(Ee,{onMouseDown:b.UW},void 0),(0,t.jsxs)(ai,Object.assign({onClick:Ne},{children:[(0,t.jsx)(si,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:16,height:14},{children:(0,t.jsx)("use",{xlinkHref:"#svg-flag"},void 0)}),void 0),d("Report")]}),void 0),(null==g?void 0:g[0])&&(0,t.jsx)(ui,{children:(0,t.jsx)(ce.p,{info:null==g?void 0:g[0]},void 0)},void 0),I.includes((null==i?void 0:i.id)||"")?(0,t.jsx)(Ue,{children:(0,t.jsxs)(Je,{children:[(0,t.jsx)(Ke,{children:(0,t.jsx)(G.Z,{width:28,height:28},void 0)},void 0),(0,t.jsx)(Qe,{children:d("Web_report_thanks_for_report")},void 0),(0,t.jsx)(Xe,{children:d("Web_report_hide_video")},void 0),(0,t.jsx)(ei,Object.assign({onClick:je},{children:d("Web_report_show_video")}),void 0)]},void 0)},void 0):null,yi&&(0,t.jsx)(de.a,{canClickPropagation:!0,playMode:0,horizontal:_,icon:hi,title:oi,desc:ni,firstButtonText:mi,secondButtonText:gi,onClickFirstButton:ji,onClickSecondButton:_i},void 0)]},void 0)]}),void 0),(0,t.jsx)(De,{itemId:c,onClickComment:Ze},void 0)]},void 0)})),mi=(0,r.memo)((0,r.forwardRef)((function({id:e,index:i,hideFollowButton:o=!1,hideCreateTime:l=!1,renderInner:s},d){const c=(0,n.mp)(p.A,{selector:i=>i[e],dependencies:[e]}),{forFriend:u,secret:v,createTime:j,author:_,id:I}=(0,h.m7)(c),S=(0,n.mp)(m.z,{selector:e=>{if(_)return e.users[_]},dependencies:[c]}),P=(0,n.mp)(g.G,{dependencies:[],selector:e=>{var i;return null===(i=e.appContext)||void 0===i?void 0:i.$user}}),T=(0,n.mp)(a.f,{selector:o=>{var t;return 0===(null===(t=o.currentVideo)||void 0===t?void 0:t.mode)&&o.currentVideo.id===e&&o.currentVideo.index===i},dependencies:[e,i]}),D=(null==P?void 0:P.uniqueId)===_,{showing:M,handleCardEnter:O,handleCardLeave:B,handleItemEnter:Z,handleItemLeave:R}=(0,x.V)(),L=(0,f.zW)(S),{isShowLive:E}=L;(0,f.TB)({isShowLive:E,reportTrigger:E&&T,user:S,enterMethod:"video_head",autoReport:!0,reportValidator:()=>Boolean(P&&(null==S?void 0:S.roomId)&&P.uid!==S.id)});const $=(0,f.CN)({user:S,enterMethod:E?"video_head":"click_main_btn"}),q=(0,r.useRef)(null);(0,r.useImperativeHandle)(d,(()=>({get ratio(){return q.current?(0,b.Di)(q.current,70):0},get offsetTop(){var e,i;return null!==(i=null===(e=q.current)||void 0===e?void 0:e.offsetTop)&&void 0!==i?i:0}})),[]);const z=(0,r.useMemo)((()=>(0,F.zt)(E)),[E]),A=(0,r.useMemo)((()=>({anchor:{onMouseEnter:Z,onMouseLeave:R,uniqueId:null!=_?_:"",secUid:null==S?void 0:S.secUid},avatar:Object.assign({needAnimation:!0,liveTheme:1},L)})),[null==S?void 0:S.secUid,_,L,Z,R]),W=(0,r.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:i="",format:o="",videoQuality:t="",encodeUserTag:n="",codecType:r="",definition:l=""}={},authorId:a="",scheduleTime:s,secret:d=!1,forFriend:u=!1}=null!=c?c:{};return{group_id:I,author_id:a,is_scheduled:Boolean(s),bitrate:Number(e),encodedType:i,format:o,videoQuality:t,encodeUserTag:n,codecType:r,definition:l,secret:d,forFriend:u}}),[c,I]),Y=(0,r.useMemo)((()=>({group_id:I})),[I]),G=(0,r.useMemo)((()=>{var e;return Object.assign({group_id:I,author_id:null!==(e=null==c?void 0:c.authorId)&&void 0!==e?e:""},$)}),[I,$,null==c?void 0:c.authorId]);return(0,t.jsxs)(F.k7,Object.assign({ref:q},{children:[(0,t.jsx)(z,Object.assign({},A.anchor,{teaParams:G,"data-e2e":"video-author-avatar"},{children:(0,t.jsx)(k.k,Object.assign({size:56},A.avatar),void 0)}),void 0),(0,t.jsxs)(F.EN,{children:[(0,t.jsxs)(F.Yx,{children:[(0,t.jsxs)(F.xg,{children:[(0,t.jsx)(z,Object.assign({},A.anchor,{teaParams:G},{children:(0,t.jsx)(k.k,Object.assign({size:40},A.avatar),void 0)}),void 0),_&&S&&(0,t.jsx)(V,{onMouseEnter:Z,onMouseLeave:R,uniqueId:_,teaParams:G,friend:u,secret:v,createTime:Number(null!=j?j:0),hideCreateTime:l},void 0)]},void 0),!o&&!D&&_&&S&&(0,t.jsx)(N,{uniqueId:_,teaParams:Y,e2eTag:"feed-follow"},void 0),(0,t.jsx)(w.Q,{item:c,ellipsisOnNarrow:!0,e2eTag:"video-desc"},void 0),(0,t.jsx)(C._,{item:c,styleType:0,e2eTag:"video-music"},void 0)]},void 0),(0,t.jsx)(hi,{item:c,index:i,teaParams:W},void 0),"function"==typeof s&&s()]},void 0),M&&(0,t.jsx)(y.C,{fixedLeft:-8,top:40,uniqueId:null!=_?_:"",onMouseEnter:O,onMouseLeave:B,groupId:I},void 0)]}),void 0)})));var gi=o(14400),xi=o(44141),fi=o(13934),bi=o(66164);const ki=(e,i=0,o=0)=>{const t=isNaN(i)?0:i,n=isNaN(o)?0:o,r=Math.min(t,n),l=Math.max(t,n),a=Math.max(l-r-1,0),s=[];for(let i=r+1;i<l;i++)s.push(e[i]);return{skippedGroupIds:s.join(","),skippedGroupNum:a}},yi=(0,r.memo)((0,l.J)()((function({itemList:e,loading:i,frozen:o,hideFollowButton:l=!1,hideCreateTime:h=!1,renderInnerIndex:m=0,renderInner:g,onHitBottom:x,onPageBottom:f}){const[{currPlayingIndex:k,prevPlayingIndex:y},w]=(0,n.b7)(a.f,{selector:e=>{var i,o;return{currPlayingIndex:Number(null===(i=e.currentVideo)||void 0===i?void 0:i.index),prevPlayingIndex:Number(null===(o=e.prevVideo)||void 0===o?void 0:o.index)}},dependencies:[]}),C=(0,r.useCallback)((()=>{o||null==x||x()}),[o,x]),j=(0,r.useCallback)((()=>{o||null==f||f()}),[o,f]),_=(0,d.s)({onHitBottom:C,onPageBottom:j}),I=(0,r.useCallback)((i=>{w.updateVideo({currentVideo:{id:e[i],index:i,mode:0},playProgress:0})}),[e,w]),S=(0,r.useRef)([]),P=(0,r.useCallback)((e=>i=>{S.current||(S.current=[]),S.current[e]=i}),[]),{itemListKey:T,currentIndex:D}=(0,n.mp)(v.O),{isBrowserModeShowing:M}=(0,r.useContext)(u._),{handleKeydown:O,handleScroll:B}=(({itemList:e,isBrowserModeShowing:i,oneColItemRef:o,prevPlayingIndex:t,currPlayingIndex:l,playVideoOfIndex:a})=>{const{enhanceVideoConsumptionVersion:d}=(0,gi.m)(),c="v3"===d,u=(0,H.fz)(ee.B),{mute:v,setMute:h}=(0,s.s_)(0),m=(0,n.qj)(p.A),{isModalShow:g}=(0,n.mp)(xi.D),x=(0,H.fz)(ie.KF),{skippedGroupIds:f,skippedGroupNum:k}=ki(e,t,l),{isOpen:y}=(0,n.mp)(K.r),{inputFocus:w}=(0,n.mp)(fi.B,{dependencies:[],selector:e=>({inputFocus:e.inputFocus})}),C=(0,R.X)({action:(0,r.useCallback)((e=>{m.postLikeVideo({id:e,enter_method:"keydown"})}),[m]),modalConfig:{query:{enter_method:"click_like"}}}),j=(0,r.useCallback)(((e,i)=>{let o;isNaN(e)||(o=e<i?"one_column_scroll_next":"one_column_scroll_prev",x.reportVideoInteractStart({startTime:Date.now(),situation:o,prevVideoIndex:e,currVideoIndex:i}))}),[x]),_=(0,n.mp)(p.A),I=(0,r.useCallback)((t=>{var n,r,a,s,d,p;if(w||i||y||g)return;if(!o.current[l+1]&&(32===t.keyCode||40===t.keyCode))return;const m=["input","textarea"].includes(t.target.tagName.toLocaleLowerCase());if(32===t.keyCode&&!m||c&&40===t.keyCode){const i=e[l+1];t.preventDefault(),(0,b.YZ)((null!==(r=null===(n=o.current[l+1])||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:60)-60),u.handleVideoChange({direction:"next",enter_method:"keydown",play_mode:0,group_id:i,author_id:null===(a=_[i])||void 0===a?void 0:a.authorId,skipped_group_num:k,skipped_group_ids:f})}else if(38===t.keyCode&&c&&l>0){const i=e[l-1];t.preventDefault(),(0,b.YZ)((null!==(d=null===(s=o.current[l-1])||void 0===s?void 0:s.offsetTop)&&void 0!==d?d:60)-60),u.handleVideoChange({direction:"prev",enter_method:"keydown",play_mode:0,group_id:i,author_id:null===(p=_[i])||void 0===p?void 0:p.authorId,skipped_group_num:k,skipped_group_ids:f})}else 77===t.keyCode&&!m&&c?(t.preventDefault(),h(!v,"keydown")):76===t.keyCode&&!m&&c&&C(e[l])}),[w,i,y,g,o,l,c,e,u,_,k,f,h,v,C]),S=(0,bi.Nr)((t=>{var n;for(let r=0;r<o.current.length;r++){const s=o.current[r];if(Number(null==s?void 0:s.ratio)>.5){if(!i&&(l!==r||t)){a(r);const i=l<r;if("start"===(0,b.uf)())return;i||"done"!==(0,b.uf)()||(0,b.KZ)();const{skippedGroupIds:o,skippedGroupNum:t}=ki(e,l,r),s=e[r];u.handleVideoChange({direction:l<r?"next":"prev",enter_method:"scroll",play_mode:0,group_id:s,author_id:null===(n=_[s])||void 0===n?void 0:n.authorId,skipped_group_num:t,skipped_group_ids:o}),j(l,r)}return}}}),[o,i,l,a,e,u,_,j],200);return{handleKeydown:I,handleScroll:S}})({oneColItemRef:S,itemList:e,isBrowserModeShowing:M,prevPlayingIndex:y,currPlayingIndex:k,playVideoOfIndex:I});return(0,s.$v)(0),(0,r.useEffect)((()=>{B(!0)}),[]),(0,r.useEffect)((()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)})),[O]),(0,r.useEffect)((()=>{const e=()=>{B(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[B]),(0,r.useEffect)((()=>{if(M&&0!==D){const e=setTimeout((()=>{var e,i,o;window.scrollTo(0,(null!==(o=null===(i=null===(e=S.current)||void 0===e?void 0:e[D])||void 0===i?void 0:i.offsetTop)&&void 0!==o?o:60)-60)}),0);return()=>clearTimeout(e)}}),[D,M,T]),(0,t.jsxs)("div",Object.assign({ref:_},{children:[e.map(((e,i)=>(0,t.jsx)(mi,{id:e,index:i,hideCreateTime:h,hideFollowButton:l,renderInner:i===m?g:void 0,ref:P(i)},`${e}_${i}`))),i&&(0,t.jsx)(c.g,{center:!0},void 0)]}),void 0)})))}}]);