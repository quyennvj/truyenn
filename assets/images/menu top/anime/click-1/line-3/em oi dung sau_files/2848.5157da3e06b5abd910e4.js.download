"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2848],{17609:(e,t,i)=>{i.d(t,{_:()=>d,J:()=>c});var o=i(31191),n=i(24246),r=i(13581),a=i.n(r),s=i(32735),l=i(15490);const d=(0,s.createContext)({isBrowserModeShowing:!1,showBrowserMode:a(),closeBrowserMode:a()});function c(){const[e,t]=(0,s.useState)(!1),[i,r]=(0,s.useState)({}),{showBrowserMode:a,closeBrowserMode:d}=(0,n.qj)(l.O),c=(0,s.useCallback)((e=>{const{teaParams:i}=e,n=(0,o.__rest)(e,["teaParams"]);a(n),t(!0),r(null!=i?i:{})}),[a]);return{showBrowserMode:c,closeBrowserMode:(0,s.useCallback)((e=>{t(!1),d(e)}),[d]),isBrowserModeShowing:e,teaParams:i}}},97870:(e,t,i)=>{i.d(t,{Q:()=>O});var o=i(74512),n=i(32321),r=i(32735),a=i(90883),s=i(90938),l=i(55643),d=i(22538),c=i(76631),p=i(44435),h=i(40200);const u=(0,h.Z)("span",{target:"e7nizj40"})({fontWeight:400},"label:SpanText;"),m=(e,t,i={})=>(0,o.jsx)(u,Object.assign({style:i},{children:e}),e+t),g={fontWeight:700},y={},_=e=>{const{item:t,DuetComp:i,LinkComp:n,QuestionComp:r,renderText:a=m,shouldReport:s,reportParams:l,styleType:h,mode:u}=e,_=(0,d.TH)();if(!(null==t?void 0:t.desc))return null;const{textExtra:v,desc:f,authorId:b,id:x}=t,w="kep"===h?g:y;return(null==v?void 0:v.length)?(0,o.jsx)(o.Fragment,{children:[...v].sort(((e,t)=>e.start-t.start)).reduce(((t,d,m,g)=>{const{start:y,end:v,awemeId:k,userUniqueId:C,hashtagName:S,type:j,subType:I,userId:P,hashtagId:T,questionId:O="",questionContent:M=""}=d,L=0===m?0:g[m-1].end,D=y,B=f.substring(L,D);B&&t.push(a(B,t.length-1,w));const E=7===(R=I)||5===R;var R;const Z=f.substring(y,v);if(0===j&&E){const i=(0,c.C)({to:{pathname:(0,p._9)({questionId:O,questionContent:M})},location:_});t.push((0,o.jsx)(r,{href:i,text:null!=C?C:"",index:t.length-1,id:O,type:"question",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:"question",inline:"compact"===u,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},Z+m))}else if(0===j&&k){const n=(0,c.C)({to:{pathname:(0,p.fH)({uniqueId:null!=C?C:"",videoId:k})},location:_});t.push((0,o.jsx)(i,{href:n,text:Z,index:t.length-1,id:k,type:"video",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:"duet",onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},Z+m))}else if(0===j&&P){const i=(0,c.C)({to:{pathname:(0,p.yl)({uniqueId:null!=C?C:""})},location:_});t.push((0,o.jsx)(n,{href:i,text:Z,index:t.length-1,id:P,type:"user",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:h,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},Z+m))}else if(1===j&&S){const i=(0,c.C)({to:{pathname:(0,p.JD)({tagName:S})},location:_});t.push((0,o.jsx)(n,{href:i,text:Z,index:t.length-1,id:null!=T?T:"",type:"tag",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:h,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},Z+m))}else t.push(a(Z,t.length-1,w));return m===g.length-1&&t.push(a(f.substring(v),t.length,w)),t}),[])},void 0):a(f,0,w)};var v=i(59230),f=i(29984);const b="inline-block",x=(0,h.Z)("div",{target:"e18aywvs0"})((({ellipsis:e,ellispsisLine:t,theme:i,theme:{direction:o,colors:n},styleType:r})=>[Object.assign({},i.typography.P2),e?(0,f.f1)({max:479,style:f.wj}):null,t?1===t?[f.wj,(0,f.YJ)({direction:o,display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre-line"})]:(0,f.FC)(t):null,"tag"===r||"question"===r?[(0,f.GI)({theme:i,fontFamily:"Proxima",fontWeight:"semiBold"}),{lineHeight:"22px",color:n.TextPrimary,pointerEvents:"none","a:hover":[{textDecoration:"none"},(0,f.YJ)({direction:o,display:b,verticalAlign:"top",maxWidth:"100%"})],strong:{wordBreak:"break-word",fontWeight:600}}]:null]),"label:DivContainer;"),w=(0,h.Z)("strong",{target:"e18aywvs1"})((({theme:e,styleType:t=""})=>({fontWeight:"kep"===t?e.fontWeights.bold:e.fontWeights.semiBold})),"label:StrongText;"),k=(0,h.Z)("svg",{target:"e18aywvs2"})((({theme:{direction:e}})=>[{position:"absolute",top:"50%",marginTop:"-8px"},(0,f.YJ)({direction:e,start:"5px"})]),"label:SvgIcon;"),C=(0,h.Z)(v.v,{shouldForwardProp:e=>"styleType"!==e&&"inline"!==e,target:"e18aywvs3"})((({styleType:e,inline:t,theme:{direction:i}})=>[{background:"rgba(18, 18, 18, 0.06)",display:t?"inline":b,padding:"1px 5px",position:"relative"},"tag"===e&&[{display:"initial",whiteSpace:"nowrap",fontSize:"14px",lineHeight:"20px"},(0,f.YJ)({direction:i,paddingStart:25})],("duet"===e||"question"===e)&&(0,f.YJ)({direction:i,paddingStart:25}),"kep"===e&&[{fontWeight:700}]]),"label:StyledLink;"),S=(0,h.Z)(v.v,{target:"e18aywvs4"})({display:b},"label:StyledCommonLink;");function j({type:e,id:t,authorId:i,groupId:o,text:s,isDuet:l,reportParams:d,shouldReport:c,onSearchResultClick:p}){const h=(0,n.fz)(a._);return(0,r.useCallback)((n=>{if(n.stopPropagation(),c)switch(e){case"tag":h.handleEnterPage("enter_tag_detail",Object.assign({tag_id:t,author_id:i,group_id:o,enter_method:l?"click_duet":"click_caption"},d)),null==p||p("tag");break;case"user":h.handleEnterPage("enter_personal_detail",Object.assign({to_user_id:t,author_id:i,group_id:o,enter_method:l?"click_duet":"click_caption",to_user_name:s.substr(1)},d)),null==p||p("person");break;case"video":h.handleEnterPage("enter_video_detail",Object.assign({author_id:i,group_id:o,to_group_id:t,enter_method:l?"click_duet":"click_caption"},d));break;case"question":h.handleEnterPage("enter_qa_detail_page",Object.assign({author_id:i,group_id:o,question_id:t,enter_method:"click_anchor"},d))}}),[c,e,h,t,i,o,l,d,p,s])}const I=e=>{const{href:t,text:i,index:n,id:a,type:s,reportParams:l,shouldReport:d=!0,styleType:c,authorId:p,groupId:h,hasSpace:u=!0,onLinkClick:m,onSearchResultClick:g}=e,y=j({type:s,id:a,text:i,isDuet:!0,reportParams:l,shouldReport:d,authorId:p,groupId:h,onSearchResultClick:g}),_=(0,r.useCallback)((e=>{y(e),null==m||m(e,t)}),[y,t,m]);return(0,o.jsxs)(C,Object.assign({to:t,onClick:_,styleType:c},{children:[(0,o.jsx)(k,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",fill:"#121212",width:16,height:16,styleType:c},{children:(0,o.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(0,o.jsxs)(w,{children:[i,u?" ":""]},void 0)]}),i+n)},P=e=>{const{href:t,text:i,index:n,id:a,type:d,reportParams:c,shouldReport:p=!0,styleType:h,inline:u,authorId:m,groupId:g,onLinkClick:y,onSearchResultClick:_}=e,v=(0,s.Q)(),f=j({type:d,id:a,text:i,isDuet:!1,reportParams:c,shouldReport:p,authorId:m,groupId:g,onSearchResultClick:_}),b=(0,r.useCallback)((e=>{if(!a)return e.preventDefault(),l.h.destroy(),void l.h.open({content:v("qapage_webapp_error_title"),duration:3,widthType:"padding"});f(e),null==y||y(e,t)}),[f,t,a,y,v]);return(0,o.jsxs)(C,Object.assign({"data-e2e":"question-video-anchor",to:t,onClick:b,styleType:h,inline:u},{children:[(0,o.jsx)(k,Object.assign({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#121212",width:16,height:16,styleType:h},{children:(0,o.jsx)("use",{xlinkHref:"#svg-question-fill"},void 0)}),void 0),(0,o.jsx)(w,{children:i},void 0)]}),i+n)},T=e=>{const{href:t,text:i,index:n,id:a,type:s,authorId:l,groupId:d,reportParams:c,shouldReport:p=!0,hasSpace:h=!0,styleType:u,onLinkClick:m,onSearchResultClick:g}=e,y=j({type:s,id:a,authorId:l,groupId:d,text:i,isDuet:!1,reportParams:c,shouldReport:p,onSearchResultClick:g}),_=(0,r.useCallback)((e=>{y(e),null==m||m(e,t)}),[y,t,m]);return(0,o.jsx)(S,Object.assign({to:t,onClick:_},{children:(0,o.jsxs)(w,Object.assign({styleType:u},{children:[i,h?" ":""]}),void 0)}),i+n)},O=(0,r.memo)((function(e){const{item:t,ellispsisLine:i=0,ellipsisOnNarrow:n=!1,e2eTag:r,shouldReport:a=!0,reportParams:s,mode:l,styleType:d="default",style:c={}}=e;return(0,o.jsx)(x,Object.assign({style:c,ellipsis:n,ellispsisLine:i,styleType:d,"data-e2e":r},{children:(0,o.jsx)(_,{mode:l,item:t,DuetComp:I,LinkComp:T,QuestionComp:P,reportParams:s,shouldReport:a,styleType:d,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},void 0)}),void 0)}))},60067:(e,t,i)=>{i.d(t,{_:()=>_});var o=i(31191),n=i(74512),r=i(32321),a=i(32735),s=i(44435),l=i(90883),d=i(60083),c=i(59230),p=i(40200),h=i(29984);const u={0:e=>[(0,h.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{marginTop:"4px",marginBottom:"12px"},(0,h.f1)({max:767,style:{maxWidth:"250px"}})],1:e=>[(0,h.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),{marginTop:"10px",marginBottom:"16px",flex:"0 0 auto"}],2:e=>[(0,h.GI)({theme:e,typography:"P3",fontFamily:"Proxima",fontWeight:"normal"}),{display:"inline",color:e.colors.TextSecondary},{a:{color:e.colors.TextSecondary}},(0,h.YJ)({direction:e.direction,marginStart:12})]},m=(0,p.Z)("h4",{target:"eofn35l0"})((({styleType:e,theme:t})=>u[e](t)),"label:H4Link;"),g={0:{marginRight:"5px"},1:{marginRight:"8px"},2:{marginRight:"4px"}},y=(0,p.Z)("svg",{target:"eofn35l1"})((({styleType:e,theme:{direction:t}})=>[{transform:"translateY(4px)"},(0,h.YJ)({direction:t,marginEnd:g[e].marginRight})]),"label:SvgIcon;");y.defaultProps={width:"1em",height:"1em"};const _=(0,a.memo)((function(e){var t,i,p,h,{item:u,styleType:g,e2eTag:_,teaParams:v={},onLinkClick:f}=e,b=(0,o.__rest)(e,["item","styleType","e2eTag","teaParams","onLinkClick"]);const{music:x,id:w,authorId:k}=null!=u?u:{},C=null!==(t=null==x?void 0:x.title)&&void 0!==t?t:"",S=null!==(i=null==x?void 0:x.authorName)&&void 0!==i?i:"",j="Promoted Music"===C?C:C.replace(`- ${S}`,"")+(S?` - ${S}`:""),I=(0,s.MB)({musicId:null!==(p=null==x?void 0:x.id)&&void 0!==p?p:"",musicName:null!==(h=null==x?void 0:x.title)&&void 0!==h?h:""}),P=(0,r.fz)(l._),T=(0,a.useCallback)((e=>{P.handleEnterPage("enter_music_detail",Object.assign(Object.assign({},v),{music_id:null==x?void 0:x.id,group_id:w,author_id:k,enter_method:"click_caption"})),null==f||f(e,I)}),[P,v,null==x?void 0:x.id,w,k,f,I]);return x?(0,n.jsx)(m,Object.assign({styleType:g,"data-e2e":_},{children:(0,n.jsxs)(c.v,Object.assign({to:I,replace:1===g,onClick:T},b,{children:[(0,n.jsx)(y,Object.assign({styleType:g,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},{children:(0,n.jsx)("use",{xlinkHref:"#svg-music-note"},void 0)}),void 0),j]}),void 0)}),void 0):(0,d.G)(["music"])}))},15490:(e,t,i)=>{i.d(t,{O:()=>D});var o=i(31191),n=i(6229),r=i(16219),a=i(11359),s=i(53899),l=i(37674),d=i(2480),c=i(61080),p=i(2355),h=i(31144),u=i(71011),m=i(52702),g=i(30526),y=i(51166),_=i(81104),v=i(90674),f=i(60083),b=i(80002),x=i(62904),w=i(54032),k=i(73323),C=i(99915),S=i(79006),j=i(55643),I=i(21296),P=i(65723),T=i(70336);let O=class{constructor(e){this.fetch=e}postModifyVisibility(e){return this.fetch.post("/api/aweme/modify/visibility/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:3})}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken}})}postDuetStitchChange(e){return this.fetch.post("/api/aweme/set/react_duet_stitch/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:3})}postVideoDelete(e){return this.fetch.post("/api/aweme/delete/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:3})}postScheduleDelete(e){return this.fetch.post("/api/schedule/aweme/delete/",{query:e,headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:3})}};O=(0,o.__decorate)([(0,I.G)(),(0,o.__metadata)("design:paramtypes",[T.r])],O);const M={foryou:0,topic:0,following:0,video:0,music:1,challenge:1,sticker:1,user:1,"user-post":1,"user-liked":1,search_top:1,search_video:1,question:1,playlist:1,live_event:1,video_playlist:0},L={3:"friends",2:"private",1:"public"};let D=class extends n.D{constructor(e,t,i,o,n,r,a){super(),this.service=e,this.itemList=t,this.item=i,this.videoPlayer=o,this.reporter=n,this.videoExperience=r,this.t=a,this.defaultState={currentIndex:0,itemListKey:null,jumpSamePageTime:0,belowPlayMode:0}}setItemListKey(e,t){e.itemListKey=t}setCurrentIndex(e,t){e.currentIndex=t}setBelowPlayMode(e,t){e.belowPlayMode=t}setClickSamePage(e){e.jumpSamePageTime=Date.now()}showBrowserMode(e){return e.pipe((0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([{index:e,playProgress:t,belowPlayMode:i},{itemListKey:o},n])=>({listInfo:n[o],itemListKey:o,index:e,playProgress:t,belowPlayMode:i}))),(0,m.z)((({listInfo:e,index:t=0,playProgress:i=0,belowPlayMode:o})=>{if(!e)return(0,l.of)(this.noop());const{browserList:n,list:r}=e,a=r[t],s=Math.max(0,Math.min(n.length-1,n.findIndex((e=>a===e)))),d=this.updateVideoIndex({newIndex:s,newId:a,isIndexInvalid:!1,playProgress:i});return o&&d.push(this.getActions().setBelowPlayMode(o)),(0,l.of)(...d)})))}closeBrowserMode(e){return e.pipe((0,h.M)(this.state$,this.itemList.state$),(0,m.z)((([e,{itemListKey:t,currentIndex:i,belowPlayMode:o},n])=>{var r,a,s;const{playProgress:d=0,shouldPause:c=!1}=null!=e?e:{},p=n[null!=t?t:""],h=null!==(r=null==p?void 0:p.browserList)&&void 0!==r?r:[],u=null!==(a=null==p?void 0:p.list)&&void 0!==a?a:[],m=null!==(s=h[i])&&void 0!==s?s:"",g=u.findIndex((e=>m===e));return(0,l.of)(this.videoPlayer.getActions().updateVideo({currentVideo:{index:c?-1:g,id:c?"":m,mode:null!=o?o:M[null!=t?t:""]},playProgress:d}),this.getActions().setBelowPlayMode(null))})))}handleNextVideo(e){return e.pipe((0,g.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_next"})})),(0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,r,a;const s=null!==(r=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[],l=Math.min(i+1,s.length-1);return{newIndex:l,isIndexInvalid:!(null==s?void 0:s.length)||l<0,newId:null!==(a=s[l])&&void 0!==a?a:""}})),(0,g.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,m.z)((e=>(0,l.of)(...this.updateVideoIndex(e)))),(0,_.n)({}))}handlePrevVideo(e){return e.pipe((0,g.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_prev"})})),(0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,r,a;const s=null!==(r=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[],l=Math.max(i-1,0);return{newIndex:l,isIndexInvalid:!(null==s?void 0:s.length)||l>s.length-1,newId:null!==(a=s[l])&&void 0!==a?a:""}})),(0,g.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to prev video for some reasons")})),(0,m.z)((e=>(0,l.of)(...this.updateVideoIndex(e)))),(0,_.n)({}))}postVideoDelete(e){return e.pipe((0,y.z)((e=>this.service.postVideoDelete(e).pipe((0,g.b)((({status_code:e})=>{j.h.destroy(),0===e?(j.h.open({content:this.t("deleted"),duration:3,widthType:"half"}),this.reporter.handleVideoDelete("delete")):j.h.open({content:this.t(v.kU),duration:3,widthType:"half"})})),(0,u.U)((({status_code:t})=>0===t?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,_.n)({callback:this.commonToastError})))))}postModifyVisibility(e){return e.pipe((0,m.z)((e=>this.service.postModifyVisibility(e).pipe((0,g.b)((({status_code:t})=>{0!==t?(j.h.destroy(),j.h.open({content:this.t(v.kU),duration:3,widthType:"half"})):(this.reporter.handleSelectPrivacySettingVideo({to_status:L[e.type]}),(0,f.k)(t,[0]))})),(0,u.U)((t=>0===t.status_code?this.item.getActions().setItemPrivateState({id:e.aweme_id,visibility:e.type}):2054===t.status_code?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,_.n)({callback:this.commonToastError})))))}postUserSetting(e){return e.pipe((0,y.z)((e=>this.service.postUserSetting(e).pipe((0,g.b)((({status_code:t})=>{this.tapPrivateSettingErrorToast({status_code:t,target:"comment",to_status:0===e.private_setting?"on":"off"})})),(0,u.U)((({status_code:t})=>{var i,o;return 0===t?this.item.getActions().updateItem({id:null!==(i=e.aweme_id)&&void 0!==i?i:"",itemCommentStatus:e.private_setting}):2054===t?this.getActions().updateDeleteVideo(null!==(o=e.aweme_id)&&void 0!==o?o:""):this.noop()})),(0,_.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:"comment",to_status:0===e.private_setting?"on":"off"})}})))))}postDuetOrStitchChange(e){return e.pipe((0,y.z)((({type:e,enable:t,aweme_id:i})=>this.service.postDuetStitchChange({aweme_id:i,[e]:t}).pipe((0,g.b)((({status_code:i})=>{this.tapPrivateSettingErrorToast({status_code:i,target:e,to_status:t?"on":"off"})})),(0,u.U)((({status_code:o})=>0===o?"item_duet"===e?this.item.getActions().updateItem({id:i,duetEnabled:0===t}):this.item.getActions().updateItem({id:i,stitchEnabled:0===t}):2054===o?this.getActions().updateDeleteVideo(i):this.noop())),(0,_.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:e,to_status:t?"on":"off"})}})))))}updateDeleteVideo(e){return e.pipe((0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{currentIndex:t,itemListKey:i},o])=>{var n,r,a;const s=null===(n=o[null!=i?i:""])||void 0===n?void 0:n.browserList,l=null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0,d=!s||l-1<=0,c=l-1===t;return{id:e,isIndexInvalid:d,newIndex:c?t-1:t,newId:d?"":null!==(a=null==s?void 0:s[c?t-1:t+1])&&void 0!==a?a:""}})),(0,m.z)((({id:e,isIndexInvalid:t,newIndex:i,newId:o})=>e?(0,l.of)(this.itemList.getActions().setDeleteVideo(e),this.item.getActions().setDeleteVideo(e),...this.updateVideoIndex({newIndex:i,newId:o,isIndexInvalid:t})):d.E)))}clickSamePage(e){return e.pipe((0,m.z)((()=>(0,l.of)(this.getActions().setClickSamePage()))))}postScheduleDelete(e){return e.pipe((0,y.z)((e=>this.service.postScheduleDelete({aweme_id:e}).pipe((0,g.b)((()=>{j.h.destroy(),j.h.open({content:this.t("deleted"),duration:3,widthType:"half"})})),(0,m.z)((()=>(0,l.of)(this.getActions().updateDeleteVideo(e))))))),(0,c.K)((()=>(j.h.destroy(),j.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half"}),(0,l.of)(this.noop())))),(0,g.b)((()=>{this.reporter.handleScheduleDelete("delete")})))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:i,playProgress:o}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:i,mode:2},playProgress:null!=o?o:0}),this.getActions().setCurrentIndex(e)]}commonToastError(){j.h.destroy(),j.h.open({content:this.t(v.kU),duration:3,widthType:"half"})}tapPrivateSettingErrorToast({target:e,to_status:t,status_code:i}){0===i?this.reporter.handlePrivateSetting({target:e,to_status:t}):2054===i?(j.h.destroy(),j.h.open({content:this.t("video_unavailable_deleted"),duration:3,widthType:"half"})):(j.h.destroy(),j.h.open({content:this.t(v.kU),duration:3,widthType:"half"}))}};(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"setItemListKey",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"setCurrentIndex",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"setBelowPlayMode",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"setClickSamePage",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"showBrowserMode",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"closeBrowserMode",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"handleNextVideo",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"handlePrevVideo",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"postVideoDelete",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"postModifyVisibility",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"postUserSetting",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"postDuetOrStitchChange",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"updateDeleteVideo",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"clickSamePage",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],D.prototype,"postScheduleDelete",null),D=(0,o.__decorate)([(0,a.Y)("BrowserMode"),(0,o.__param)(6,(0,s.t)(b.s)),(0,o.__metadata)("design:paramtypes",[O,x.h,w.A,k.f,C.B,S.KF,Function])],D)},55094:(e,t,i)=>{i.d(t,{J:()=>p,c:()=>h});var o=i(24246),n=i(32735),r=i(22538),a=i(86987),s=i(31977),l=i(14656),d=i(28698),c=i(17609);function p(){var e;const{$region:t=""}=null!==(e=(0,a.L)((()=>["$region"]),[]))&&void 0!==e?e:{},i=(0,o.qj)(s.N);return(0,n.useCallback)((()=>{i.initShareSettings({isMobile:!1,region:t})}),[t,i])}function h(){var e,t;const{$abTestVersion:i}=null!==(e=(0,a.L)((()=>["$abTestVersion"]),[]))&&void 0!==e?e:{},{isBrowserModeShowing:o}=(0,n.useContext)(c._),s=null!==(t=(0,l.T)(i,"share_button_embed_test"))&&void 0!==t?t:"v1",{pathname:p}=(0,r.TH)();return(0,n.useMemo)((()=>{const e=((0,d.bf)(p)||(0,d.Dj)(p)||(0,d.ws)(p)||(0,d.u7)(p))&&!o,t=(0,d.oC)(p)||(0,d.Io)(p)||(0,d.FZ)(p);let i="none";return o?i="expand":(e||t)&&(i="short"),{additionShareOptions:!0,expanded:i,showEmbedButtonInUserPage:"v2"===s}}),[p,o,s])}},64281:(e,t,i)=>{i.d(t,{mB:()=>oe});var o=i(31191),n=i(74512),r=i(1127),a=i(10207),s=i(24246),l=i(32321),d=i(32735);const c=function({width:e="1em",height:t="1em",style:i={}}){return(0,n.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i},{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"gray"},void 0),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.313 7.96568C12.3665 7.65966 12.658 7.45498 12.964 7.50851C13.27 7.56203 13.4747 7.8535 13.4211 8.15951L12.0506 15.9952C11.997 16.3012 11.7056 16.5059 11.3996 16.4523C11.0936 16.3988 10.8889 16.1073 10.9424 15.8013L12.313 7.96568ZM16.2402 8.77448C15.96 8.48453 15.5058 8.48453 15.2256 8.77448C14.9454 9.06443 14.9454 9.53454 15.2256 9.82449L17.454 12.1307L15.2262 14.4364C14.946 14.7263 14.946 15.1964 15.2262 15.4864C15.5063 15.7763 15.9606 15.7763 16.2407 15.4864L19.4551 12.1598C19.4704 12.1439 19.4704 12.1182 19.4551 12.1023L19.2233 11.8623L19.2201 11.8586L19.2158 11.854L16.2402 8.77448ZM8.88972 15.4867C8.59977 15.7766 8.12966 15.7766 7.83971 15.4867L5.4207 13.0677L4.76017 12.4071L4.51191 12.1589C4.49603 12.143 4.49603 12.1173 4.51191 12.1014L7.83853 8.77477C8.12848 8.48482 8.59859 8.48482 8.88854 8.77477C9.17849 9.06472 9.17849 9.53482 8.88854 9.82478L6.58318 12.1301L8.88972 14.4367C9.17967 14.7266 9.17967 15.1967 8.88972 15.4867Z",fill:"white"},void 0)]}),void 0)};var p,h,u,m=i(90938),g=i(41143),y=i(86987),_=i(14656),v=i(54032),f=i(86303),b=i(81774),x=i(31977),w=i(473),k=i(55643),C=i(32509),S=i(17609),j=i(88916),I=i(958);function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},P.apply(this,arguments)}const T=function(e){return d.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 316 366",width:"1em",height:"1em"},e),p||(p=d.createElement("g",{clipPath:"url(#creator-preview-skeleton_svg__clip0_1330_19052)"},d.createElement("rect",{width:316,height:366,fill:"white",rx:8}),d.createElement("rect",{width:112,height:20,x:104,y:45,fill:"#161823",fillOpacity:.06,rx:2}),d.createElement("rect",{width:196,height:16,x:104,y:73,fill:"#161823",fillOpacity:.06,rx:2}),d.createElement("rect",{width:284,height:20,x:16,y:322,fill:"#161823",fillOpacity:.06,rx:2}),d.createElement("rect",{width:130,height:170,x:16,y:128,fill:"#161823",fillOpacity:.06,rx:2}),d.createElement("path",{fill:"white",fillOpacity:.9,fillRule:"evenodd",d:"M73 202.851c0-1.559 1.705-2.519 3.038-1.709l16.715 10.148c1.283.779 1.283 2.641 0 3.419l-16.715 10.149c-1.333.809-3.038-.15-3.038-1.709v-20.298z",clipRule:"evenodd"}),d.createElement("rect",{width:130,height:170,x:154,y:128,fill:"#161823",fillOpacity:.06,rx:2}),d.createElement("path",{fill:"white",fillOpacity:.9,fillRule:"evenodd",d:"M211 202.851c0-1.559 1.705-2.519 3.038-1.709l16.715 10.148c1.283.779 1.283 2.641 0 3.419l-16.715 10.149c-1.333.809-3.038-.15-3.038-1.709v-20.298z",clipRule:"evenodd"}),d.createElement("rect",{width:130,height:170,x:292,y:128,fill:"#161823",fillOpacity:.06,rx:2}),d.createElement("circle",{cx:52,cy:68,r:36,fill:"#161823",fillOpacity:.06}),d.createElement("circle",{cx:52,cy:65,r:13.5,fill:"white"}),d.createElement("path",{fill:"white",fillRule:"evenodd",d:"M28.42 95.247C33.052 87.041 41.854 81.5 51.95 81.5c10.095 0 18.896 5.54 23.528 13.747A35.86 35.86 0 0151.95 104a35.86 35.86 0 01-23.53-8.753z",clipRule:"evenodd"}))),h||(h=d.createElement("rect",{width:315.5,height:365.5,x:.25,y:.25,stroke:"#161823",strokeOpacity:.12,strokeWidth:.5,rx:7.75})),u||(u=d.createElement("defs",null,d.createElement("clipPath",{id:"creator-preview-skeleton_svg__clip0_1330_19052"},d.createElement("rect",{width:316,height:366,fill:"white",rx:8})))))};var O=i(40200),M=i(29984);const L=(0,O.Z)("div",{target:"e1vs2zuw0"})((({theme:e})=>[(0,M.YJ)({direction:e.direction})]),{width:"700px",borderRadius:"9px","@media(max-width: 1000px)":{width:"400px"}},"label:DivModalContainer;"),D=(0,O.Z)("div",{target:"e1vs2zuw1"})((({theme:e})=>[{transform:"rtl"===e.direction?"scaleX(-1)":"none"}]),{"@media(max-width: 1000px)":{display:"none"}},"label:DivSkeletonContainer;"),B=(0,O.Z)("div",{target:"e1vs2zuw2"})({padding:"24px 24px 12px 24px",borderBottom:"0.5px solid rgba(22, 24, 35, 0.2)"},"label:DivEmbedTitle;"),E=(0,O.Z)("h3",{target:"e1vs2zuw3"})((({theme:e})=>(0,M.GI)({theme:e,typography:"P1",fontWeight:"bold"})),{fontSize:"20px",lineHeight:"24px",textAlign:"start"},"label:H3EmbedTitle;"),R=(0,O.Z)("div",{target:"e1vs2zuw4"})((({theme:{direction:e}})=>(0,M.YJ)({direction:e,end:"23px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:23,cursor:"pointer"},"label:DivXMarkWrapper;"),Z=(0,O.Z)("div",{target:"e1vs2zuw5"})({display:"flex",justifyContent:"space-between",padding:"24px","@media(max-width: 1000px)":{paddingTop:0}},"label:DivModalInnerContainer;"),z=(0,O.Z)("div",{target:"e1vs2zuw6"})({width:310,paddingTop:10,"@media(max-width: 1000px)":{width:"400px"}},"label:DivTextArea;"),A=(0,O.Z)("div",{target:"e1vs2zuw7"})((({theme:e})=>[(0,M.GI)({theme:e,fontWeight:"semiBold"}),{fontSize:16,lineHeight:"24px"}]),{display:"block",width:"100%",marginBottom:"20px",border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word"},"label:DivAreaDescription;"),U=(0,O.Z)("textarea",{target:"e1vs2zuw8"})((({theme:e})=>(0,M.GI)({theme:e,typography:"P2",color:"TextTertiary"})),{display:"block",padding:"12px 36px 12px 12px",width:"100%",height:148,marginBottom:20,border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word",background:"rgba(22, 24, 35, 0.06)",borderRadius:2},"label:TextareaEmbedCode;"),V=(0,O.Z)("button",{target:"e1vs2zuw9"})(M.Ph,(({theme:e,primary:t})=>[(0,M.GI)({theme:e,fontWeight:t?"semiBold":"normal",color:"TextPrimary"}),{fontSize:16},{":after":{content:'""',width:"100%",height:"1px",position:"absolute",left:0,top:0,background:e.colors.LineSecondary,transform:"scaleY(0.5)"}}]),{border:"1px solid rgba(22, 24, 35, 0.12)",borderRadius:2,display:"block",width:"100%",textAlign:"center",cursor:"pointer",height:"36px",marginBottom:"20px"},"label:Button;"),$=(0,O.Z)("p",{target:"e1vs2zuw10"})((({theme:e})=>[(0,M.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{a:{textDecoration:"underline","&, &:hover, &:active, &:link":{color:e.colors.TextTertiary}}}]),{fontSize:"12px",lineHeight:"18px"},"label:PHint;"),F=function(e){const{code:t,onCopy:i}=e,o=(0,m.Q)(),r=(0,s.mp)(j.G,{selector:e=>e.lang,dependencies:[]}),a=(0,d.useRef)(null),l=(0,d.useCallback)((()=>{var e;null===(e=a.current)||void 0===e||e.select(),document.execCommand&&document.execCommand("copy"),null==i||i()}),[i]),c=`"https://www.tiktok.com/legal/terms-of-service?lang=${r}" target="_blank"`;let p;try{p=o("embed_profile_popup_bottom_desc").replace("%1$s",`<a href=${c}>${o("embed_profile_popup_bottom_desc_tos")}</a>`).replace("%2$s",`<a href="https://www.tiktok.com/legal/privacy-policy" target="_blank">${o("embed_profile_card_desc_privacy_policy")}</a>`)}catch(e){p=`By embedding profile, you confirm that you agree to our <a href="https://www.tiktok.com/legal/terms-of-service?lang=${r}" target="_blank">Terms of Service</a> and acknowledge that you have read and understood our <a href="https://www.tiktok.com/legal/privacy-policy" target="_blank"> Privacy Policy.</a>`}return(0,n.jsxs)(L,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:o("embed_profile_popup_title")},void 0),(0,n.jsx)(R,Object.assign({onClick:e.onClose},{children:(0,n.jsx)(I.Z,{width:20,height:20},void 0)}),void 0)]},void 0),(0,n.jsxs)(Z,{children:[(0,n.jsx)(D,{children:(0,n.jsx)(T,{width:"316",height:"366"},void 0)},void 0),(0,n.jsxs)(z,{children:[(0,n.jsx)(A,{children:o("embed_profile_popup_desc")},void 0),(0,n.jsx)(U,{defaultValue:t,readOnly:!0,rows:7,ref:a},void 0),(0,n.jsx)(V,Object.assign({primary:!0,onClick:l},{children:o("embed_profile_popup_btn")}),void 0),(0,n.jsx)($,{dangerouslySetInnerHTML:{__html:p}},void 0)]},void 0)]},void 0)]},void 0)},q=(0,O.Z)("div",{target:"epw1mx90"})({width:"310px",borderRadius:"9px"},"label:DivModalContainer;"),H=(0,O.Z)("h3",{target:"epw1mx91"})((({theme:e})=>(0,M.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{fontSize:"20px",lineHeight:"24px",textAlign:"center",marginTop:"32px",marginBottom:"24px"},"label:H3EmbedTitle;"),W=(0,O.Z)("textarea",{target:"epw1mx92"})((({theme:e})=>(0,M.GI)({theme:e,typography:"P2"})),{display:"block",padding:"0 24px",width:"100%",marginBottom:"16px",border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word"},"label:TextareaEmbedCode;"),N=(0,O.Z)("p",{target:"epw1mx93"})((({theme:e})=>[(0,M.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{a:{textDecoration:"underline","&, &:hover, &:active, &:link":{color:e.colors.TextTertiary}}}]),{fontSize:"11px",lineHeight:"14px",marginBottom:"24px",padding:"0 24px"},"label:PHint;"),Y=(0,O.Z)("button",{target:"epw1mx94"})(M.Ph,(({theme:e,primary:t})=>[(0,M.GI)({theme:e,typography:"P2",fontWeight:t?"semiBold":"normal"}),{":after":{content:'""',width:"100%",height:"1px",position:"absolute",left:0,top:0,background:e.colors.LineSecondary,transform:"scaleY(0.5)"}}]),{display:"block",width:"100%",textAlign:"center",cursor:"pointer",fontSize:"15px",lineHeight:"52px",position:"relative"},"label:Button;"),G=function(e){const{code:t,type:i,onCopy:o}=e,r=(0,m.Q)(),a=(0,s.mp)(j.G,{selector:e=>e.lang,dependencies:[]}),l=(0,d.useRef)(null),c=(0,d.useCallback)((()=>{var e;null===(e=l.current)||void 0===e||e.select(),document.execCommand&&document.execCommand("copy"),null==o||o()}),[o]),p=`"https://www.tiktok.com/legal/terms-of-service?lang=${a}" target="_blank"`;let h;try{h=r("By embedding this video, you confirm that you agree to our <a href={TermsHref}>Terms of Use</a> and acknowledge you have read and understood our <a href={PolicyHref}> Privacy Policy.</a>").replace("{TermsHref}",p).replace("{PolicyHref}",'"https://www.tiktok.com/legal/privacy-policy-row" target="_blank"')}catch(e){h=`By embedding this video, you confirm that you agree to our <a href="https://www.tiktok.com/legal/terms-of-service?lang=${a}" target="_blank">Terms of Service</a> and acknowledge you have read and understood our <a href="https://www.tiktok.com/legal/privacy-policy-row" target="_blank"> Privacy Policy.</a>`}return 1===i?(0,n.jsx)(F,{code:t,onClose:e.onClose,onCopy:e.onCopy},void 0):(0,n.jsxs)(q,{children:[(0,n.jsx)(H,{children:r("Embed video")},void 0),(0,n.jsx)(W,{defaultValue:t,readOnly:!0,rows:7,ref:l},void 0),(0,n.jsx)(N,{dangerouslySetInnerHTML:{__html:h}},void 0),(0,n.jsx)(Y,Object.assign({primary:!0,onClick:c},{children:r("Copy code")}),void 0),(0,n.jsx)(Y,Object.assign({onClick:e.onClose},{children:r("Close")}),void 0)]},void 0)};var Q=i(55094);const K={0:({theme:{direction:e}})=>[{display:"block",fontSize:0},(0,M.YJ)({direction:e,marginEnd:"8px"})],2:()=>[{display:"block",fontSize:0,margin:"4px auto"}],1:({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"11px 16px",position:"relative",":hover":{background:e.BGView,textDecoration:"none"}})},J=(0,O.Z)("a",{target:"e14n7zw10"})((({mode:e,theme:t})=>K[e]({theme:t})),"label:AShareLink;"),X=(0,O.Z)("a",{target:"e14n7zw11"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 16px",position:"relative",":hover":{background:e.BGView,textDecoration:"none"}})),"label:AShareArrow;"),ee=(0,O.Z)("span",{target:"e14n7zw12"})((({theme:{direction:e}})=>(0,M.YJ)({direction:e,marginStart:"12px"})),"label:SpanShareText;"),te=(0,O.Z)("div",{target:"e14n7zw13"})({display:"flex",alignItems:"center",padding:"11px 16px",position:"relative",background:"rgba(22, 24, 35, 0.1)",textDecoration:"none",color:"rgba(22, 24, 35, 0.5)"},"label:DivDisabledArea;"),ie={0:24,2:24,1:26},oe=(0,d.memo)((function(e){var t,{videoId:i="",onClickShare:p,mode:h,embedCode:u,embedType:j,isEmbedDisabled:I=!1,onEmbedModalVisibleChange:P,enabled:T=!0,url:O=""}=e,M=e.teaParams,L=void 0===M?{}:M,{group_id:D,author_id:B}=L,E=(0,o.__rest)(L,["group_id","author_id"]),{from:R=0,onOtherModalOpen:Z,onSendMessagePanelOpen:z,onPlatformCountChange:A}=e;const U=(0,m.Q)(),[V,$]=(0,d.useState)(!1),{isBrowserModeShowing:F}=(0,d.useContext)(S._),{expanded:q,showEmbedButtonInUserPage:H}=(0,Q.c)(),W=(0,l.fz)(g.p),N=(0,d.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),$(!0),W.handleSharePanelClick(Object.assign({group_id:D,author_id:B},E))}),[D,W,B,E]),{$abTestVersion:Y,$user:K}=null!==(t=(0,y.L)((()=>["$abTestVersion","$user"]),[]))&&void 0!==t?t:{},oe=(0,_.x)(Y,"dm_video_share_test"),{vl1:ne,forFriend:re}=(0,s.mp)(v.A,{selector:e=>{var t;return null!==(t=e[i])&&void 0!==t?t:{}},dependencies:[i]}),ae="v2"===oe&&(!K||(null==K?void 0:K.hasIMPermission))&&!(ne&&!re)&&!(1===R||2===R),se=Boolean(K),le=(0,s.qj)(f.r),de=(0,d.useCallback)((e=>{const t=e.indexOf(b.Lb.copy);e.length>5&&"short"===q&&t>4&&(e.splice(t,1),e.splice(4,0,b.Lb.copy))}),[q]),{platforms:ce}=(0,s.mp)(x.N,{selector:e=>{var t;let{platforms:i}=e;ae||(i=null!==(t=null==i?void 0:i.filter((e=>e!==b.Lb.message)))&&void 0!==t?t:[]);const o=(null!=i?i:[]).filter((e=>e!==b.Lb.sms&&e!==b.Lb.embed));(1===j&&H||1!==j)&&u&&o.unshift("embed");const n=o.filter((e=>e!==b.Lb.copy));switch(h){case 0:return{platforms:n};case 1:return i=[...o].reverse(),de(o),i=o,F&&(i=n),{platforms:i};default:return{platforms:o}}},dependencies:[h,u,F,H,de,j,ae]}),pe=(0,d.useMemo)((()=>ce.length>5&&!V&&1===h&&"expand"!==q),[ce,V,h,q]),[he,ue]=(0,d.useState)(!1);(0,d.useEffect)((()=>{null==P||P(he)}),[he,P]);const me=(0,d.useCallback)((e=>e.replace(/(.*?){(.*?)}(.*?)/g,((e,t,i,o)=>t+U(i)+o))),[U]),ge=ie[h],ye=(0,a.u)(),_e=(0,d.useCallback)(((e,t)=>i=>{if(t&&(i.preventDefault(),i.stopPropagation(),t()),T||(i.preventDefault(),k.h.destroy(),k.h.open({content:U("web_sharing_disable_toast"),duration:3,widthType:"half"})),null==p||p(e),W.handleShare(Object.assign({platform:e,group_id:D,author_id:B,share_option_type:q,share_click_from:V||3===R?"long":"short"},E)),"copy"===e&&T)k.h.open({content:U("Copied"),duration:1.2,widthType:"half"});else if("embed"===e)ue(!0);else if("message"===e){if(!se)return void le.openModal({query:{enter_method:"share_button"}});null==z||z()}}),[T,p,W,D,B,q,V,E,U,se,z,le,R]),ve=(0,d.useCallback)((()=>{ue(!1),null==Z||Z(!1)}),[Z]),fe=(0,d.useCallback)((()=>{W.handleClickShare(Object.assign({platform:"embed",group_id:D,author_id:B,share_option_type:q,share_click_from:V?"long":"short"},E)),k.h.open({content:U("Embed Code Copied"),duration:1.2,widthType:"half"}),ue(!1)}),[B,q,D,W,E,V,U]),be=(0,d.useMemo)((()=>0===h?[0,5]:F?[5,void 0]:V||2===h||"expand"===q?[0,void 0]:[0,5]),[F,V,h,q]);return(0,d.useEffect)((()=>{var e,t;const i=null!==(t=null===(e=null==ce?void 0:ce.slice(...be))||void 0===e?void 0:e.length)&&void 0!==t?t:0;null==A||A(i)}),[A,ce,be]),(0,n.jsxs)(n.Fragment,{children:[null==ce?void 0:ce.slice(...be).map((e=>{const t="ltr"===ye.direction?"left":"right",i=2===h?t:"top",o=b.vq[e],r=(0,b.IG)({platform:e,url:O}),a="string"==typeof r?{href:r,target:"_blank",rel:"noopener noreferrer",onClick:_e(e)}:{href:"#",onClick:_e(e,r)},s=(0,n.jsxs)(J,Object.assign({mode:h},a,{"data-e2e":`video-share-${e}`},{children:[(0,n.jsx)(o,{width:ge,height:ge},void 0),1===h&&(0,n.jsx)(ee,{children:me(b.ny[e])},void 0)]}),e);return I&&"embed"===e?(0,n.jsx)(C.u,Object.assign({overlay:U("embed_profile_tooltip"),placement:"bottom"},{children:(0,n.jsxs)(te,{children:[(0,n.jsx)(c,{width:ge,height:ge},void 0),(0,n.jsx)(ee,{children:me(b.ny[e])},void 0)]},void 0)}),e):0===h||2===h?(0,n.jsx)(C.u,Object.assign({overlay:me(b.ny[e]),placement:i},{children:s}),e):s})),pe&&(0,n.jsx)(X,Object.assign({href:"#",onClick:N},{children:(0,n.jsx)(r.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(w.u,Object.assign({visible:he,onClose:ve,maskCloseable:!1},{children:(0,n.jsx)(G,{onCopy:fe,onClose:ve,code:u,type:j},void 0)}),void 0)]},void 0)}))},41143:(e,t,i)=>{i.d(t,{p:()=>a});var o=i(31191),n=i(21296),r=i(3585);let a=class{handleEvent(e,t={}){r.WB.event(e,Object.assign(Object.assign({},t),{type:t.group_id?"video":this.type}))}handleSharePanelShow(e){this.handleEvent("share_panel_show",e)}handleSharePanelClick(e){this.handleEvent("share_panel_click",e)}handleShare(e){const t=e.group_id?"share_video":"share";this.handleEvent(t,e)}handleClickShare(e){this.handleEvent("click_share_button",e)}get type(){const{page_name:e}=r.WB.commonParams;switch(e){case"video_detail":return"video";case"single_song":return"music";case"challenge":return"tag";case"others_homepage":case"personal_homepage":return"profile";case"discover_kw":return"kep";default:return}}};a=(0,o.__decorate)([(0,n.G)()],a)},74034:(e,t,i)=>{i.d(t,{kK:()=>r,uY:()=>s,GF:()=>l,LU:()=>d,V5:()=>c,p6:()=>p,wm:()=>h,JN:()=>u,Bv:()=>m});var o=i(87530),n=i.n(o);const r=e=>null==e;function a(e,t){const i=e.split(" ");return 1===i.length?e:[t(i[0]),...i.slice(1)].join(" ")}const s=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");function l(e,t=!1){if(r(e)||isNaN(Number(e)))return"--";if("string"==typeof e)return e;const i=s(Number(e));return t&&e>=0?`+${i}`:i}function d(e,t="HHh:MMm:SSs",i=!1,o=!1){if(r(e))return"--";if("s"===t)return`${(Number(e)/1e3).toFixed(2)}s`;if("s0"===t)return`${(Number(e)/1e3).toFixed(0)}s`;let n=Math.floor(Number(e)/60/60/1e3),a=Math.floor(Number(e)%36e5/6e4);const s=Math.floor(Number(e)%6e4/1e3);let l=t;i&&0===n?l=0===a?"SSs":"MMmSSs":-1===t.indexOf("SS")&&s>29&&(a+=1,60===a&&(a=0,n+=1));let d=String(n),c=String(a),p=String(s);return o&&(n<10&&(d=`0${d}`),a<10&&(c=`0${c}`),s<10&&(p=`0${p}`)),l.replace("HH",d).replace("MM",c).replace("SS",p)}function c(e){return Boolean(e&&0===e.status&&!r(e.value))}function p(e,t,i="MM-DD-YYYY HH:mm"){const o=n().unix(e).format(i);return i.includes("MMM")?a(o,t):o}const h=(e,t=!1)=>{if(r(e))return"";const i=e>=0&&t?"+":"";let o=Number(Number(e).toFixed(1)),n="";return e>999999499?(o=(o/1e9).toFixed(1),n="B"):e>999949?(o=(o/1e6).toFixed(1),n="M"):e>9999&&(o=(o/1e3).toFixed(1),n="K"),`${i}${s(o)}${n}`};function u(e,t,i="MM-DD-YYYY h:mm A"){const o=n().unix(e).format(i);return i.includes("MMM")?a(o,t):o}function m(e){const t=function(e){return Math.floor(n().unix(e).utcOffset()/60)}(e);return t<0?t.toString():`+${t}`}},81774:(e,t,i)=>{i.d(t,{Lb:()=>x,vq:()=>k,ny:()=>w,Od:()=>j,IG:()=>C});var o=i(77147),n=i(28213),r=i(13585),a=i(2836),s=i(13927),l=i(51817),d=i(73722),c=i(34334),p=i(94692),h=i(77153),u=i(11933),m=i(84178),g=i(86829),y=i(13581),_=i.n(y),v=i(35002),f=i(74512);let b=0;const x={copy:"copy",whatsapp:"whatsapp",facebook:"facebook",twitter:"twitter",reddit:"reddit",pinterest:"pinterest",vk:"vk",sms:"sms",embed:"embed",telegram:"telegram",line:"line",linkedin:"linkedin",email:"email",message:"message"},w={facebook:"{Share to} Facebook",pinterest:"{Share to} Pinterest",twitter:"{Share to} Twitter",copy:"{copy_link}",embed:"{embed}",whatsapp:"{Share to} WhatsApp",reddit:"{Share to} Reddit",vk:"{Share to} VK",sms:"{Share to} Sms",telegram:"{Share to} Telegram",line:"{Share to} Line",linkedin:"{Share to} LinkedIn",email:"{Share to} Email",message:"{support_webapp_sharing_option_button}"},k={facebook:o.Z,pinterest:n.Z,twitter:r.Z,copy:a.Z,embed:s.Z,whatsapp:l.Z,reddit:d.Z,vk:c.Z,telegram:p.Z,line:h.Z,linkedin:u.Z,email:m.Z,message:g.Z,sms:function({width:e="1em",height:t="1em",style:i={}}){return b++,(0,f.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i},{children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0002 47.001C36.7028 47.001 47.0002 36.7035 47.0002 24.001C47.0002 11.2984 36.7028 1.00098 24.0002 1.00098C11.2977 1.00098 1.00024 11.2984 1.00024 24.001C1.00024 36.7035 11.2977 47.001 24.0002 47.001Z",fill:`url(#sms_icon_paint0_linear_${b})`},void 0),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.6501 23.569C36.6501 29.3645 30.9865 34.0628 24.0001 34.0628C23.1537 34.0628 22.3267 33.9938 21.5269 33.8623C20.826 33.7948 20.4086 33.8602 19.689 34.0827C19.4224 34.1652 19.1109 34.3318 18.7539 34.5226C17.9542 34.9503 16.9262 35.5 15.6626 35.5C15.6388 35.5 15.7188 35.4207 15.8558 35.285C16.3095 34.8358 17.3876 33.7682 17.3876 32.9125V32.5167C13.7656 30.6708 11.3501 27.3539 11.3501 23.569C11.3501 17.7735 17.0137 13.0753 24.0001 13.0753C30.9865 13.0753 36.6501 17.7735 36.6501 23.569Z",fill:"white"},void 0),(0,f.jsx)("defs",{children:(0,f.jsxs)("linearGradient",Object.assign({id:`sms_icon_paint0_linear_${b}`,x1:"73.7964",y1:"64.0399",x2:"58.9088",y2:"-4.65515",gradientUnits:"userSpaceOnUse"},{children:[(0,f.jsx)("stop",{stopColor:"#43E6A2"},void 0),(0,f.jsx)("stop",{offset:"1",stopColor:"#18D037"},void 0)]}),void 0)},void 0)]}),void 0)}};function C({platform:e,url:t}){switch(e){case"facebook":return(0,v.stringifyUrl)({url:"https://www.facebook.com/sharer/sharer.php",query:{app_id:0x67903d22b9a8,u:t,display:"popup",sdk:"joey"}});case"twitter":return(0,v.stringifyUrl)({url:"https://twitter.com/intent/tweet",query:{refer_source:t,text:t}});case"pinterest":return(0,v.stringifyUrl)({url:"https://pinterest.com/pin/create/button/",query:{url:t,media:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png",desc:t}});case"whatsapp":return(0,v.stringifyUrl)({url:"https://wa.me/",query:{text:t}});case"reddit":return(0,v.stringifyUrl)({url:"https://www.reddit.com/submit",query:{url:t}});case"vk":return(0,v.stringifyUrl)({url:"https://vk.com/share.php",query:{url:t}});case"copy":return function(){const e=document.createElement("input");let i=!1;e.style.fontSize="16px",document.body.appendChild(e),e.value=t||"",e.select(),e.setSelectionRange(0,t.length),document.execCommand&&document.execCommand("copy"),e.remove()};case"telegram":return(0,v.stringifyUrl)({url:"https://t.me/share/url",query:{url:t,text:t}});case"line":return(0,v.stringifyUrl)({url:"https://lineit.line.me/share/ui",query:{url:t,text:t}});case"linkedin":return(0,v.stringifyUrl)({url:"https://www.linkedin.com/sharing/share-offsite",query:{url:t}});case"email":return(0,v.stringifyUrl)({url:"mailto:",query:{subject:t,body:t}});case"embed":case"message":return _();default:return"#"}}const S={pc:{US:["copy","sms","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","facebook","twitter","embed"],UA:["copy","whatsapp","vk","facebook","twitter","embed"],JP:["copy","twitter","facebook","whatsapp","embed"],default:["copy","whatsapp","facebook","twitter","embed"]},mobile:{US:["copy","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","sms","facebook","twitter","embed"],UA:["copy","whatsapp","vk","sms","facebook","twitter","embed"],JP:["copy","twitter","facebook","sms","whatsapp","embed"],default:["copy","whatsapp","sms","facebook","twitter","embed"]}};function j({region:e,isMobile:t=!1}){const i=t?"mobile":"pc";return S[i][e]||S[i].default}},31977:(e,t,i)=>{i.d(t,{N:()=>_});var o=i(31191),n=i(6229),r=i(16219),a=i(11359),s=i(37674),l=i(2355),d=i(31144),c=i(51166),p=i(71011),h=i(60194),u=i(61080),m=i(70336),g=i(81774);function y(e){return e in g.Lb}let _=class extends n.D{constructor(e){super(),this.fetch=e,this.defaultState={platforms:null,platformsForAdditionOnly:null}}setPlatforms(e,t){e.platforms=t}initShareSettings(e){return e.pipe((0,d.M)(this.state$),(0,c.z)((([e,{platforms:t}])=>t?(0,s.of)(this.getActions().setPlatforms(t)):this.fetch.get("/api/share/settings/",{query:{device_platform:e.isMobile?"webapp_mobile":"webapp_pc",mode:1}}).pipe((0,p.U)((({status_code:t,share_platforms:i})=>{if(0===t&&(null==i?void 0:i.length)){const e=i.map((({platform_id:e})=>e)).filter(y);return this.getActions().setPlatforms(e)}return this.getActions().setPlatforms((0,g.Od)(e))})),(0,h.O)(this.getActions().setPlatforms([])),(0,u.K)((()=>(0,s.of)(this.getActions().setPlatforms((0,g.Od)(e)))))))))}};(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setPlatforms",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"initShareSettings",null),_=(0,o.__decorate)([(0,a.Y)("TTShare"),(0,o.__metadata)("design:paramtypes",[m.r])],_)}}]);