/*! For license information please see npm-async-eb873fff.85408eab3964318037a5.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3975],{51049:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TTVerifyCenter:()=>k,close:()=>C,config:()=>b,getFp:()=>S,init:()=>E,render:()=>T});var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function a(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var o=a((function(e,t){e.exports=function(){function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,n=void 0,a=void 0,o=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(a?a(p):_())};var s="undefined"!=typeof window?window:void 0,u=s||{},l=u.MutationObserver||u.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;r=0}var v,g,m,y,_=void 0;function w(e,t){var r=this,n=new this.constructor(T);void 0===n[E]&&M(n);var i=r._state;if(i){var a=arguments[i-1];o((function(){return D(i,n,a,r._result)}))}else x(r,n,e,t);return n}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return k(t,e),t}_=c?function(){return process.nextTick(p)}:l?(g=0,m=new l(p),y=document.createTextNode(""),m.observe(y,{characterData:!0}),function(){y.data=g=++g%2}):d?((v=new MessageChannel).port1.onmessage=p,function(){return v.port2.postMessage(0)}):void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(n=e.runOnLoop||e.runOnContext)?function(){n(p)}:f()}catch(e){return f()}}():f();var E=Math.random().toString(36).substring(2);function T(){}var C=void 0;function S(t,r,n){r.constructor===t.constructor&&n===w&&r.constructor.resolve===b?function(e,t){1===t._state?R(e,t._result):2===t._state?A(e,t._result):x(t,void 0,(function(t){return k(e,t)}),(function(t){return A(e,t)}))}(t,r):void 0===n?R(t,r):e(n)?function(e,t,r){o((function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,(function(r){n||(n=!0,t!==r?k(e,r):R(e,r))}),(function(t){n||(n=!0,A(e,t))}),e._label);!n&&i&&(n=!0,A(e,i))}),e)}(t,r,n):R(t,r)}function k(e,t){if(e===t)A(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)R(e,t);else{var r=void 0;try{r=t.then}catch(t){return void A(e,t)}S(e,t,r)}var n,i}function O(e){e._onerror&&e._onerror(e._result),L(e)}function R(e,t){e._state===C&&(e._result=t,e._state=1,0!==e._subscribers.length&&o(L,e))}function A(e,t){e._state===C&&(e._state=2,e._result=t,o(O,e))}function x(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+1]=r,i[a+2]=n,0===a&&e._state&&o(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?D(r,n,i,a):i(a);e._subscribers.length=0}}function D(t,r,n,i){var a=e(n),o=void 0,s=void 0,u=!0;if(a){try{o=n(i)}catch(e){u=!1,s=e}if(r===o)return void A(r,new TypeError("A promises callback cannot return that same promise."))}else o=i;r._state!==C||(a&&u?k(r,o):!1===u?A(r,s):1===t?R(r,o):2===t&&A(r,o))}var P=0;function M(e){e[E]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}var I=function(){function e(e,r){this._instanceConstructor=e,this.promise=new e(T),this.promise[E]||M(this.promise),t(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&R(this.promise,this._result))):A(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===C&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===b){var i=void 0,a=void 0,o=!1;try{i=e.then}catch(e){o=!0,a=e}if(i===w&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===U){var s=new r(T);o?A(s,a):S(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===C&&(this._remaining--,2===e?A(n,r):this._result[t]=r),0===this._remaining&&R(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;x(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}();var U=function(){function t(e){this[E]=P++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){k(e,t)}),(function(t){A(e,t)}))}catch(t){A(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();return U.prototype.then=w,U.all=function(e){return new I(this,e).promise},U.race=function(e){var r=this;return t(e)?new r((function(t,n){for(var i=e.length,a=0;a<i;a++)r.resolve(e[a]).then(t,n)})):new r((function(e,t){return t(new TypeError("You must pass an array to race."))}))},U.resolve=b,U.reject=function(e){var t=new this(T);return A(t,e),t},U._setScheduler=function(e){a=e},U._setAsap=function(e){o=e},U._asap=o,U.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=U},U.Promise=U,U}()})),s="s_v_web_id",u=JSON.parse('{"region":"sg","executor":"Function","serverHost":"https://verify-sg.byteoversea.com","settingHost":"https://vcs-sg.byteoversea.com","cdn":"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/secsdk-captcha/sg/2.24.0/captcha.js"}'),l=function(e){var t=e.commonOptions,r=e.captchaOptions;return{aid:(null==t?void 0:t.aid)||e.aid,did:(null==t?void 0:t.did)||e.did,iid:(null==t?void 0:t.iid)||e.iid,user_unique_id:null==r?void 0:r.user_unique_id}},c=function(e){var t=e.url,r=e.method,n=e.data,i=e.config;return new o((function(e,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(o.status>=200&&o.status<300){var t={},r=o.response||o.responseText,n=o.getResponseHeader("Content-Type");if(n&&-1!==n.indexOf("application/json"))try{t=JSON.parse(r)}catch(e){}else t=r;setTimeout((function(){e(t)}),0)}else a(new TypeError("Network request failed"))},o.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){a(new DOMException("Aborted","AbortError"))}),0)};var s=t;if((null==i?void 0:i.params)&&(s=s+"?"+function(e){for(var t=Object.keys(e),r="",n=0;n<t.length;n++){var i=t[n],a=e[i],o=encodeURIComponent(i)+"="+encodeURIComponent(a);r=n>=1?r+"&"+o:o}return r}(i.params)),o.open(r,s,!0),o.timeout=5e3,null==i?void 0:i.headers)for(var u=i.headers,l=0,c=Object.keys(u);l<c.length;l++){var d=c[l];o.setRequestHeader(d,u[d])}(null==i?void 0:i.withCredentials)&&(o.withCredentials=i.withCredentials),"POST"===r.toUpperCase()&&n?o.send(JSON.stringify(n)):o.send(null)}))},d=function(e,t){return void 0===t&&(t={}),c({url:e,method:"GET",config:t})},f=function(e,t,r){void 0===r&&(r={});var i=r.headers?n({"Content-Type":"application/json"},r.headers):{"Content-Type":"application/json"};return c({url:e,method:"POST",data:t,config:n(n({},r),{headers:i})})},h=function(e){return new o((function(t,r){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("src",e),n.appendChild(i);var a=setTimeout((function(){r(new Error("LoadJSSDKMoreTan4000ms"))}),4e3);i.onload=function(){clearTimeout(a),t(0)},i.onerror=function(){clearTimeout(a),r(new Error("Failed to load SDK!"))}}))},p=function(){return f(u.settingHost+"/vc/setting",{},{headers:{"X-Setting-Flag":1}})},v=new(function(){function e(){this.conf={app_id:0,user_unique_id:"",evtParams:{}}}return e.prototype.init=function(e,t){void 0===t&&(t={}),this.conf.app_id="cn"===e.region?2018:2740,this.conf.user_unique_id=e.user_unique_id||"",this.conf.evtParams=n(n({},t),{webdriver:"undefined",isScheduling:"false",product_host:window.location.host,product_path:window.location.hostname,type:2,aid:e.aid,did:e.did,iid:e.iid})},e.prototype.setParams=function(e){this.conf.evtParams=n(n({},this.conf.evtParams),e)},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var r=[{events:[{event:"turing_verify_sdk",is_bav:0,local_time_ms:Date.now(),params:JSON.stringify(n(n(n({},this.conf.evtParams),t),{key:"h5_"+e,time:Date.now()}))}],header:{app_id:this.conf.app_id},user:{user_unique_id:this.conf.user_unique_id}}];this.sendEvents(r)},e.prototype.sendEvents=function(e){var t;(t={logs:e},f(u.serverHost+"/captcha/reportFrontend",t)).catch((function(e){console.log("report err: ",e)}))},e}()),g=a((function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function a(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=t+"="+r+s}}function o(e,r){if("undefined"!=typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),u=s.slice(1).join("=");r||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var l=t(s[0]);if(u=(n.read||n)(u,l)||t(u),r)try{u=JSON.parse(u)}catch(e){}if(i[l]=u,e===l)break}catch(e){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,r){a(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))},e.exports=r()}));var m=function(e){void 0===e&&(e={});var t=function(e){void 0===e&&(e={});var t=g.get(s);return t&&0===t.indexOf("verify_")||(t=function(e){e="object"==typeof e?e:{};var t=Date.now(),r=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,r=Date.now().toString(36),n=[];n[8]=n[13]=n[18]=n[23]="_",n[14]="4";for(var i=0,a=void 0;i<36;i++)n[i]||(a=0|Math.random()*t,n[i]=e[19==i?3&a|8:a]);return"verify_"+r+"_"+n.join("")}(),n={path:"/"};e.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(e.domain)&&(n.domain=e.domain),g.set(s,r,n);var i=!!r&&!!g.get(s);return v.trackEvent("fp_set_cookie",{duration:Date.now()-t,is_success:i?1:0,msg:i?"":r?"set cookie failed":"generate fp failed"}),r}(e)),t}(e);return o.resolve(t)},y={},_=n({},u),w=function(){function e(){}return e.load=function(){var t,r;return e.fetch||(e.fetch=!0,e.core=(t=_.region,r=Date.now(),p().catch((function(){return p()})).then((function(e){var n;return v.trackEvent("hotsdk_getsetting",{is_success:1,duration:Date.now()-r,message:""}),null===(n=null==e?void 0:e.verify)||void 0===n?void 0:n.js[t]})).catch((function(e){return v.trackEvent("hotsdk_getsetting",{is_success:0,duration:Date.now()-r,message:null==e?void 0:e.message}),o.reject(e)}))).catch((function(e){return u.cdn})).then((function(e){var t;return _.static_domain&&(e=e.replace(/\/\/([\w-]+(\.[\w-]+)+)/,(function(e,r){return t=r,"//"+_.static_domain}))),function(e,t,r){var n=Date.now();return o.resolve({}),("script"===t?h(e).catch((function(t){return h(e)})).then((function(){return window.verifySDK})):d(e).catch((function(t){return d(e)})).then((function(e){if(_.static_domain&&r)for(;-1!==e.indexOf(r);)e=e.replace(r,_.static_domain);return(t=e,n={exports:{}},new Function("exports","module",t)(n.exports,n),n).exports;var t,n}))).then((function(e){return v.trackEvent("hotsdk_loadscript",{is_success:1,duration:Date.now()-n,message:""}),e})).catch((function(e){return v.trackEvent("hotsdk_loadscript",{is_success:0,duration:Date.now()-n,message:e.message}),o.reject(e)}))}(e,_.executor,t)}))),e.core},e.get=function(){return e.core},e.fetch=!1,e}(),b=function(e){_.static_domain=e.static_domain,e.executor&&(_.executor=e.executor)},E=function(e,t,r){var i,a;void 0===t&&(t=function(){}),void 0===r&&(r=function(){}),(null===(i=null==e?void 0:e.captchaOptions)||void 0===i?void 0:i.executor)&&(_.executor=null===(a=null==e?void 0:e.captchaOptions)||void 0===a?void 0:a.executor);var o=l(e);v.init(n(n({},o),{region:u.region})),v.trackEvent("hotsdk_init"),w.load().then((function(r){JSON.stringify(e)!==JSON.stringify({})&&(y=n(n({},e),{captchaOptions:n(n({},null==e?void 0:e.captchaOptions),{h5_check_version:"3.6.1"})}),null==r||r.initVerifyOptions(y)),t(r)})).catch((function(e){var t;r({type:"loadJSSDK",msg:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:""})}))},T=function(e){v.trackEvent("hotsdk_render");var t=e;w.get().then((function(e){var r;(null===(r=null==t?void 0:t.captchaOptions)||void 0===r?void 0:r.challenge_code)?null==e||e.renderCaptcha(n(n({},y),t)):null==e||e.autoRender(t)}))},C=function(){w.get().then((function(e){null==e||e.closeCaptcha()}))},S=function(){var e;return m(null===(e=null==y?void 0:y.captchaOptions)||void 0===e?void 0:e.fpCookieOption)},k=function(){function e(){}return e.config=function(e){b(e)},e.get=function(){return w.load()},e.init=function(t,r,i){var a=l(t);return v.init(n(n({},a),{region:u.region})),v.trackEvent("hotsdk_init"),e.get().then((function(e){var i=e.initVerifyCenter(n(n({},t),{captchaOptions:n(n({},null==t?void 0:t.captchaOptions),{h5_check_version:"3.6.1"})}));if(!r)return i;r(i)})).catch((function(e){if(!i)return o.reject(e);i(e)}))},e.env={executor:u.executor},e}()},85856:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TTVerifyCenter:()=>k,close:()=>C,config:()=>b,getFp:()=>S,init:()=>E,render:()=>T});var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function a(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var o=a((function(e,t){e.exports=function(){function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,n=void 0,a=void 0,o=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(a?a(p):_())};var s="undefined"!=typeof window?window:void 0,u=s||{},l=u.MutationObserver||u.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;r=0}var v,g,m,y,_=void 0;function w(e,t){var r=this,n=new this.constructor(T);void 0===n[E]&&M(n);var i=r._state;if(i){var a=arguments[i-1];o((function(){return D(i,n,a,r._result)}))}else x(r,n,e,t);return n}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return k(t,e),t}_=c?function(){return process.nextTick(p)}:l?(g=0,m=new l(p),y=document.createTextNode(""),m.observe(y,{characterData:!0}),function(){y.data=g=++g%2}):d?((v=new MessageChannel).port1.onmessage=p,function(){return v.port2.postMessage(0)}):void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(n=e.runOnLoop||e.runOnContext)?function(){n(p)}:f()}catch(e){return f()}}():f();var E=Math.random().toString(36).substring(2);function T(){}var C=void 0;function S(t,r,n){r.constructor===t.constructor&&n===w&&r.constructor.resolve===b?function(e,t){1===t._state?R(e,t._result):2===t._state?A(e,t._result):x(t,void 0,(function(t){return k(e,t)}),(function(t){return A(e,t)}))}(t,r):void 0===n?R(t,r):e(n)?function(e,t,r){o((function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,(function(r){n||(n=!0,t!==r?k(e,r):R(e,r))}),(function(t){n||(n=!0,A(e,t))}),e._label);!n&&i&&(n=!0,A(e,i))}),e)}(t,r,n):R(t,r)}function k(e,t){if(e===t)A(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)R(e,t);else{var r=void 0;try{r=t.then}catch(t){return void A(e,t)}S(e,t,r)}var n,i}function O(e){e._onerror&&e._onerror(e._result),L(e)}function R(e,t){e._state===C&&(e._result=t,e._state=1,0!==e._subscribers.length&&o(L,e))}function A(e,t){e._state===C&&(e._state=2,e._result=t,o(O,e))}function x(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+1]=r,i[a+2]=n,0===a&&e._state&&o(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?D(r,n,i,a):i(a);e._subscribers.length=0}}function D(t,r,n,i){var a=e(n),o=void 0,s=void 0,u=!0;if(a){try{o=n(i)}catch(e){u=!1,s=e}if(r===o)return void A(r,new TypeError("A promises callback cannot return that same promise."))}else o=i;r._state!==C||(a&&u?k(r,o):!1===u?A(r,s):1===t?R(r,o):2===t&&A(r,o))}var P=0;function M(e){e[E]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}var I=function(){function e(e,r){this._instanceConstructor=e,this.promise=new e(T),this.promise[E]||M(this.promise),t(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&R(this.promise,this._result))):A(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===C&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===b){var i=void 0,a=void 0,o=!1;try{i=e.then}catch(e){o=!0,a=e}if(i===w&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===U){var s=new r(T);o?A(s,a):S(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===C&&(this._remaining--,2===e?A(n,r):this._result[t]=r),0===this._remaining&&R(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;x(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}();var U=function(){function t(e){this[E]=P++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){k(e,t)}),(function(t){A(e,t)}))}catch(t){A(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();return U.prototype.then=w,U.all=function(e){return new I(this,e).promise},U.race=function(e){var r=this;return t(e)?new r((function(t,n){for(var i=e.length,a=0;a<i;a++)r.resolve(e[a]).then(t,n)})):new r((function(e,t){return t(new TypeError("You must pass an array to race."))}))},U.resolve=b,U.reject=function(e){var t=new this(T);return A(t,e),t},U._setScheduler=function(e){a=e},U._setAsap=function(e){o=e},U._asap=o,U.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=U},U.Promise=U,U}()})),s="s_v_web_id",u=JSON.parse('{"region":"ttp","executor":"Function","serverHost":"https://verification.us.tiktok.com","settingHost":"https://vcs.us.tiktok.com","cdn":"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/secsdk-captcha/ttp/2.24.0/captcha.js"}'),l=function(e){var t=e.commonOptions,r=e.captchaOptions;return{aid:(null==t?void 0:t.aid)||e.aid,did:(null==t?void 0:t.did)||e.did,iid:(null==t?void 0:t.iid)||e.iid,user_unique_id:null==r?void 0:r.user_unique_id}},c=function(e){var t=e.url,r=e.method,n=e.data,i=e.config;return new o((function(e,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(o.status>=200&&o.status<300){var t={},r=o.response||o.responseText,n=o.getResponseHeader("Content-Type");if(n&&-1!==n.indexOf("application/json"))try{t=JSON.parse(r)}catch(e){}else t=r;setTimeout((function(){e(t)}),0)}else a(new TypeError("Network request failed"))},o.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){a(new DOMException("Aborted","AbortError"))}),0)};var s=t;if((null==i?void 0:i.params)&&(s=s+"?"+function(e){for(var t=Object.keys(e),r="",n=0;n<t.length;n++){var i=t[n],a=e[i],o=encodeURIComponent(i)+"="+encodeURIComponent(a);r=n>=1?r+"&"+o:o}return r}(i.params)),o.open(r,s,!0),o.timeout=5e3,null==i?void 0:i.headers)for(var u=i.headers,l=0,c=Object.keys(u);l<c.length;l++){var d=c[l];o.setRequestHeader(d,u[d])}(null==i?void 0:i.withCredentials)&&(o.withCredentials=i.withCredentials),"POST"===r.toUpperCase()&&n?o.send(JSON.stringify(n)):o.send(null)}))},d=function(e,t){return void 0===t&&(t={}),c({url:e,method:"GET",config:t})},f=function(e,t,r){void 0===r&&(r={});var i=r.headers?n({"Content-Type":"application/json"},r.headers):{"Content-Type":"application/json"};return c({url:e,method:"POST",data:t,config:n(n({},r),{headers:i})})},h=function(e){return new o((function(t,r){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("src",e),n.appendChild(i);var a=setTimeout((function(){r(new Error("LoadJSSDKMoreTan4000ms"))}),4e3);i.onload=function(){clearTimeout(a),t(0)},i.onerror=function(){clearTimeout(a),r(new Error("Failed to load SDK!"))}}))},p=function(){return f(u.settingHost+"/vc/setting",{},{headers:{"X-Setting-Flag":1}})},v=new(function(){function e(){this.conf={app_id:0,user_unique_id:"",evtParams:{}}}return e.prototype.init=function(e,t){void 0===t&&(t={}),this.conf.app_id="cn"===e.region?2018:2740,this.conf.user_unique_id=e.user_unique_id||"",this.conf.evtParams=n(n({},t),{webdriver:"undefined",isScheduling:"false",product_host:window.location.host,product_path:window.location.hostname,type:2,aid:e.aid,did:e.did,iid:e.iid})},e.prototype.setParams=function(e){this.conf.evtParams=n(n({},this.conf.evtParams),e)},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var r=[{events:[{event:"turing_verify_sdk",is_bav:0,local_time_ms:Date.now(),params:JSON.stringify(n(n(n({},this.conf.evtParams),t),{key:"h5_"+e,time:Date.now()}))}],header:{app_id:this.conf.app_id},user:{user_unique_id:this.conf.user_unique_id}}];this.sendEvents(r)},e.prototype.sendEvents=function(e){var t;(t={logs:e},f(u.serverHost+"/captcha/reportFrontend",t)).catch((function(e){console.log("report err: ",e)}))},e}()),g=a((function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function a(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=t+"="+r+s}}function o(e,r){if("undefined"!=typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),u=s.slice(1).join("=");r||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var l=t(s[0]);if(u=(n.read||n)(u,l)||t(u),r)try{u=JSON.parse(u)}catch(e){}if(i[l]=u,e===l)break}catch(e){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,r){a(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))},e.exports=r()}));var m=function(e){void 0===e&&(e={});var t=function(e){void 0===e&&(e={});var t=g.get(s);return t&&0===t.indexOf("verify_")||(t=function(e){e="object"==typeof e?e:{};var t=Date.now(),r=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,r=Date.now().toString(36),n=[];n[8]=n[13]=n[18]=n[23]="_",n[14]="4";for(var i=0,a=void 0;i<36;i++)n[i]||(a=0|Math.random()*t,n[i]=e[19==i?3&a|8:a]);return"verify_"+r+"_"+n.join("")}(),n={path:"/"};e.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(e.domain)&&(n.domain=e.domain),g.set(s,r,n);var i=!!r&&!!g.get(s);return v.trackEvent("fp_set_cookie",{duration:Date.now()-t,is_success:i?1:0,msg:i?"":r?"set cookie failed":"generate fp failed"}),r}(e)),t}(e);return o.resolve(t)},y={},_=n({},u),w=function(){function e(){}return e.load=function(){var t,r;return e.fetch||(e.fetch=!0,e.core=(t=_.region,r=Date.now(),p().catch((function(){return p()})).then((function(e){var n;return v.trackEvent("hotsdk_getsetting",{is_success:1,duration:Date.now()-r,message:""}),null===(n=null==e?void 0:e.verify)||void 0===n?void 0:n.js[t]})).catch((function(e){return v.trackEvent("hotsdk_getsetting",{is_success:0,duration:Date.now()-r,message:null==e?void 0:e.message}),o.reject(e)}))).catch((function(e){return u.cdn})).then((function(e){var t;return _.static_domain&&(e=e.replace(/\/\/([\w-]+(\.[\w-]+)+)/,(function(e,r){return t=r,"//"+_.static_domain}))),function(e,t,r){var n=Date.now();return o.resolve({}),("script"===t?h(e).catch((function(t){return h(e)})).then((function(){return window.verifySDK})):d(e).catch((function(t){return d(e)})).then((function(e){if(_.static_domain&&r)for(;-1!==e.indexOf(r);)e=e.replace(r,_.static_domain);return(t=e,n={exports:{}},new Function("exports","module",t)(n.exports,n),n).exports;var t,n}))).then((function(e){return v.trackEvent("hotsdk_loadscript",{is_success:1,duration:Date.now()-n,message:""}),e})).catch((function(e){return v.trackEvent("hotsdk_loadscript",{is_success:0,duration:Date.now()-n,message:e.message}),o.reject(e)}))}(e,_.executor,t)}))),e.core},e.get=function(){return e.core},e.fetch=!1,e}(),b=function(e){_.static_domain=e.static_domain,e.executor&&(_.executor=e.executor)},E=function(e,t,r){var i,a;void 0===t&&(t=function(){}),void 0===r&&(r=function(){}),(null===(i=null==e?void 0:e.captchaOptions)||void 0===i?void 0:i.executor)&&(_.executor=null===(a=null==e?void 0:e.captchaOptions)||void 0===a?void 0:a.executor);var o=l(e);v.init(n(n({},o),{region:u.region})),v.trackEvent("hotsdk_init"),w.load().then((function(r){JSON.stringify(e)!==JSON.stringify({})&&(y=n(n({},e),{captchaOptions:n(n({},null==e?void 0:e.captchaOptions),{h5_check_version:"3.6.1"})}),null==r||r.initVerifyOptions(y)),t(r)})).catch((function(e){var t;r({type:"loadJSSDK",msg:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:""})}))},T=function(e){v.trackEvent("hotsdk_render");var t=e;w.get().then((function(e){var r;(null===(r=null==t?void 0:t.captchaOptions)||void 0===r?void 0:r.challenge_code)?null==e||e.renderCaptcha(n(n({},y),t)):null==e||e.autoRender(t)}))},C=function(){w.get().then((function(e){null==e||e.closeCaptcha()}))},S=function(){var e;return m(null===(e=null==y?void 0:y.captchaOptions)||void 0===e?void 0:e.fpCookieOption)},k=function(){function e(){}return e.config=function(e){b(e)},e.get=function(){return w.load()},e.init=function(t,r,i){var a=l(t);return v.init(n(n({},a),{region:u.region})),v.trackEvent("hotsdk_init"),e.get().then((function(e){var i=e.initVerifyCenter(n(n({},t),{captchaOptions:n(n({},null==t?void 0:t.captchaOptions),{h5_check_version:"3.6.1"})}));if(!r)return i;r(i)})).catch((function(e){if(!i)return o.reject(e);i(e)}))},e.env={executor:u.executor},e}()},5339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TTVerifyCenter:()=>k,close:()=>C,config:()=>b,getFp:()=>S,init:()=>E,render:()=>T});var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function a(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var o=a((function(e,t){e.exports=function(){function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,n=void 0,a=void 0,o=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(a?a(p):_())};var s="undefined"!=typeof window?window:void 0,u=s||{},l=u.MutationObserver||u.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;r=0}var v,g,m,y,_=void 0;function w(e,t){var r=this,n=new this.constructor(T);void 0===n[E]&&M(n);var i=r._state;if(i){var a=arguments[i-1];o((function(){return D(i,n,a,r._result)}))}else x(r,n,e,t);return n}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return k(t,e),t}_=c?function(){return process.nextTick(p)}:l?(g=0,m=new l(p),y=document.createTextNode(""),m.observe(y,{characterData:!0}),function(){y.data=g=++g%2}):d?((v=new MessageChannel).port1.onmessage=p,function(){return v.port2.postMessage(0)}):void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(n=e.runOnLoop||e.runOnContext)?function(){n(p)}:f()}catch(e){return f()}}():f();var E=Math.random().toString(36).substring(2);function T(){}var C=void 0;function S(t,r,n){r.constructor===t.constructor&&n===w&&r.constructor.resolve===b?function(e,t){1===t._state?R(e,t._result):2===t._state?A(e,t._result):x(t,void 0,(function(t){return k(e,t)}),(function(t){return A(e,t)}))}(t,r):void 0===n?R(t,r):e(n)?function(e,t,r){o((function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,(function(r){n||(n=!0,t!==r?k(e,r):R(e,r))}),(function(t){n||(n=!0,A(e,t))}),e._label);!n&&i&&(n=!0,A(e,i))}),e)}(t,r,n):R(t,r)}function k(e,t){if(e===t)A(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)R(e,t);else{var r=void 0;try{r=t.then}catch(t){return void A(e,t)}S(e,t,r)}var n,i}function O(e){e._onerror&&e._onerror(e._result),L(e)}function R(e,t){e._state===C&&(e._result=t,e._state=1,0!==e._subscribers.length&&o(L,e))}function A(e,t){e._state===C&&(e._state=2,e._result=t,o(O,e))}function x(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+1]=r,i[a+2]=n,0===a&&e._state&&o(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?D(r,n,i,a):i(a);e._subscribers.length=0}}function D(t,r,n,i){var a=e(n),o=void 0,s=void 0,u=!0;if(a){try{o=n(i)}catch(e){u=!1,s=e}if(r===o)return void A(r,new TypeError("A promises callback cannot return that same promise."))}else o=i;r._state!==C||(a&&u?k(r,o):!1===u?A(r,s):1===t?R(r,o):2===t&&A(r,o))}var P=0;function M(e){e[E]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}var I=function(){function e(e,r){this._instanceConstructor=e,this.promise=new e(T),this.promise[E]||M(this.promise),t(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&R(this.promise,this._result))):A(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===C&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===b){var i=void 0,a=void 0,o=!1;try{i=e.then}catch(e){o=!0,a=e}if(i===w&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===U){var s=new r(T);o?A(s,a):S(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===C&&(this._remaining--,2===e?A(n,r):this._result[t]=r),0===this._remaining&&R(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;x(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}();var U=function(){function t(e){this[E]=P++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){k(e,t)}),(function(t){A(e,t)}))}catch(t){A(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();return U.prototype.then=w,U.all=function(e){return new I(this,e).promise},U.race=function(e){var r=this;return t(e)?new r((function(t,n){for(var i=e.length,a=0;a<i;a++)r.resolve(e[a]).then(t,n)})):new r((function(e,t){return t(new TypeError("You must pass an array to race."))}))},U.resolve=b,U.reject=function(e){var t=new this(T);return A(t,e),t},U._setScheduler=function(e){a=e},U._setAsap=function(e){o=e},U._asap=o,U.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=U},U.Promise=U,U}()})),s="s_v_web_id",u=JSON.parse('{"region":"va","executor":"Function","serverHost":"https://verification-va.byteoversea.com","settingHost":"https://vcs-va.byteoversea.com","cdn":"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/secsdk-captcha/va/2.24.0/captcha.js"}'),l=function(e){var t=e.commonOptions,r=e.captchaOptions;return{aid:(null==t?void 0:t.aid)||e.aid,did:(null==t?void 0:t.did)||e.did,iid:(null==t?void 0:t.iid)||e.iid,user_unique_id:null==r?void 0:r.user_unique_id}},c=function(e){var t=e.url,r=e.method,n=e.data,i=e.config;return new o((function(e,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(o.status>=200&&o.status<300){var t={},r=o.response||o.responseText,n=o.getResponseHeader("Content-Type");if(n&&-1!==n.indexOf("application/json"))try{t=JSON.parse(r)}catch(e){}else t=r;setTimeout((function(){e(t)}),0)}else a(new TypeError("Network request failed"))},o.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){a(new DOMException("Aborted","AbortError"))}),0)};var s=t;if((null==i?void 0:i.params)&&(s=s+"?"+function(e){for(var t=Object.keys(e),r="",n=0;n<t.length;n++){var i=t[n],a=e[i],o=encodeURIComponent(i)+"="+encodeURIComponent(a);r=n>=1?r+"&"+o:o}return r}(i.params)),o.open(r,s,!0),o.timeout=5e3,null==i?void 0:i.headers)for(var u=i.headers,l=0,c=Object.keys(u);l<c.length;l++){var d=c[l];o.setRequestHeader(d,u[d])}(null==i?void 0:i.withCredentials)&&(o.withCredentials=i.withCredentials),"POST"===r.toUpperCase()&&n?o.send(JSON.stringify(n)):o.send(null)}))},d=function(e,t){return void 0===t&&(t={}),c({url:e,method:"GET",config:t})},f=function(e,t,r){void 0===r&&(r={});var i=r.headers?n({"Content-Type":"application/json"},r.headers):{"Content-Type":"application/json"};return c({url:e,method:"POST",data:t,config:n(n({},r),{headers:i})})},h=function(e){return new o((function(t,r){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("src",e),n.appendChild(i);var a=setTimeout((function(){r(new Error("LoadJSSDKMoreTan4000ms"))}),4e3);i.onload=function(){clearTimeout(a),t(0)},i.onerror=function(){clearTimeout(a),r(new Error("Failed to load SDK!"))}}))},p=function(){return f(u.settingHost+"/vc/setting",{},{headers:{"X-Setting-Flag":1}})},v=new(function(){function e(){this.conf={app_id:0,user_unique_id:"",evtParams:{}}}return e.prototype.init=function(e,t){void 0===t&&(t={}),this.conf.app_id="cn"===e.region?2018:2740,this.conf.user_unique_id=e.user_unique_id||"",this.conf.evtParams=n(n({},t),{webdriver:"undefined",isScheduling:"false",product_host:window.location.host,product_path:window.location.hostname,type:2,aid:e.aid,did:e.did,iid:e.iid})},e.prototype.setParams=function(e){this.conf.evtParams=n(n({},this.conf.evtParams),e)},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var r=[{events:[{event:"turing_verify_sdk",is_bav:0,local_time_ms:Date.now(),params:JSON.stringify(n(n(n({},this.conf.evtParams),t),{key:"h5_"+e,time:Date.now()}))}],header:{app_id:this.conf.app_id},user:{user_unique_id:this.conf.user_unique_id}}];this.sendEvents(r)},e.prototype.sendEvents=function(e){var t;(t={logs:e},f(u.serverHost+"/captcha/reportFrontend",t)).catch((function(e){console.log("report err: ",e)}))},e}()),g=a((function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function a(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=t+"="+r+s}}function o(e,r){if("undefined"!=typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),u=s.slice(1).join("=");r||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var l=t(s[0]);if(u=(n.read||n)(u,l)||t(u),r)try{u=JSON.parse(u)}catch(e){}if(i[l]=u,e===l)break}catch(e){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,r){a(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))},e.exports=r()}));var m=function(e){void 0===e&&(e={});var t=function(e){void 0===e&&(e={});var t=g.get(s);return t&&0===t.indexOf("verify_")||(t=function(e){e="object"==typeof e?e:{};var t=Date.now(),r=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,r=Date.now().toString(36),n=[];n[8]=n[13]=n[18]=n[23]="_",n[14]="4";for(var i=0,a=void 0;i<36;i++)n[i]||(a=0|Math.random()*t,n[i]=e[19==i?3&a|8:a]);return"verify_"+r+"_"+n.join("")}(),n={path:"/"};e.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(e.domain)&&(n.domain=e.domain),g.set(s,r,n);var i=!!r&&!!g.get(s);return v.trackEvent("fp_set_cookie",{duration:Date.now()-t,is_success:i?1:0,msg:i?"":r?"set cookie failed":"generate fp failed"}),r}(e)),t}(e);return o.resolve(t)},y={},_=n({},u),w=function(){function e(){}return e.load=function(){var t,r;return e.fetch||(e.fetch=!0,e.core=(t=_.region,r=Date.now(),p().catch((function(){return p()})).then((function(e){var n;return v.trackEvent("hotsdk_getsetting",{is_success:1,duration:Date.now()-r,message:""}),null===(n=null==e?void 0:e.verify)||void 0===n?void 0:n.js[t]})).catch((function(e){return v.trackEvent("hotsdk_getsetting",{is_success:0,duration:Date.now()-r,message:null==e?void 0:e.message}),o.reject(e)}))).catch((function(e){return u.cdn})).then((function(e){var t;return _.static_domain&&(e=e.replace(/\/\/([\w-]+(\.[\w-]+)+)/,(function(e,r){return t=r,"//"+_.static_domain}))),function(e,t,r){var n=Date.now();return o.resolve({}),("script"===t?h(e).catch((function(t){return h(e)})).then((function(){return window.verifySDK})):d(e).catch((function(t){return d(e)})).then((function(e){if(_.static_domain&&r)for(;-1!==e.indexOf(r);)e=e.replace(r,_.static_domain);return(t=e,n={exports:{}},new Function("exports","module",t)(n.exports,n),n).exports;var t,n}))).then((function(e){return v.trackEvent("hotsdk_loadscript",{is_success:1,duration:Date.now()-n,message:""}),e})).catch((function(e){return v.trackEvent("hotsdk_loadscript",{is_success:0,duration:Date.now()-n,message:e.message}),o.reject(e)}))}(e,_.executor,t)}))),e.core},e.get=function(){return e.core},e.fetch=!1,e}(),b=function(e){_.static_domain=e.static_domain,e.executor&&(_.executor=e.executor)},E=function(e,t,r){var i,a;void 0===t&&(t=function(){}),void 0===r&&(r=function(){}),(null===(i=null==e?void 0:e.captchaOptions)||void 0===i?void 0:i.executor)&&(_.executor=null===(a=null==e?void 0:e.captchaOptions)||void 0===a?void 0:a.executor);var o=l(e);v.init(n(n({},o),{region:u.region})),v.trackEvent("hotsdk_init"),w.load().then((function(r){JSON.stringify(e)!==JSON.stringify({})&&(y=n(n({},e),{captchaOptions:n(n({},null==e?void 0:e.captchaOptions),{h5_check_version:"3.6.1"})}),null==r||r.initVerifyOptions(y)),t(r)})).catch((function(e){var t;r({type:"loadJSSDK",msg:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:""})}))},T=function(e){v.trackEvent("hotsdk_render");var t=e;w.get().then((function(e){var r;(null===(r=null==t?void 0:t.captchaOptions)||void 0===r?void 0:r.challenge_code)?null==e||e.renderCaptcha(n(n({},y),t)):null==e||e.autoRender(t)}))},C=function(){w.get().then((function(e){null==e||e.closeCaptcha()}))},S=function(){var e;return m(null===(e=null==y?void 0:y.captchaOptions)||void 0===e?void 0:e.fpCookieOption)},k=function(){function e(){}return e.config=function(e){b(e)},e.get=function(){return w.load()},e.init=function(t,r,i){var a=l(t);return v.init(n(n({},a),{region:u.region})),v.trackEvent("hotsdk_init"),e.get().then((function(e){var i=e.initVerifyCenter(n(n({},t),{captchaOptions:n(n({},null==t?void 0:t.captchaOptions),{h5_check_version:"3.6.1"})}));if(!r)return i;r(i)})).catch((function(e){if(!i)return o.reject(e);i(e)}))},e.env={executor:u.executor},e}()},39698:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.1263 36.6071C23.5252 37.1293 24.3109 37.1313 24.7125 36.6111L33.53 25.19C34.0375 24.5326 33.569 23.5788 32.7385 23.5788H28V12.0002C28 11.448 27.5523 11.0002 27 11.0002H21C20.4477 11.0002 20 11.448 20 12.0002V23.5788H15.1962C14.368 23.5788 13.8988 24.5278 14.4015 25.1859L23.1263 36.6071Z"}))}},33748:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.1263 11.3932C23.5252 10.8709 24.3109 10.8689 24.7125 11.3891L33.53 22.8103C34.0375 23.4677 33.569 24.4214 32.7385 24.4214H28V36C28 36.5523 27.5523 37 27 37H21C20.4477 37 20 36.5523 20 36V24.4214H15.1962C14.368 24.4214 13.8988 23.4724 14.4015 22.8143L23.1263 11.3932Z"}))}},81134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 8V28.7803L12.0371 19.0823C11.8302 18.8993 11.5143 18.9187 11.3313 19.1255L10.6687 19.8745C10.4858 20.0813 10.5051 20.3973 10.7119 20.5803L23.3374 31.749C23.7158 32.0837 24.2843 32.0837 24.6626 31.749L37.2881 20.5803C37.4949 20.3973 37.5143 20.0813 37.3313 19.8745L36.6687 19.1255C36.4858 18.9187 36.1698 18.8993 35.9629 19.0823L25 28.7803V8C25 7.72386 24.7761 7.5 24.5 7.5H23.5C23.2239 7.5 23 7.72386 23 8ZM12.5 37C12.2239 37 12 37.2239 12 37.5V38.5C12 38.7761 12.2239 39 12.5 39H35.5C35.7761 39 36 38.7761 36 38.5V37.5C36 37.2239 35.7761 37 35.5 37H12.5Z"}))}},74598:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42C28.0553 42 31.7921 40.6614 34.8006 38.401L35.6001 37.8003C36.0416 37.4686 36.6685 37.5576 37.0003 37.9992L38.2016 39.5981C38.5334 40.0397 38.4443 40.6666 38.0028 40.9983L37.2033 41.599C33.5258 44.3619 28.9513 46 24 46C11.8497 46 2 36.1503 2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24V26C46 30.4843 42.1949 34 37.8438 34C35.1966 34 32.8496 32.7142 31.3935 30.733C29.5649 32.7403 26.9303 34 24 34C18.4772 34 14 29.5228 14 24C14 18.4772 18.4772 14 24 14C29.5228 14 34 18.4772 34 24C34 24.5814 33.9502 25.1528 33.8541 25.7096C33.8473 25.8052 33.8438 25.902 33.8438 26C33.8438 28.2091 35.6347 30 37.8438 30C40.1201 30 42 28.1431 42 26V24C42 14.0589 33.9411 6 24 6ZM24 18C20.6863 18 18 20.6863 18 24C18 27.3137 20.6863 30 24 30C26.9395 30 29.3891 27.8841 29.9013 25.0918C29.9659 24.7392 30 24.3744 30 24C30 20.6863 27.3137 18 24 18Z"}))}},3624:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4375 11.9817L36.0183 34.5625C38.4977 31.7439 40 28.0482 40 24C40 15.1634 32.8366 8 24 8C19.9518 8 16.2561 9.50231 13.4375 11.9817ZM34.6067 35.9793L12.0207 13.3933C9.51807 16.2174 8 19.9306 8 24C8 32.8366 15.1634 40 24 40C28.0694 40 31.7826 38.4819 34.6067 35.9793ZM11.2941 11.2501C14.5486 8.00674 19.0409 6 24 6C33.9411 6 42 14.0589 42 24C42 28.9591 39.9933 33.4514 36.7499 36.7059C33.4919 39.9751 28.9815 42 24 42C14.0589 42 6 33.9411 6 24C6 19.0185 8.02491 14.5081 11.2941 11.2501Z"}))}},8815:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 20 20",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#BubbleEllipsisRightFill_clip0)"},n.createElement("g",{opacity:"1",filter:"url(#BubbleEllipsisRightFill_filter0_d)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0393 14.7137C17.75 13 18.75 11.215 18.75 9.13662C18.75 4.91897 14.8887 1.49997 10.125 1.49997C5.36129 1.49997 1.5 4.91897 1.5 9.13675C1.5 13.3545 5.48622 16.25 10.25 16.25V17.6487C10.25 18.0919 10.7095 18.3771 11.0992 18.1659C12.3166 17.5062 14.5725 16.183 16.0393 14.7137ZM5.93527 8.10679C6.61608 8.10679 7.16797 8.65471 7.16797 9.32962C7.16797 10.0059 6.61608 10.5538 5.93527 10.5538C5.2556 10.5538 4.70368 10.0059 4.70368 9.32962C4.70368 8.65471 5.2556 8.10679 5.93527 8.10679ZM11.3572 9.32962C11.3572 8.65471 10.8055 8.10679 10.125 8.10679C9.44459 8.10679 8.89289 8.65471 8.89289 9.32962C8.89292 10.0059 9.44462 10.5538 10.125 10.5538C10.8055 10.5538 11.3572 10.0059 11.3572 9.32962ZM14.3146 8.10679C14.9953 8.10679 15.5464 8.65471 15.5464 9.32962C15.5464 10.0059 14.9953 10.5538 14.3146 10.5538C13.6339 10.5538 13.082 10.0059 13.0821 9.32962C13.0821 8.65471 13.6339 8.10679 14.3146 8.10679Z"})),n.createElement("path",{opacity:"0.1",fillRule:"evenodd",clipRule:"evenodd",d:"M10.25 16.2499C10.25 16.2499 15.0278 15.8807 17.025 13.3234C15.0278 16.1364 13.0307 17.6708 11.2831 18.1822C9.53561 18.6937 10.25 16.2499 10.25 16.2499Z",fill:"url(#BubbleEllipsisRightFill_paint0_linear)"})),n.createElement("defs",null,n.createElement("filter",{id:"BubbleEllipsisRightFill_filter0_d",x:"0.5",y:"1.49997",width:"19.25",height:"18.737",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",{dy:"1"}),n.createElement("feGaussianBlur",{stdDeviation:"0.5"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),n.createElement("linearGradient",{id:"BubbleEllipsisRightFill_paint0_linear",x1:"8.50426",y1:"15.6957",x2:"9.29499",y2:"18.1805",gradientUnits:"userSpaceOnUse"},n.createElement("stop",null),n.createElement("stop",{offset:"1",stopOpacity:"0.01"})),n.createElement("clipPath",{id:"BubbleEllipsisRightFill_clip0"},n.createElement("rect",{width:"20",height:"20",fill:"white"}))))}},67045:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 24 24",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#ChevronExpand_clip0_9490_191669)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8804 3.88051C10.8804 3.60437 11.1042 3.38051 11.3804 3.38051L19.7499 3.38051C20.0151 3.38051 20.2695 3.48587 20.457 3.67341C20.6445 3.86094 20.7499 4.1153 20.7499 4.38051L20.7499 12.75C20.7499 13.0262 20.526 13.25 20.2499 13.25H19.2499C18.9738 13.25 18.7499 13.0262 18.7499 12.75L18.7499 5.38051L11.3804 5.38051C11.1042 5.38051 10.8804 5.15665 10.8804 4.88051L10.8804 3.88051Z",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3695 20C13.3695 20.2761 13.1456 20.5 12.8695 20.5L4.49996 20.5C4.23475 20.5 3.98039 20.3947 3.79286 20.2071C3.60532 20.0196 3.49996 19.7652 3.49996 19.5L3.49996 11.1305C3.49997 10.8544 3.72382 10.6305 3.99997 10.6305L4.99996 10.6305C5.27611 10.6305 5.49996 10.8544 5.49996 11.1305L5.49996 18.5L12.8695 18.5C13.1456 18.5 13.3695 18.7239 13.3695 19L13.3695 20Z",fill:"white"})),n.createElement("defs",null,n.createElement("clipPath",{id:"ChevronExpand_clip0_9490_191669"},n.createElement("rect",{width:"24",height:"24",fill:"white"}))))}},65525:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.4142 22.5858L18.1213 6.29289C17.7308 5.90237 17.0976 5.90237 16.7071 6.29289L15.2929 7.70711C14.9024 8.09763 14.9024 8.7308 15.2929 9.12132L30.1716 24L15.2929 38.8787C14.9024 39.2692 14.9024 39.9024 15.2929 40.2929L16.7071 41.7071C17.0976 42.0976 17.7308 42.0976 18.1213 41.7071L34.4142 25.4142C35.1953 24.6332 35.1953 23.3668 34.4142 22.5858Z"}))}},43356:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 24C6 14.0589 14.0589 6 24 6C33.9411 6 42 14.0589 42 24C42 33.9411 33.9411 42 24 42C14.0589 42 6 33.9411 6 24ZM24 2C11.8497 2 2 11.8497 2 24C2 36.1503 11.8497 46 24 46C36.1503 46 46 36.1503 46 24C46 11.8497 36.1503 2 24 2ZM22 15V24C22 25.1046 22.8954 26 24 26H33C33.5523 26 34 25.5523 34 25V23C34 22.4477 33.5523 22 33 22H26V15C26 14.4477 25.5523 14 25 14H23C22.4477 14 22 14.4477 22 15Z"}))}},39353:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 24C4 21.7909 5.79086 20 8 20C10.2091 20 12 21.7909 12 24C12 26.2091 10.2091 28 8 28C5.79086 28 4 26.2091 4 24ZM20 24C20 21.7909 21.7909 20 24 20C26.2091 20 28 21.7909 28 24C28 26.2091 26.2091 28 24 28C21.7909 28 20 26.2091 20 24ZM36 24C36 21.7909 37.7909 20 40 20C42.2091 20 44 21.7909 44 24C44 26.2091 42.2091 28 40 28C37.7909 28 36 26.2091 36 24Z"}))}},84178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z",fill:"#0DBEF3"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6327 14.8957C12.4779 14.8957 11.5417 15.8318 11.5417 16.9866V31.0131C11.5417 32.1679 12.4779 33.104 13.6327 33.104H34.3675C35.5223 33.104 36.4584 32.1679 36.4584 31.0131V16.9866C36.4584 15.8318 35.5223 14.8957 34.3675 14.8957H13.6327ZM33.7214 17.3809L24.0001 24.1142L14.2788 17.3809C13.9321 17.1407 13.4584 17.3889 13.4584 17.8106V19.0944L24.0001 26.396L34.5418 19.0944V17.8106C34.5418 17.3889 34.0681 17.1407 33.7214 17.3809Z",fill:"white"}))}},13927:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"#161823",fillOpacity:"0.75"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.313 7.96568C12.3665 7.65966 12.658 7.45498 12.964 7.50851C13.27 7.56203 13.4747 7.8535 13.4211 8.15951L12.0506 15.9952C11.997 16.3012 11.7056 16.5059 11.3996 16.4523C11.0936 16.3988 10.8889 16.1073 10.9424 15.8013L12.313 7.96568ZM16.2402 8.77448C15.96 8.48453 15.5058 8.48453 15.2256 8.77448C14.9454 9.06443 14.9454 9.53454 15.2256 9.82449L17.454 12.1307L15.2262 14.4364C14.946 14.7263 14.946 15.1964 15.2262 15.4864C15.5063 15.7763 15.9606 15.7763 16.2407 15.4864L19.4551 12.1598C19.4704 12.1439 19.4704 12.1182 19.4551 12.1023L19.2233 11.8623L19.2201 11.8586L19.2158 11.854L16.2402 8.77448ZM8.88972 15.4867C8.59977 15.7766 8.12966 15.7766 7.83971 15.4867L5.4207 13.0677L4.76017 12.4071L4.51191 12.1589C4.49603 12.143 4.49603 12.1173 4.51191 12.1014L7.83853 8.77477C8.12848 8.48482 8.59859 8.48482 8.88854 8.77477C9.17849 9.06472 9.17849 9.53482 8.88854 9.82478L6.58318 12.1301L8.88972 14.4367C9.17967 14.7266 9.17967 15.1967 8.88972 15.4867Z",fill:"white"}))}},30523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6ZM2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24C46 36.1503 36.1503 46 24 46C11.8497 46 2 36.1503 2 24Z"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 23C18.6569 23 20 21.2091 20 19C20 16.7909 18.6569 15 17 15C15.3431 15 14 16.7909 14 19C14 21.2091 15.3431 23 17 23Z"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31 23C32.6569 23 34 21.2091 34 19C34 16.7909 32.6569 15 31 15C29.3431 15 28 16.7909 28 19C28 21.2091 29.3431 23 31 23Z"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 28.3431C16 31.4673 19.5817 36 24 36C28.4183 36 32 31.4673 32 28.3431C32 25.219 16 25.219 16 28.3431Z"}))}},84408:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6ZM2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24C46 36.1503 36.1503 46 24 46C11.8497 46 2 36.1503 2 24ZM27 32C27 33.6569 25.6569 35 24 35C22.3431 35 21 33.6569 21 32C21 30.3431 22.3431 29 24 29C25.6569 29 27 30.3431 27 32ZM23 13C22.4477 13 22 13.4477 22 14V25C22 25.5523 22.4477 26 23 26H25C25.5523 26 26 25.5523 26 25V14C26 13.4477 25.5523 13 25 13H23Z"}))}},64094:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24C46 36.1503 36.1503 46 24 46C11.8497 46 2 36.1503 2 24ZM22 14C22 13.4477 22.4477 13 23 13H25C25.5523 13 26 13.4477 26 14V25C26 25.5523 25.5523 26 25 26H23C22.4477 26 22 25.5523 22 25V14ZM27 32C27 33.6569 25.6569 35 24 35C22.3431 35 21 33.6569 21 32C21 30.3431 22.3431 29 24 29C25.6569 29 27 30.3431 27 32Z"}))}},78387:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 36 36",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.8819 31.1058C28.1034 31.3236 28.4586 31.3196 28.6753 31.0969L29.9789 29.757C30.1955 29.5344 30.1916 29.1773 29.97 28.9596L5.48908 4.89442C5.26754 4.67664 4.91232 4.6806 4.69569 4.90326L3.39206 6.24315C3.17542 6.46581 3.1794 6.82286 3.40094 7.04064L6.98415 10.563C4.59164 12.4262 3.13477 14.8955 3.13477 17.6043C3.13477 23.407 9.82025 28.111 18.0672 28.111C20.1632 28.111 22.1582 27.8072 23.9683 27.2587L27.8819 31.1058ZM12.9687 16.4459L9.14562 12.6878C7.04739 14.1904 6.12126 15.9708 6.12126 17.6043C6.12126 19.2572 7.06956 21.0606 9.22102 22.5744C11.3631 24.0816 14.4813 25.1091 18.0672 25.1091C19.2549 25.1091 20.3913 24.9964 21.4579 24.7909L19.3334 22.7025C18.9281 22.8039 18.5041 22.8576 18.0675 22.8576C15.1811 22.8576 12.8412 20.5056 12.8412 17.6043C12.8412 17.2063 12.8852 16.8186 12.9687 16.4459Z",fillOpacity:"1"}),n.createElement("path",{d:"M11.9103 8.02949C13.7875 7.43091 15.8721 7.09763 18.0672 7.09763C26.3142 7.09763 32.9997 11.8016 32.9997 17.6043C32.9997 20.3839 31.4656 22.9114 28.9608 24.7905L26.792 22.6586C26.8328 22.6307 26.8733 22.6027 26.9134 22.5744C29.0649 21.0606 30.0132 19.2572 30.0132 17.6043C30.0132 15.9514 29.0649 14.148 26.9134 12.6342C24.7714 11.1271 21.6531 10.0995 18.0672 10.0995C16.7752 10.0995 15.5439 10.2329 14.3971 10.4741L11.9103 8.02949Z",fillOpacity:"1"}),n.createElement("path",{d:"M18.0675 12.351C17.5358 12.351 17.0226 12.4308 16.5391 12.5792L23.0996 19.0282C23.2262 18.5754 23.2939 18.0978 23.2939 17.6043C23.2939 14.703 20.954 12.351 18.0675 12.351Z",fillOpacity:"1"}))}},77147:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M24 47C36.7025 47 47 36.7025 47 24C47 11.2975 36.7025 1 24 1C11.2975 1 1 11.2975 1 24C1 36.7025 11.2975 47 24 47Z",fill:"white"}),n.createElement("path",{d:"M24 1C11.2964 1 1 11.2964 1 24C1 35.4775 9.40298 44.9804 20.3846 46.7205L20.3936 30.6629H14.5151V24.009H20.3936C20.3936 24.009 20.3665 20.2223 20.3936 18.5363C20.4206 16.8503 20.7542 15.2274 21.6288 13.7487C22.9722 11.4586 25.0639 10.3407 27.6335 10.0251C29.7432 9.76362 31.826 10.0521 33.9087 10.3407C34.0529 10.3587 34.125 10.3767 34.2693 10.4038C34.2693 10.4038 34.2783 10.6472 34.2693 10.8005C34.2603 12.4053 34.2693 16.0839 34.2693 16.0839C33.2685 16.0659 31.6096 15.9667 30.5096 16.138C28.6884 16.4175 27.6425 17.5806 27.6064 19.4108C27.5704 20.8354 27.5884 24.009 27.5884 24.009H33.9988L32.962 30.6629H27.5974V46.7205C38.597 44.9984 47.009 35.4775 47.009 24C47 11.2964 36.7036 1 24 1Z",fill:"#0075FA"}))}},96909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 9.31286V27.0626C9.98685 26.7378 11.184 26.4042 12.5108 26.1585C16.1115 25.4917 21.0181 25.4123 25.1625 28.3726C28.0181 30.4123 31.6115 30.4917 34.7608 29.9085C36.306 29.6223 37.6602 29.1908 38.6289 28.8293C38.7603 28.7803 38.8841 28.7328 39 28.6872V10.9374C38.0131 11.2623 36.816 11.5959 35.4892 11.8416C31.8885 12.5084 26.9819 12.5878 22.8375 9.62751C19.9819 7.58781 16.3885 7.5084 13.2392 8.09161C11.694 8.37776 10.3398 8.80927 9.37105 9.17072C9.23971 9.21973 9.11586 9.2673 9 9.31286ZM40.1067 6.21064C40.7264 5.90123 41.4622 5.93453 42.0515 6.29874C42.6411 6.66315 43 7.30688 43 8.00004V30C43 30.7576 42.572 31.4501 41.8944 31.7889L41 30C41.8944 31.7889 41.8931 31.7895 41.8931 31.7895L41.8916 31.7903L41.8878 31.7922L41.8775 31.7973L41.846 31.8127C41.831 31.82 41.8128 31.8288 41.7915 31.839C41.7761 31.8464 41.7589 31.8545 41.7401 31.8634C41.651 31.9055 41.525 31.9637 41.3654 32.0343C41.0466 32.1753 40.5919 32.3663 40.0273 32.577C38.9023 32.9967 37.319 33.5027 35.4892 33.8416C31.8885 34.5084 26.9819 34.5878 22.8375 31.6275C19.9819 29.5878 16.3885 29.5084 13.2392 30.0916C11.694 30.3778 10.3398 30.8093 9.37105 31.1707C9.23971 31.2197 9.11586 31.2673 9 31.3129V44.0001C9 44.5524 8.55228 45.0001 8 45.0001H6C5.44772 45.0001 5 44.5524 5 44.0001V8.00004C5 7.24249 5.42801 6.54996 6.10558 6.21118L7 8.00004C6.10558 6.21118 6.10688 6.21053 6.10688 6.21053L6.10842 6.20976L6.11219 6.20789L6.12249 6.20279L6.15404 6.18734C6.17988 6.17477 6.21529 6.15773 6.25987 6.13667C6.34902 6.09457 6.47498 6.03636 6.63455 5.9658C6.95342 5.8248 7.4081 5.63378 7.9727 5.42311C9.09774 5.00332 10.681 4.49734 12.5108 4.15849C16.1115 3.49171 21.0181 3.4123 25.1625 6.37257C28.0181 8.41227 31.6115 8.49167 34.7608 7.90846C36.306 7.62231 37.6602 7.1908 38.6289 6.82935C39.1112 6.6494 39.4925 6.48886 39.7478 6.37595C39.8754 6.31956 39.9711 6.27523 40.0318 6.24653C40.0622 6.23219 40.0838 6.22177 40.0962 6.21572L40.1056 6.21118L40.1067 6.21064Z"}))}},66990:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 33 32",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8.5417 16.9942L13.4398 4.39003C13.5312 4.15501 13.7588 4 14.0126 4H22.2303C22.6768 4 22.9739 4.45799 22.7892 4.86138L19.7413 11.516C19.5565 11.9194 19.8537 12.3774 20.3002 12.3774H23.885C24.3889 12.3774 24.6782 12.9467 24.3787 13.3488L13.653 27.7504C13.2651 28.2712 12.4348 27.9113 12.5561 27.2749L14.221 18.5453C14.2926 18.1701 14.0026 17.8227 13.6178 17.8227H9.11448C8.68341 17.8227 8.38658 17.3934 8.5417 16.9942Z"}))}},8647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M48 96C74.5097 96 96 74.5097 96 48C96 21.4903 74.5097 0 48 0C21.4903 0 0 21.4903 0 48C0 74.5097 21.4903 96 48 96Z",fill:"#79DBF2"}),n.createElement("path",{d:"M23.184 38.4961C28.8571 38.4961 33.456 33.8971 33.456 28.2241C33.456 22.551 28.8571 17.9521 23.184 17.9521C17.511 17.9521 12.912 22.551 12.912 28.2241C12.912 33.8971 17.511 38.4961 23.184 38.4961Z",fill:"black"}),n.createElement("path",{d:"M72.8161 38.4961C78.4892 38.4961 83.0881 33.8971 83.0881 28.2241C83.0881 22.551 78.4892 17.9521 72.8161 17.9521C67.1431 17.9521 62.5441 22.551 62.5441 28.2241C62.5441 33.8971 67.1431 38.4961 72.8161 38.4961Z",fill:"black"}),n.createElement("path",{d:"M48.0001 84.912C68.9958 84.912 86.0161 70.7713 86.0161 53.328C86.0161 35.8846 68.9958 21.744 48.0001 21.744C27.0045 21.744 9.98413 35.8846 9.98413 53.328C9.98413 70.7713 27.0045 84.912 48.0001 84.912Z",fill:"white"}),n.createElement("path",{d:"M38.0972 59.8531C42.2755 52.2576 40.974 43.5211 35.1903 40.3394C29.4066 37.1578 21.3308 40.7359 17.1525 48.3314C12.9742 55.9269 14.2757 64.6635 20.0594 67.8451C25.8431 71.0267 33.9189 67.4486 38.0972 59.8531Z",fill:"black"}),n.createElement("path",{d:"M75.9118 67.86C81.6955 64.6784 82.997 55.9418 78.8187 48.3463C74.6404 40.7508 66.5646 37.1727 60.7809 40.3543C54.9972 43.536 53.6957 52.2725 57.874 59.868C62.0523 67.4635 70.1281 71.0416 75.9118 67.86Z",fill:"black"}),n.createElement("path",{d:"M27.6479 58.416C29.7687 58.416 31.4879 56.6968 31.4879 54.576C31.4879 52.4553 29.7687 50.736 27.6479 50.736C25.5271 50.736 23.8079 52.4553 23.8079 54.576C23.8079 56.6968 25.5271 58.416 27.6479 58.416Z",fill:"white"}),n.createElement("path",{d:"M68.352 58.416C70.4728 58.416 72.192 56.6968 72.192 54.576C72.192 52.4553 70.4728 50.736 68.352 50.736C66.2312 50.736 64.512 52.4553 64.512 54.576C64.512 56.6968 66.2312 58.416 68.352 58.416Z",fill:"white"}),n.createElement("path",{d:"M54.7681 67.344C54.7681 69.744 51.7441 72.8159 48.0001 72.8159C44.2561 72.8159 41.2321 69.744 41.2321 67.344C41.2321 64.944 44.2561 64.128 48.0001 64.128C51.7441 64.128 54.7681 64.944 54.7681 67.344Z",fill:"black"}))}},90119:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 72 72",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.7571 1.16743C51.2866 1.22458 51.6695 1.70014 51.6124 2.22962L49.2242 24.3565H65.3287C65.8612 24.3565 66.293 24.7882 66.293 25.3208V26.5552C66.293 27.0877 65.8612 27.5194 65.3287 27.5194H48.8829L47.0243 44.7401H65.3287C65.8612 44.7401 66.293 45.1718 66.293 45.7044V46.9388C66.293 47.4713 65.8612 47.903 65.3287 47.903H46.6829L44.2855 70.1162C44.2283 70.6457 43.7528 71.0286 43.2233 70.9714L41.9961 70.839C41.4666 70.7818 41.0837 70.3063 41.1408 69.7768L43.5016 47.903H26.461L24.0636 70.1162C24.0065 70.6457 23.5309 71.0286 23.0014 70.9714L21.7742 70.839C21.2447 70.7818 20.8618 70.3063 20.9189 69.7768L23.2797 47.903H6.10714C5.57458 47.903 5.14285 47.4713 5.14285 46.9388V45.7044C5.14285 45.1718 5.57458 44.7401 6.10714 44.7401H23.6211L25.4797 27.5194H6.10714C5.57458 27.5194 5.14285 27.0877 5.14285 26.5552V25.3208C5.14285 24.7882 5.57458 24.3565 6.10714 24.3565H25.8211L28.2458 1.89022C28.303 1.36073 28.7785 0.97783 29.308 1.03498L30.5352 1.16743C31.0647 1.22458 31.4476 1.70014 31.3905 2.22962L29.0024 24.3565H46.0429L48.4677 1.89022C48.5248 1.36073 49.0004 0.97783 49.5299 1.03498L50.7571 1.16743ZM28.661 27.5194L26.8024 44.7401H43.843L45.7016 27.5194H28.661Z"}))}},63908:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 9.01703C19.0025 3.74266 11.4674 3.736 6.67302 8.56049C1.77566 13.4886 1.77566 21.4735 6.67302 26.4016L22.5814 42.4098C22.9568 42.7876 23.4674 43 24 43C24.5326 43 25.0432 42.7876 25.4186 42.4098L41.327 26.4016C46.2243 21.4735 46.2243 13.4886 41.327 8.56049C36.5326 3.736 28.9975 3.74266 24 9.01703ZM21.4938 12.2118C17.9849 8.07195 12.7825 8.08727 9.51028 11.3801C6.16324 14.7481 6.16324 20.214 9.51028 23.582L24 38.1627L38.4897 23.582C41.8368 20.214 41.8368 14.7481 38.4897 11.3801C35.2175 8.08727 30.0151 8.07195 26.5062 12.2118L26.455 12.2722L25.4186 13.3151C25.0432 13.6929 24.5326 13.9053 24 13.9053C23.4674 13.9053 22.9568 13.6929 22.5814 13.3151L21.545 12.2722L21.4938 12.2118Z"}))}},71108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 8.5C6.067 8.5 4.5 10.067 4.5 12V36C4.5 37.933 6.067 39.5 8 39.5H39C40.933 39.5 42.5 37.933 42.5 36V12C42.5 10.067 40.933 8.5 39 8.5H8ZM7.5 12C7.5 11.7239 7.72386 11.5 8 11.5H39C39.2761 11.5 39.5 11.7239 39.5 12V26L31.9 20.3C31.346 19.8845 30.5796 19.9023 30.0454 20.3429L10.4611 36.5H8C7.72386 36.5 7.5 36.2761 7.5 36V12ZM31.0442 23.4081L39.5 29.75V36C39.5 36.2761 39.2761 36.5 39 36.5H15.1753L31.0442 23.4081ZM17 22C18.6569 22 20 20.6569 20 19C20 17.3431 18.6569 16 17 16C15.3431 16 14 17.3431 14 19C14 20.6569 15.3431 22 17 22Z"}))}},26573:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6ZM2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24C46 36.1503 36.1503 46 24 46C11.8497 46 2 36.1503 2 24ZM27 16C27 17.6569 25.6569 19 24 19C22.3431 19 21 17.6569 21 16C21 14.3431 22.3431 13 24 13C25.6569 13 27 14.3431 27 16ZM23 22C22.4477 22 22 22.4477 22 23V34C22 34.5523 22.4477 35 23 35H25C25.5523 35 26 34.5523 26 34V23C26 22.4477 25.5523 22 25 22H23Z"}))}},63261:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{filter:"url(#LikeRedShadowColor_filter0_d)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 4.5C21 4.5 24 8.5 24 8.5C24 8.5 27 4.5 33 4.5C40 4.5 45 9.99998 45 17C45 25 38.4622 32.1314 32.5 37.5C28.8191 40.8144 26 43 24 43C22 43 19.101 40.7978 15.5 37.5C9.63898 32.1325 3 25 3 17C3 9.99998 8 4.5 15 4.5Z",fill:"#FE2C55"})),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.80371 24.3995C7.17815 29.3932 11.5185 33.8538 15.4999 37.4999C19.1009 40.7978 21.9999 42.9999 23.9999 42.9999C25.9999 42.9999 28.819 40.8144 32.4999 37.4999C38.4621 32.1314 44.9999 24.9999 44.9999 16.9999C44.9999 16.8252 44.9968 16.6513 44.9906 16.4785C41.1344 27.3238 27.3575 37 23.5001 37C20.6255 37 11.2219 31.6262 4.80371 24.3995Z",fill:"black",fillOpacity:"0.03"}),n.createElement("defs",null,n.createElement("filter",{id:"LikeRedShadowColor_filter0_d",x:"0.6",y:"3.3",width:"46.8",height:"43.3",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",{dy:"1.2"}),n.createElement("feGaussianBlur",{stdDeviation:"1.2"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))}},49285:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5857 9.58571C27.6805 5.49096 34.3194 5.49096 38.4141 9.58571C42.5089 13.6805 42.5089 20.3194 38.4141 24.4141L37.1212 25.707C36.7307 26.0975 36.0975 26.0975 35.707 25.707L34.2928 24.2928C33.9023 23.9023 33.9023 23.2691 34.2928 22.8786L35.5857 21.5857C38.1184 19.0531 38.1184 14.9468 35.5857 12.4141C33.053 9.88149 28.9468 9.88148 26.4141 12.4141L22.4141 16.4141C20.121 18.7072 19.9041 22.2903 21.7634 24.8275C22.0899 25.2729 22.0976 25.9023 21.707 26.2928L20.2928 27.707C19.9023 28.0975 19.2646 28.1001 18.9126 27.6745C15.5048 23.5554 15.7292 17.4422 19.5857 13.5857L23.5857 9.58571ZM27.707 20.2928C28.0976 19.9023 28.7352 19.8997 29.0873 20.3253C32.495 24.4444 32.2706 30.5576 28.4141 34.4141L24.4141 38.4141C20.3194 42.5089 13.6805 42.5089 9.58571 38.4141C5.49096 34.3193 5.49096 27.6804 9.58573 23.5857L10.8786 22.2928C11.2691 21.9023 11.9023 21.9023 12.2928 22.2928L13.707 23.707C14.0976 24.0975 14.0975 24.7307 13.707 25.1212L12.4141 26.4141C9.88148 28.9468 9.88148 33.053 12.4141 35.5857C14.9468 38.1183 19.053 38.1183 21.5857 35.5857L25.5857 31.5857C27.8788 29.2926 28.0957 25.7095 26.2364 23.1724C25.9099 22.7269 25.9023 22.0975 26.2928 21.707L27.707 20.2928Z"}))}},2836:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"#FE2C55"}),n.createElement("path",{d:"M11.3028 15.2151C10.4934 16.0245 9.30444 16.016 8.6442 15.3557C7.98397 14.6955 7.97544 13.5065 8.78485 12.6971C9.06049 12.4215 9.06049 11.9745 8.78485 11.6989C8.5092 11.4232 8.06229 11.4232 7.78665 11.6989C6.49952 12.9861 6.36369 15.0716 7.646 16.354C8.92832 17.6363 11.0138 17.5005 12.301 16.2133L13.3248 15.1895C14.4068 14.1075 14.6713 12.4803 13.9787 11.2183C13.7911 10.8765 13.3621 10.7515 13.0203 10.9391C12.6786 11.1267 12.5536 11.5557 12.7412 11.8975C13.1094 12.5685 12.9986 13.5192 12.3266 14.1913L11.3028 15.2151ZM12.6972 8.7849C13.5066 7.97548 14.6956 7.984 15.3558 8.64425C16.016 9.30451 16.0246 10.4935 15.2152 11.3029C14.9395 11.5785 14.9395 12.0255 15.2152 12.3011C15.4908 12.5768 15.9377 12.5768 16.2134 12.3011C17.5005 11.0139 17.6363 8.92838 16.354 7.64603C15.0717 6.36368 12.9862 6.49951 11.699 7.78668L10.6752 8.8105C9.59325 9.89253 9.3287 11.5197 10.0213 12.7817C10.2089 13.1235 10.6379 13.2485 10.9797 13.0609C11.3214 12.8733 11.4464 12.4442 11.2588 12.1025C10.8906 11.4315 11.0014 10.4808 11.6734 9.80873L12.6972 8.7849ZM13.0336 12.6277C13.0186 12.3531 12.9459 12.0887 12.8178 11.8554C12.7737 11.7749 12.7493 11.6889 12.743 11.6029C12.7493 11.6889 12.7736 11.7749 12.8178 11.8554C12.9459 12.0888 13.0186 12.3531 13.0336 12.6277ZM13.2629 15.1276L12.2391 16.1514C10.9813 17.4093 8.95136 17.5356 7.70785 16.2921C7.11888 15.7031 6.83721 14.9377 6.8375 14.1615C6.8372 14.9377 7.11887 15.7031 7.70785 16.2921C8.95136 17.5357 10.9813 17.4093 12.2391 16.1515L13.2629 15.1277C13.8201 14.5704 14.1544 13.8662 14.2473 13.1452C14.1544 13.8661 13.8201 14.5704 13.2629 15.1276ZM8.90341 12.2276C8.89633 12.3759 8.8362 12.522 8.723 12.6352C8.28443 13.0738 8.07511 13.623 8.07481 14.147C8.07512 13.623 8.28444 13.0739 8.723 12.6353C8.83621 12.5221 8.89635 12.3759 8.90341 12.2276ZM12.6354 8.72306C13.4748 7.88361 14.7193 7.88401 15.4176 8.58241C15.6813 8.84604 15.8454 9.18748 15.9025 9.55557C15.8454 9.18746 15.6813 8.846 15.4176 8.58236C14.7193 7.88396 13.4748 7.88356 12.6354 8.72301L11.6116 9.74684C11.1715 10.1869 10.9613 10.7444 10.9635 11.2737C10.9613 10.7445 11.1715 10.187 11.6116 9.74689L12.6354 8.72306ZM11.2573 12.4817C11.244 12.6856 11.13 12.8786 10.9376 12.9842C10.6382 13.1485 10.2623 13.039 10.098 12.7396C9.88489 12.3514 9.76492 11.927 9.73407 11.4947C9.76493 11.9269 9.8849 12.3513 10.098 12.7396C10.2623 13.039 10.6382 13.1485 10.9376 12.9842C11.13 12.8786 11.244 12.6856 11.2573 12.4817ZM15.1103 11.9351C15.1348 12.0466 15.1903 12.1526 15.277 12.2393C15.5185 12.4808 15.91 12.4808 16.1515 12.2393C16.7 11.6908 17.0333 10.9955 17.1317 10.2827C17.0333 10.9955 16.6999 11.6908 16.1515 12.2392C15.91 12.4807 15.5185 12.4807 15.277 12.2392C15.1903 12.1526 15.1348 12.0466 15.1103 11.9351Z",fill:"white"}))}},11933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("circle",{cx:"24",cy:"24",r:"24",fill:"#0A66C2"}),n.createElement("path",{d:"M25.2775 21.8588C25.5235 21.4456 25.8234 21.067 26.1692 20.7329C26.6685 20.2507 27.2585 19.8724 27.9051 19.6199C28.5518 19.3675 29.2421 19.246 29.936 19.2625C31.0487 19.2625 32.1351 19.3862 33.1478 19.8886C34.6419 20.6251 35.3363 21.9324 35.6888 23.4765C35.9239 24.6175 36.0298 25.7813 36.0044 26.946C36.0044 29.7685 36.0044 32.5909 36.0044 35.416C36.0044 35.6633 35.9387 35.7317 35.6914 35.729C34.242 35.729 32.7979 35.7159 31.3433 35.729C31.0803 35.729 31.0119 35.6659 31.0145 35.4029C31.025 32.7251 31.025 30.0482 31.0145 27.3722C31.0217 26.806 30.9679 26.2407 30.854 25.686C30.5252 24.1867 29.5835 23.5002 28.0553 23.6527C26.527 23.8053 25.6879 24.6891 25.4827 26.3384C25.4319 26.7652 25.4073 27.1948 25.409 27.6247C25.409 30.2183 25.409 32.8093 25.409 35.4029C25.409 35.6659 25.3354 35.7317 25.0776 35.729C23.6177 35.7159 22.1578 35.729 20.6979 35.729C20.4586 35.729 20.4033 35.6607 20.4033 35.4292C20.4033 30.2735 20.4033 25.1196 20.4033 19.9675C20.4033 19.7044 20.4849 19.6571 20.7242 19.6571C22.1105 19.6571 23.4967 19.6702 24.883 19.6571C25.146 19.6571 25.1986 19.7386 25.1933 19.978C25.1802 20.5935 25.1933 21.209 25.1933 21.8193L25.2775 21.8588Z",fill:"#FDFEFE"}),n.createElement("path",{d:"M17.2574 27.6825C17.2574 30.2525 17.2574 32.825 17.2574 35.395C17.2574 35.658 17.2022 35.7316 16.9312 35.729C15.474 35.7159 14.0141 35.729 12.5542 35.729C12.3254 35.729 12.2517 35.6817 12.2517 35.437C12.2517 30.2744 12.2517 25.1108 12.2517 19.9464C12.2517 19.736 12.2938 19.6544 12.5148 19.6571C13.9948 19.6676 15.4749 19.6676 16.9549 19.6571C17.218 19.6571 17.2443 19.7491 17.2443 19.9675C17.2548 22.54 17.2574 25.1126 17.2574 27.6825Z",fill:"#FDFDFE"}),n.createElement("path",{d:"M11.8755 14.5541C11.8755 13.9811 12.0456 13.4211 12.3642 12.9449C12.6829 12.4688 13.1357 12.0979 13.6654 11.8794C14.195 11.6608 14.7776 11.6045 15.3393 11.7174C15.901 11.8303 16.4165 12.1075 16.8206 12.5137C17.2246 12.92 17.4989 13.437 17.6088 13.9993C17.7186 14.5616 17.659 15.1439 17.4376 15.6723C17.2162 16.2008 16.8429 16.6516 16.365 16.9676C15.8871 17.2836 15.3261 17.4507 14.7532 17.4476C13.9896 17.44 13.2597 17.1322 12.7212 16.5907C12.1827 16.0493 11.8789 15.3177 11.8755 14.5541Z",fill:"#FDFDFE"}))}},59601:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 8.5C20.9624 8.5 18.5 10.9624 18.5 14V18.5H29.5V14C29.5 10.9624 27.0376 8.5 24 8.5ZM32.5 18.5V14C32.5 9.30558 28.6944 5.5 24 5.5C19.3056 5.5 15.5 9.30558 15.5 14V18.5H11C9.61929 18.5 8.5 19.6193 8.5 21V40C8.5 41.3807 9.61929 42.5 11 42.5H37C38.3807 42.5 39.5 41.3807 39.5 40V21C39.5 19.6193 38.3807 18.5 37 18.5H32.5ZM11.5 21.5V39.5H36.5V21.5H11.5Z"}))}},59493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 3C17.9249 3 13 7.92487 13 14V21H8C6.89543 21 6 21.8954 6 23V41C6 42.1046 6.89543 43 8 43H40C41.1046 43 42 42.1046 42 41V23C42 21.8954 41.1046 21 40 21H35V14C35 7.92487 30.0751 3 24 3ZM31 21V14C31 10.134 27.866 7 24 7C20.134 7 17 10.134 17 14V21H31Z"}))}},86829:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"#FE2C55"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7913 7.1875C18.6796 6.99413 18.4733 6.875 18.25 6.875H5.75001C5.50258 6.875 5.27845 7.02097 5.17839 7.24727C5.07834 7.47356 5.1212 7.73758 5.28771 7.9206L8.55021 11.5065C8.72305 11.6965 8.9945 11.7614 9.23456 11.6702L13.7656 9.94799C13.8184 9.92795 13.8423 9.93624 13.8527 9.94039C13.871 9.94765 13.8971 9.96649 13.9177 10.0013C13.9382 10.0361 13.9421 10.0681 13.9396 10.0876C13.9382 10.0987 13.9339 10.1237 13.8909 10.1602L10.1707 13.3155C9.97902 13.4782 9.90339 13.7398 9.97878 13.9796L11.4038 18.5124C11.4781 18.749 11.6853 18.9192 11.9317 18.9463C12.1781 18.9734 12.4173 18.8522 12.5413 18.6375L18.7913 7.81251C18.9029 7.61913 18.9029 7.38088 18.7913 7.1875Z",fill:"white"}))}},12192:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 72 72",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M69.07 1.39049C69.4326 1.6902 69.6425 2.13608 69.6425 2.60649V55.4412C69.6618 55.5966 69.6718 55.755 69.6718 55.9158V58.8542C69.6718 62.9423 66.3577 66.2564 62.2696 66.2564H53.9206C50.0147 66.2564 46.8484 63.09 46.8484 59.1841C46.8484 55.2782 50.0147 52.1119 53.9206 52.1119H65.8679C66.0788 52.1119 66.2856 52.129 66.4872 52.162V4.51509L24.8515 12.4916V60.1579C24.8707 60.3128 24.8806 60.4706 24.8806 60.6307V63.5691C24.8806 67.6572 21.5665 70.9713 17.4784 70.9713H9.12941C5.22351 70.9713 2.05716 67.805 2.05716 63.8991C2.05716 59.9932 5.22352 56.8268 9.12942 56.8268H21.0767C21.2877 56.8268 21.4946 56.844 21.6962 56.877V11.1875C21.6962 10.4306 22.2337 9.78043 22.977 9.63802L67.768 1.05702C68.23 0.968504 68.7074 1.09078 69.07 1.39049ZM21.6962 60.438C21.6141 60.1739 21.3678 59.9821 21.0767 59.9821H9.12942C6.96615 59.9821 5.21248 61.7358 5.21248 63.8991C5.21248 66.0623 6.96615 67.816 9.12941 67.816H17.4784C19.6699 67.816 21.4737 66.1561 21.7011 64.0249C21.6979 63.9835 21.6962 63.9417 21.6962 63.8994V60.438ZM66.4872 58.996V55.7224C66.4049 55.4586 66.1588 55.2672 65.8679 55.2672H53.9206C51.7573 55.2672 50.0037 57.0208 50.0037 59.1841C50.0037 61.3474 51.7573 63.1011 53.9206 63.1011H62.2696C64.4949 63.1011 66.3205 61.3895 66.5017 59.211C66.4921 59.1407 66.4872 59.0689 66.4872 58.996Z"}))}},52661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.41 17L18.9739 7.47047C18.9895 7.20626 19.2083 7 19.473 7H20.4682C20.7558 7 20.9841 7.24206 20.9673 7.52919L20.4135 17H28.41L28.9739 7.47047C28.9895 7.20626 29.2083 7 29.473 7H30.4682C30.7558 7 30.9841 7.24206 30.9673 7.52919L30.4135 17H38.5C38.7761 17 39 17.2239 39 17.5V18.5C39 18.7761 38.7761 19 38.5 19H30.2958L29.7664 28H37.5C37.7761 28 38 28.2239 38 28.5V29.5C38 29.7761 37.7761 30 37.5 30H29.6488L29.0276 40.5596C29.0114 40.8353 28.7748 41.0456 28.4991 41.0294L27.5009 40.9706C27.2252 40.9544 27.0149 40.7178 27.0311 40.4422L27.6453 30H19.6488L19.0276 40.5596C19.0114 40.8353 18.7748 41.0456 18.4991 41.0294L17.5009 40.9706C17.2252 40.9544 17.0149 40.7178 17.0311 40.4422L17.6453 30H9.5C9.22386 30 9 29.7761 9 29.5V28.5C9 28.2239 9.22386 28 9.5 28H17.763L18.2924 19H10.5C10.2239 19 10 18.7761 10 18.5V17.5C10 17.2239 10.2239 17 10.5 17H18.41ZM20.2958 19L19.7664 28H27.763L28.2924 19H20.2958Z"}))}},67002:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 20 20",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#PCShare_clip0)"},n.createElement("g",{opacity:"1",filter:"url(#PCShare_filter0_d)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9376 3.17495C10.9376 2.58272 11.6469 2.27873 12.0758 2.68715L18.6021 8.90241C19.1764 9.44937 19.1564 10.3717 18.5588 10.8931L12.0541 16.5689C11.6184 16.9491 10.9376 16.6397 10.9376 16.0614V13.4894C10.9376 13.4894 3.95344 12.2312 1.7131 16.3434C1.50423 16.7268 0.690072 16.8609 0.855563 14.948C1.54761 11.4273 2.96196 5.93084 10.9376 5.93084V3.17495Z"})),n.createElement("path",{opacity:"0.03",fillRule:"evenodd",clipRule:"evenodd",d:"M15.7538 6.21161L17.0486 8.80136C17.2777 9.25947 17.1677 9.81453 16.7812 10.1506L10.9824 15.193C10.9824 15.193 10.7017 16.5964 11.5437 16.5964C12.3857 16.5964 19.1218 10.4217 19.1218 10.4217C19.1218 10.4217 19.4025 9.57964 18.5605 8.73763C17.7185 7.89563 15.7538 6.21161 15.7538 6.21161Z"}),n.createElement("path",{opacity:"0.09",fillRule:"evenodd",clipRule:"evenodd",d:"M10.9374 6.22983V13.5272C10.9374 13.5272 4.25359 12.5854 2.16026 15.7726C0.146021 18.8394 0.331011 12.3091 3.36331 9.05711C6.39561 5.8051 10.9374 6.22983 10.9374 6.22983Z",fill:"url(#PCShare_paint0_radial)"})),n.createElement("defs",null,n.createElement("filter",{id:"PCShare_filter0_d",x:"-0.166473",y:"2.5",width:"20.1867",height:"16.2363",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",{dy:"1"}),n.createElement("feGaussianBlur",{stdDeviation:"0.5"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),n.createElement("radialGradient",{id:"PCShare_paint0_radial",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(11.1827 18.2553) rotate(-113.046) scale(8.93256 8.78076)"},n.createElement("stop",null),n.createElement("stop",{offset:"0.995496",stopOpacity:"0.01"}),n.createElement("stop",{offset:"1",stopOpacity:"0.01"})),n.createElement("clipPath",{id:"PCShare_clip0"},n.createElement("rect",{width:"20",height:"20",fill:"white"}))))}},24270:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 32 32",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.09751 6.63192C4.27438 6.24712 4.66288 6 5.09093 6H26.9091C27.298 6 27.6574 6.20436 27.8526 6.53639C28.0478 6.86842 28.0492 7.27791 27.8563 7.61122L16.9472 26.4574C16.7322 26.8288 16.3148 27.0394 15.8839 26.9939C15.453 26.9483 15.0902 26.6553 14.9597 26.2474L11.7558 16.2317L4.26993 7.78608C3.98806 7.46807 3.92063 7.01672 4.09751 6.63192ZM14.0238 16.1691L16.2896 23.2521L25.0293 8.15384H7.49503L12.941 14.298L19.3274 10.4183C19.5839 10.2624 19.9199 10.3414 20.0778 10.5947L20.6495 11.5118C20.8074 11.7651 20.7274 12.0968 20.4708 12.2526L14.0238 16.1691Z"}))}},28049:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8 6C8 5.44771 8.44772 5 9 5H17C17.5523 5 18 5.44772 18 6V42C18 42.5523 17.5523 43 17 43H9C8.44772 43 8 42.5523 8 42V6Z"}),n.createElement("path",{d:"M30 6C30 5.44771 30.4477 5 31 5H39C39.5523 5 40 5.44772 40 6V42C40 42.5523 39.5523 43 39 43H31C30.4477 43 30 42.5523 30 42V6Z"}))}},83044:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.5858 5.08579C27.3479 4.32371 28.5767 4.30253 29.3646 5.03789L36.8646 12.0379C37.2612 12.408 37.4904 12.9232 37.4997 13.4655C37.5091 14.0078 37.2977 14.5307 36.9142 14.9142L16.9142 34.9142C16.5391 35.2893 16.0304 35.5 15.5 35.5H8.5C7.39543 35.5 6.5 34.6046 6.5 33.5V26C6.5 25.4696 6.71071 24.9609 7.08579 24.5858L26.5858 5.08579ZM28.0479 9.2805L10.5 26.8284V31.5H14.6716L32.622 13.5496L28.0479 9.2805Z"}),n.createElement("path",{d:"M7 41C7 40.4477 7.44772 40 8 40H41C41.5523 40 42 40.4477 42 41V43C42 43.5523 41.5523 44 41 44H8C7.44772 44 7 43.5523 7 43V41Z"}))}},20628:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.9999 7C15.6862 7 12.9999 9.68629 12.9999 13C12.9999 16.3137 15.6862 19 18.9999 19C22.3136 19 24.9999 16.3137 24.9999 13C24.9999 9.68629 22.3136 7 18.9999 7ZM8.9999 13C8.9999 7.47715 13.4771 3 18.9999 3C24.5228 3 28.9999 7.47715 28.9999 13C28.9999 18.5228 24.5228 23 18.9999 23C13.4771 23 8.9999 18.5228 8.9999 13ZM13.9159 30.738C10.0883 32.2352 6.70127 35.5144 5.19411 40.9681C5.047 41.5004 4.51432 41.8408 3.97551 41.7195L2.0243 41.2805C1.48549 41.1592 1.14514 40.6222 1.28805 40.0887C3.09315 33.3505 7.37401 29.0018 12.4589 27.0129C17.4031 25.0789 23.0153 25.4139 27.6381 27.7937C28.1292 28.0465 28.287 28.662 28.0069 29.1381L26.9929 30.8619C26.7129 31.338 26.1013 31.4934 25.6062 31.2486C22.0356 29.4832 17.7123 29.2531 13.9159 30.738ZM39.832 28.4453C40.2915 28.1389 40.9124 28.2631 41.2187 28.7227L44.664 33.8906C45.0731 34.5043 45.1113 35.2934 44.7633 35.9437C44.4152 36.594 43.7375 37 42.9999 37H27.9999C27.4476 37 26.9999 36.5523 26.9999 36V34C26.9999 33.4477 27.4476 33 27.9999 33H39.2629L37.8905 30.9415C37.5842 30.4819 37.7083 29.8611 38.1679 29.5547L39.832 28.4453ZM27.2366 40.0563C27.5846 39.406 28.2623 39 28.9999 39H43.9999C44.5522 39 44.9999 39.4477 44.9999 40V42C44.9999 42.5523 44.5522 43 43.9999 43H32.7369L34.1093 45.0585C34.4157 45.5181 34.2915 46.1389 33.832 46.4453L32.1679 47.5547C31.7083 47.8611 31.0875 47.7369 30.7811 47.2774L27.3358 42.1094C26.9267 41.4957 26.8885 40.7066 27.2366 40.0563Z"}))}},35685:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0001 13C13.0001 9.68629 15.6864 7 19.0001 7C22.3139 7 25.0001 9.68629 25.0001 13C25.0001 16.3137 22.3139 19 19.0001 19C15.6864 19 13.0001 16.3137 13.0001 13ZM19.0001 3C13.4773 3 9.00015 7.47715 9.00015 13C9.00015 18.5228 13.4773 23 19.0001 23C24.523 23 29.0001 18.5228 29.0001 13C29.0001 7.47715 24.523 3 19.0001 3ZM5.19435 40.9681C6.70152 35.5144 10.0886 32.2352 13.9162 30.738C17.7125 29.2531 22.0358 29.4832 25.6064 31.2486C26.1015 31.4934 26.7131 31.338 26.9931 30.8619L28.0072 29.1381C28.2872 28.662 28.1294 28.0465 27.6384 27.7937C23.0156 25.4139 17.4034 25.0789 12.4591 27.0129C7.37426 29.0018 3.09339 33.3505 1.2883 40.0887C1.14539 40.6222 1.48573 41.1592 2.02454 41.2805L3.97575 41.7195C4.51457 41.8408 5.04724 41.5004 5.19435 40.9681ZM44.7074 30.1212C45.0979 29.7307 45.0979 29.0975 44.7074 28.707L43.2932 27.2928C42.9026 26.9023 42.2695 26.9023 41.8789 27.2928L30.0003 39.1715L25.1216 34.2928C24.7311 33.9023 24.0979 33.9023 23.7074 34.2928L22.2932 35.707C21.9026 36.0975 21.9026 36.7307 22.2932 37.1212L28.586 43.4141C29.3671 44.1952 30.6334 44.1952 31.4145 43.4141L44.7074 30.1212Z"}))}},43644:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 72 72",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 10H67C67.5523 10 68 10.4477 68 11V38.6587L58.5286 28.5108C57.1645 27.0493 54.8555 27.0253 53.4614 28.4582L38.0517 44.2959L32.4507 38.8026C31.0896 37.4677 28.9104 37.4677 27.5493 38.8026L4.24641 61.6574C4.09296 61.4816 4 61.2517 4 61V11C4 10.4477 4.44771 10 5 10ZM56.103 62L40.1936 46.3965L55.6115 30.5502C55.8107 30.3456 56.1406 30.349 56.3354 30.5578L68 43.0555V61C68 61.5523 67.5523 62 67 62H56.103ZM67 65H55.0193H55H54.8774H5.12266H5L4.98071 65C2.78045 64.9896 1 63.2027 1 61V11C1 8.79086 2.79086 7 5 7H67C69.2091 7 71 8.79086 71 11V41.873L71.0966 41.9765L71 42.0667V61C71 63.2091 69.2091 65 67 65ZM30.3501 40.9444L51.8186 62H8.18149L29.6499 40.9444C29.8444 40.7537 30.1557 40.7537 30.3501 40.9444ZM19.5 30C21.9853 30 24 27.9853 24 25.5C24 23.0147 21.9853 21 19.5 21C17.0147 21 15 23.0147 15 25.5C15 27.9853 17.0147 30 19.5 30Z"}))}},28213:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M24.0173 3C12.4102 3 3 12.3947 3 23.9827C3 32.8766 8.53541 40.4753 16.3542 43.5321C16.1639 41.8742 16.0082 39.3183 16.4234 37.5049C16.8039 35.8643 18.8797 27.074 18.8797 27.074C18.8797 27.074 18.257 25.8133 18.257 23.9655C18.257 21.0469 19.9522 18.8709 22.0626 18.8709C23.8616 18.8709 24.7265 20.2179 24.7265 21.824C24.7265 23.6201 23.5848 26.3141 22.9794 28.8183C22.4777 30.9079 24.0345 32.6176 26.093 32.6176C29.8294 32.6176 32.7009 28.6801 32.7009 23.0156C32.7009 17.9901 29.0856 14.4844 23.9135 14.4844C17.9283 14.4844 14.4168 18.9572 14.4168 23.5855C14.4168 25.3816 15.1087 27.3158 15.9736 28.3692C16.1466 28.5765 16.1639 28.7664 16.112 28.9737C15.9563 29.6299 15.5931 31.0633 15.5239 31.3569C15.4374 31.7368 15.2125 31.8232 14.8146 31.6332C12.1853 30.4071 10.542 26.5905 10.542 23.4992C10.542 16.8849 15.3509 10.8059 24.4324 10.8059C31.7149 10.8059 37.3887 15.9868 37.3887 22.9293C37.3887 30.1653 32.822 35.9852 26.4909 35.9852C24.3632 35.9852 22.3566 34.8799 21.682 33.5674C21.682 33.5674 20.6268 37.574 20.3673 38.5584C19.9003 40.389 18.6202 42.6686 17.7553 44.0674C19.7273 44.6719 21.8031 45 23.9827 45C35.5897 45 44.9999 35.6053 44.9999 24.0173C45.0345 12.3947 35.6243 3 24.0173 3Z",fill:"#E60019"}))}},56980:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 10.554V37.4459L38.1463 24L16 10.554ZM12 8.77702C12 6.43812 14.5577 4.99881 16.5569 6.21266L41.6301 21.4356C43.5542 22.6038 43.5542 25.3962 41.6301 26.5644L16.5569 41.7873C14.5577 43.0012 12 41.5619 12 39.223V8.77702Z"}))}},92324:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.77702C12 6.43812 14.5577 4.99881 16.5569 6.21266L41.6301 21.4356C43.5542 22.6038 43.5542 25.3962 41.6301 26.5644L16.5569 41.7873C14.5577 43.0012 12 41.5619 12 39.223V8.77702Z"}))}},2538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.125 2.5C2.9514 2.5 2 3.45139 2 4.625V21.5C2 21.9045 2.24364 22.2691 2.61732 22.4239C2.99099 22.5787 3.42111 22.4931 3.70711 22.2071L7.35171 18.5625H19.875C21.0486 18.5625 22 17.6111 22 16.4375V4.625C22 3.45141 21.0486 2.5 19.875 2.5H4.125Z",fill:"#FE2C55"}),n.createElement("path",{d:"M10.9658 8.84675C11.2397 8.28818 11.6356 8.03174 12.058 8.03174C12.618 8.03174 13.0719 8.48569 13.0719 9.04566C13.0719 9.18801 12.9609 9.47812 12.5922 9.78372C12.3734 9.96507 12.1352 10.0902 11.9219 10.1603C11.7251 10.2249 11.5545 10.3953 11.5545 10.6024V11.8524C11.5545 12.0595 11.7231 12.2295 11.9285 12.2028C12.6448 12.1098 13.3386 11.7627 13.8685 11.3235C14.4804 10.8163 15.0719 10.0156 15.0719 9.04566C15.0719 7.38112 13.7226 6.03174 12.058 6.03174C10.5004 6.03174 9.53101 7.10786 9.06051 8.21109C8.97926 8.40159 9.08687 8.6147 9.28335 8.68019L10.4692 9.07547C10.6657 9.14097 10.8746 9.03271 10.9658 8.84675Z",fill:"white"}),n.createElement("path",{d:"M12.1245 15.2822C12.7458 15.2822 13.2495 14.7785 13.2495 14.1572C13.2495 13.5359 12.7458 13.0322 12.1245 13.0322C11.5032 13.0322 10.9995 13.5359 10.9995 14.1572C10.9995 14.7785 11.5032 15.2822 12.1245 15.2822Z",fill:"white"}))}},60757:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 56 56",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M28.136 18.741C27.086 18.741 26.106 19.4202 25.4659 20.9074C25.3385 21.2034 25.011 21.3705 24.7054 21.2686L21.385 20.1618C21.0794 20.06 20.9127 19.729 21.031 19.4293C22.0833 16.7637 24.3746 14.0744 28.136 14.0744C32.0199 14.0744 35.1684 17.2229 35.1684 21.1068C35.1684 23.37 33.7882 25.2384 32.3604 26.4219C31.0527 27.5058 29.3169 28.3493 27.5438 28.5051C27.2228 28.5333 26.9612 28.2698 26.9612 27.9476V24.4476C26.9612 24.1254 27.2249 23.8635 27.538 23.7878C28.1002 23.6517 28.7735 23.3336 29.3824 22.829C30.2427 22.1159 30.5018 21.439 30.5018 21.1068C30.5018 19.8002 29.4426 18.741 28.136 18.741Z"}),n.createElement("path",{d:"M30.3333 32.741C30.3333 34.0297 29.2886 35.0744 28 35.0744C26.7113 35.0744 25.6666 34.0297 25.6666 32.741C25.6666 31.4524 26.7113 30.4077 28 30.4077C29.2886 30.4077 30.3333 31.4524 30.3333 32.741Z"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.62496 5.8335C6.88655 5.8335 4.66663 8.05341 4.66663 10.7918V50.1668C4.66663 51.1106 5.23512 51.9614 6.10703 52.3226C6.97894 52.6837 7.98255 52.4841 8.64987 51.8167L17.154 43.3127H46.375C49.1134 43.3127 51.3333 41.0927 51.3333 38.3543V10.7918C51.3333 8.05344 49.1134 5.8335 46.375 5.8335H9.62496ZM14.5375 39.3294L9.33329 44.5337V10.7918C9.33329 10.6307 9.46388 10.5002 9.62496 10.5002H46.375C46.536 10.5002 46.6666 10.6307 46.6666 10.7918V38.3543C46.6666 38.5154 46.536 38.646 46.375 38.646H16.1875C15.5686 38.646 14.9751 38.8918 14.5375 39.3294Z"}))}},96510:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 73 72",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#QuestionLarge_clip0)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.625 3C4.5184 3 2 5.5184 2 8.625V70.5C2 71.1067 2.36546 71.6536 2.92597 71.8858C3.48649 72.118 4.13166 71.9897 4.56066 71.5607L18.5588 57.5625H65.375C68.4817 57.5625 71 55.0441 71 51.9375V8.625C71 5.51841 68.4817 3 65.375 3H7.625ZM16.8768 55.0018L5 66.8787V8.625C5 7.17525 6.17525 6 7.625 6H65.375C66.8248 6 68 7.17524 68 8.625V51.9375C68 53.3873 66.8248 54.5625 65.375 54.5625H17.9375C17.5397 54.5625 17.1582 54.7205 16.8768 55.0018ZM37.1664 18.8333C34.0038 18.8333 31.7171 21.1943 30.5897 24.5767L27.7436 23.628C29.0776 19.626 32.1724 15.8333 37.1664 15.8333C42.0731 15.8333 46.0508 19.811 46.0508 24.7177C46.0508 27.3775 44.4024 29.7604 42.4221 31.4018C40.4271 33.0554 37.7923 34.2174 35.3203 34.2174V31.2174C36.9266 31.2174 38.907 30.4188 40.5077 29.0921C42.1231 27.7531 43.0508 26.1362 43.0508 24.7177C43.0508 21.4679 40.4163 18.8333 37.1664 18.8333ZM38.9444 41.7777C38.9444 43.1278 37.85 44.2222 36.5 44.2222C35.1499 44.2222 34.0555 43.1278 34.0555 41.7777C34.0555 40.4277 35.1499 39.3333 36.5 39.3333C37.85 39.3333 38.9444 40.4277 38.9444 41.7777Z",fillOpacity:"0.34"})),n.createElement("defs",null,n.createElement("clipPath",{id:"QuestionLarge_clip0"},n.createElement("rect",{width:"72",height:"72",fill:"white",transform:"translate(0.5)"}))))}},37469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{filter:"url(#RedPlusCircleColor_filter0_d)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 25C20.6274 25 26 19.6274 26 13C26 6.37258 20.6274 1 14 1C7.37258 1 2 6.37258 2 13C2 19.6274 7.37258 25 14 25Z",fill:"#FE2C55"})),n.createElement("path",{d:"M9.5 14C9.22386 14 9 13.7761 9 13.5V12.5C9 12.2239 9.22386 12 9.5 12H18.5C18.7761 12 19 12.2239 19 12.5V13.5C19 13.7761 18.7761 14 18.5 14H9.5Z",fill:"white"}),n.createElement("path",{d:"M13 8.5C13 8.22386 13.2239 8 13.5 8H14.5C14.7761 8 15 8.22386 15 8.5V17.5C15 17.7761 14.7761 18 14.5 18H13.5C13.2239 18 13 17.7761 13 17.5V8.5Z",fill:"white"}),n.createElement("defs",null,n.createElement("filter",{id:"RedPlusCircleColor_filter0_d",x:"0",y:"0",width:"28",height:"28",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",{dy:"1"}),n.createElement("feGaussianBlur",{stdDeviation:"1"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))}},73722:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M12 24C5.3736 24 0 18.6264 0 12C0 5.3736 5.3736 0 12 0C18.6264 0 24 5.3736 24 12C24 18.6264 18.6264 24 12 24Z",fill:"#FF4500"}),n.createElement("path",{d:"M14.5765 14.4872C13.9304 14.4872 13.4036 13.9552 13.4036 13.3027C13.4036 12.6502 13.9304 12.1182 14.5765 12.1182C15.2226 12.1182 15.7494 12.6502 15.7494 13.3027C15.7494 13.9552 15.2226 14.4872 14.5765 14.4872ZM14.7837 16.431C13.9822 17.2381 12.4491 17.3018 11.9989 17.3018C11.5486 17.3018 10.0133 17.2381 9.21409 16.431C9.09478 16.3105 9.09478 16.1173 9.21409 15.9968C9.33341 15.8763 9.52476 15.8763 9.64408 15.9968C10.1484 16.5061 11.2267 16.6879 11.9989 16.6879C12.7688 16.6879 13.8494 16.5061 14.3537 15.9968C14.473 15.8763 14.6643 15.8763 14.7837 15.9968C14.9007 16.1173 14.9007 16.3105 14.7837 16.431ZM8.24381 13.3027C8.24381 12.6502 8.7706 12.1182 9.4167 12.1182C10.0628 12.1182 10.5896 12.6502 10.5896 13.3027C10.5896 13.9552 10.0628 14.4872 9.4167 14.4872C8.7706 14.4872 8.24381 13.9552 8.24381 13.3027ZM19.5 12.1182C19.5 11.202 18.7661 10.4608 17.8588 10.4608C17.4154 10.4608 17.0146 10.6382 16.7197 10.9269C15.5986 10.1085 14.052 9.581 12.3298 9.51962L13.0772 5.96615L15.5198 6.49133C15.5491 7.11881 16.0579 7.61898 16.686 7.61898C17.3343 7.61898 17.8588 7.08926 17.8588 6.43449C17.8588 5.77972 17.3343 5.25 16.686 5.25C16.2244 5.25 15.8305 5.52055 15.6391 5.91159L12.9106 5.32503C12.8341 5.30911 12.7553 5.32275 12.69 5.36595C12.6247 5.40914 12.5797 5.47508 12.5639 5.55237L11.7445 9.45141C11.74 9.47415 11.7445 9.49461 11.7445 9.51735C9.99077 9.56282 8.4149 10.0925 7.27578 10.9224C6.98086 10.6359 6.5824 10.4608 6.14115 10.4608C5.2339 10.4608 4.5 11.2043 4.5 12.1182C4.5 12.7912 4.89847 13.3709 5.47028 13.6301C5.44552 13.7938 5.43201 13.962 5.43201 14.1325C5.43201 16.6834 8.37213 18.75 11.9989 18.75C15.6256 18.75 18.5657 16.6834 18.5657 14.1325C18.5657 13.9643 18.5522 13.7983 18.5275 13.6346C19.097 13.3755 19.5 12.7957 19.5 12.1182Z",fill:"white"}))}},57715:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 72 72",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.8549 23.3698C32.1558 23.7421 32.5944 23.9308 33.0382 23.9308C33.3799 23.9308 33.7216 23.8186 34.0073 23.584L44.5999 14.9006C44.992 14.7196 45.3058 14.3749 45.4323 13.928C45.5702 13.4408 45.454 12.9406 45.1634 12.5692C45.145 12.5441 45.1258 12.5196 45.1058 12.4957L36.0372 1.58075C35.5017 0.932996 34.5326 0.841188 33.8848 1.38183C33.2371 1.91738 33.1453 2.88646 33.6859 3.53421L40.007 11.1434C33.6606 10.3212 27.2427 11.5509 21.5521 14.7339C14.5492 18.651 9.49471 25.0572 7.31683 32.7792C5.13384 40.4962 6.09272 48.6058 10.0099 55.6036C13.927 62.6014 20.3382 67.661 28.0552 69.8389C30.7737 70.604 33.5126 70.9712 36.2057 70.9712C49.3087 70.9712 61.3814 62.3158 65.1251 49.1057C65.9513 46.178 66.3339 43.1586 66.2523 40.1442C66.2268 39.3129 65.5484 38.6549 64.7221 38.6549H64.6813C63.8347 38.6804 63.1716 39.3792 63.192 40.2258C63.2634 42.9342 62.9217 45.6425 62.177 48.2743C58.1324 62.5861 43.2034 70.9406 28.8916 66.9011C21.9551 64.9425 16.2018 60.4031 12.6825 54.1143C9.16318 47.8306 8.30121 40.5472 10.2598 33.6157C12.2183 26.6791 16.7577 20.9258 23.0465 17.4065C28.4154 14.3996 34.5141 13.3326 40.4996 14.3072L32.0691 21.2174C31.4162 21.7529 31.3193 22.7169 31.8549 23.3698Z"}))}},8562:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 7C8 4.23858 10.2386 2 13 2H35C37.7614 2 40 4.23858 40 7V41C40 43.7614 37.7614 46 35 46H13C10.2386 46 8 43.7614 8 41V7ZM13 6C12.4477 6 12 6.44772 12 7V41C12 41.5523 12.4477 42 13 42H35C35.5523 42 36 41.5523 36 41V7C36 6.44772 35.5523 6 35 6H13ZM18 10C18 9.44772 18.4477 9 19 9H29C29.5523 9 30 9.44772 30 10V12C30 12.5523 29.5523 13 29 13H19C18.4477 13 18 12.5523 18 12V10ZM24 39C25.6569 39 27 37.6569 27 36C27 34.3431 25.6569 33 24 33C22.3431 33 21 34.3431 21 36C21 37.6569 22.3431 39 24 39Z"}))}},91454:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 24 24",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M12.5546 8.35111L13.3171 8.16468V7.37972V3.50006L21.4998 12.0001L13.3171 20.5001V16.3738V15.3664L12.3098 15.3738C8.838 15.3994 5.4275 17.0466 2.49983 19.5882C2.54612 19.2536 2.67769 18.641 2.94391 17.8329C3.3786 16.5132 4.01326 15.1988 4.88691 13.971C6.71045 11.4083 9.24414 9.16046 12.5546 8.35111Z",stroke:"#161823",strokeWidth:"2"}))}},82405:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.4588 3.90871C25.3403 2.86068 23.4902 3.64074 23.4902 5.16041V13.0502C20.4499 14.1752 11.3194 18.1407 6.6047 26.6176C-1.49677 42.1311 3.82522 43.478 5.77105 39.7411C13.2467 29.1857 20.8146 30.4298 23.4902 31.3209V38.2274C23.4902 39.7114 25.2658 40.5055 26.4023 39.5298L43.3681 24.9655C44.9268 23.6274 44.9791 21.2608 43.4811 19.8573L26.4588 3.90871Z"}))}},87905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3359 8.37236C22.3296 7.04325 25 8.47242 25 10.8685V37.1315C25 39.5276 22.3296 40.9567 20.3359 39.6276L10.3944 33H6C4.34314 33 3 31.6568 3 30V18C3 16.3431 4.34315 15 6 15H10.3944L20.3359 8.37236ZM21 12.737L12.1094 18.6641C11.7809 18.8831 11.3948 19 11 19H7V29H11C11.3948 29 11.7809 29.1169 12.1094 29.3359L21 35.263V12.737ZM32.9998 24C32.9998 21.5583 32.0293 19.3445 30.4479 17.7211C30.0625 17.3255 29.9964 16.6989 30.3472 16.2724L31.6177 14.7277C31.9685 14.3011 32.6017 14.2371 33.0001 14.6195C35.4628 16.9832 36.9998 20.3128 36.9998 24C36.9998 27.6872 35.4628 31.0168 33.0001 33.3805C32.6017 33.7629 31.9685 33.6989 31.6177 33.2724L30.3472 31.7277C29.9964 31.3011 30.0625 30.6745 30.4479 30.2789C32.0293 28.6556 32.9998 26.4418 32.9998 24ZM37.0144 11.05C36.6563 11.4705 36.7094 12.0995 37.1069 12.4829C40.1263 15.3951 42.0002 19.4778 42.0002 23.9999C42.0002 28.522 40.1263 32.6047 37.1069 35.5169C36.7094 35.9003 36.6563 36.5293 37.0144 36.9498L38.3109 38.4727C38.6689 38.8932 39.302 38.9456 39.7041 38.5671C43.5774 34.9219 46.0002 29.7429 46.0002 23.9999C46.0002 18.2569 43.5774 13.078 39.7041 9.43271C39.302 9.05421 38.6689 9.10664 38.3109 9.52716L37.0144 11.05Z"}))}},88236:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("circle",{cx:"24",cy:"24",r:"24"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 16.9118C21 15.2513 20.8942 15.0909 20.709 15.0221C20.5238 14.9763 20.3122 14.9992 20.1799 15.1138L15.0741 19.5258H11.4762C11.2116 19.5258 11 19.7092 11 19.9384V28.084C11 28.3132 11.2116 28.4965 11.4762 28.4965H15.0741L20.1799 32.8862C20.3122 33.0008 20.5238 33.0237 20.709 32.9779C20.8942 32.9091 21 32.7487 21 32.5882V16.9118Z",fill:"white"}),n.createElement("path",{d:"M30.6653 15C32.7348 17.2304 34.0001 20.2174 34.0001 23.5C34.0001 26.7826 32.7348 29.7696 30.6653 32",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),n.createElement("path",{d:"M26.8799 17.8833C28.1994 19.381 28.9999 21.347 28.9999 23.5C28.9999 25.653 28.1994 27.6191 26.8799 29.1168",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}))}},68892:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("circle",{cx:"24",cy:"24",r:"24",fill:"000",fillOpacity:"1"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 16.9118C21 15.2513 20.8942 15.0909 20.709 15.0221C20.5238 14.9763 20.3122 14.9992 20.1799 15.1138L15.0741 19.5258H11.4762C11.2116 19.5258 11 19.7092 11 19.9384V28.084C11 28.3132 11.2116 28.4965 11.4762 28.4965H15.0741L20.1799 32.8862C20.3122 33.0008 20.5238 33.0237 20.709 32.9779C20.8942 32.9091 21 32.7487 21 32.5882V16.9118Z",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.098 18.9489C34.5998 18.4508 33.7921 18.4508 33.2939 18.949L30.1368 22.1061L26.9797 18.949C26.4815 18.4508 25.6738 18.4508 25.1756 18.9489C24.6775 19.4471 24.6775 20.2548 25.1756 20.753L28.3327 23.9101L25.1757 27.0672C24.6775 27.5654 24.6775 28.3731 25.1757 28.8713C25.6738 29.3694 26.4815 29.3694 26.9797 28.8713L30.1368 25.7142L33.2939 28.8713C33.7921 29.3694 34.5998 29.3694 35.0979 28.8713C35.5961 28.3731 35.5961 27.5654 35.0979 27.0672L31.9409 23.9101L35.098 20.753C35.5962 20.2548 35.5962 19.4471 35.098 18.9489Z",fill:"white"}))}},50542:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 10.8685C25 8.47242 22.3296 7.04325 20.3359 8.37236L10.3944 15H6C4.34315 15 3 16.3431 3 18V30C3 31.6568 4.34314 33 6 33H10.3944L20.3359 39.6276C22.3296 40.9567 25 39.5276 25 37.1315V10.8685ZM29.2929 18.1213L35.1716 24L29.2929 29.8787C28.9024 30.2692 28.9024 30.9024 29.2929 31.2929L30.7071 32.7071C31.0976 33.0976 31.7308 33.0976 32.1213 32.7071L38 26.8284L43.8787 32.7071C44.2692 33.0976 44.9024 33.0976 45.2929 32.7071L46.7071 31.2929C47.0976 30.9024 47.0976 30.2692 46.7071 29.8787L40.8284 24L46.7071 18.1213C47.0976 17.7308 47.0976 17.0976 46.7071 16.7071L45.2929 15.2929C44.9024 14.9024 44.2692 14.9024 43.8787 15.2929L38 21.1716L32.1213 15.2929C31.7308 14.9024 31.0976 14.9024 30.7071 15.2929L29.2929 16.7071C28.9024 17.0976 28.9024 17.7308 29.2929 18.1213Z"}))}},94692:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z",fill:"#37AEE2"}),n.createElement("path",{d:"M15.0708 25.1038L18.2549 33.5766C18.2549 33.5766 18.6529 34.3681 19.0782 34.3681C19.5035 34.3681 25.8443 28.0272 25.8443 28.0272L32.8947 14.9343L15.1822 22.9151L15.0708 25.1038Z",fill:"#C8DAEA"}),n.createElement("path",{d:"M19.2945 27.2772L18.6827 33.5219C18.6827 33.5219 18.428 35.4351 20.4158 33.5219C22.4035 31.6087 24.3117 30.1328 24.3117 30.1328",fill:"#A9C6D8"}),n.createElement("path",{d:"M15.1297 25.4063L8.5796 23.3553C8.5796 23.3553 7.79723 23.0492 8.04968 22.3583C8.10199 22.2161 8.20661 22.0937 8.51819 21.8838C9.96922 20.9108 35.378 12.1319 35.378 12.1319C35.378 12.1319 36.0967 11.9001 36.5198 12.0532C36.7131 12.1232 36.8382 12.2041 36.9405 12.4949C36.9792 12.5998 36.9996 12.8272 36.9974 13.0502C36.9951 13.212 36.9746 13.3607 36.9587 13.5969C36.8041 15.9977 32.1735 33.914 32.1735 33.914C32.1735 33.914 31.896 34.9614 30.9044 34.9985C30.5428 35.0116 30.1039 34.9417 29.5785 34.5066C27.6294 32.8951 20.8974 28.5439 19.41 27.5884C19.3258 27.5337 19.3031 27.4638 19.2872 27.396C19.2667 27.2954 19.3804 27.1708 19.3804 27.1708C19.3804 27.1708 31.1046 17.1522 31.4162 16.1004C31.4412 16.0195 31.3502 15.978 31.2274 16.013C30.4496 16.2885 16.9491 24.4836 15.4595 25.3888C15.373 25.4412 15.1297 25.4063 15.1297 25.4063Z",fill:"white"}))}},31256:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 7.50006V9.50006H28.5V7.50006H19.5ZM32.5 9.50006V6.00006C32.5 4.61935 31.3807 3.50006 30 3.50006H18C16.6193 3.50006 15.5 4.61935 15.5 6.00006V9.50006H7C6.44772 9.50006 6 9.94778 6 10.5001V12.5001C6 13.0523 6.44772 13.5001 7 13.5001H9.5V39.5001C9.5 41.7092 11.2909 43.5001 13.5 43.5001H34.5C36.7091 43.5001 38.5 41.7092 38.5 39.5001V13.5001H41C41.5523 13.5001 42 13.0523 42 12.5001V10.5001C42 9.94778 41.5523 9.50006 41 9.50006H32.5ZM34.5 13.5001H13.5V39.5001H34.5V13.5001ZM18.5 34.0001C17.9477 34.0001 17.5 33.5523 17.5 33.0001V20.0001C17.5 19.4478 17.9477 19.0001 18.5 19.0001H20.5C21.0523 19.0001 21.5 19.4478 21.5 20.0001V33.0001C21.5 33.5523 21.0523 34.0001 20.5 34.0001H18.5ZM27.5 34.0001C26.9477 34.0001 26.5 33.5523 26.5 33.0001V20.0001C26.5 19.4478 26.9477 19.0001 27.5 19.0001H29.5C30.0523 19.0001 30.5 19.4478 30.5 20.0001V33.0001C30.5 33.5523 30.0523 34.0001 29.5 34.0001H27.5Z"}))}},13585:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0002 47.001C36.7028 47.001 47.0002 36.7035 47.0002 24.001C47.0002 11.2984 36.7028 1.00098 24.0002 1.00098C11.2977 1.00098 1.00024 11.2984 1.00024 24.001C1.00024 36.7035 11.2977 47.001 24.0002 47.001Z",fill:"#1DA1F2"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.2029 13.5327C37.3894 14.0824 35.5215 14.8813 34.6003 14.8813V14.8829C33.5484 13.7237 32.0675 13 30.4252 13C27.2353 13 24.6488 15.7287 24.6488 19.0925C24.6488 19.5598 24.7001 20.0157 24.795 20.4529H24.794C20.4671 20.3331 15.7348 18.0452 12.886 14.1294C11.1344 17.3277 12.6501 20.8848 14.6378 22.1809C13.9574 22.235 12.7049 22.0982 12.1153 21.4913C12.0758 23.6142 13.0434 26.4269 16.5714 27.4473C15.8919 27.8329 14.6892 27.7223 14.1662 27.6402C14.3497 29.4322 16.7285 31.775 19.3297 31.775C18.4026 32.9063 14.9144 34.9582 11 34.3054C13.6584 36.0118 16.7568 37 20.0362 37C29.3556 37 36.5929 29.0322 36.2034 19.2027C36.2019 19.1919 36.2019 19.1811 36.2009 19.1693C36.2019 19.144 36.2034 19.1187 36.2034 19.0925C36.2034 19.0619 36.2009 19.0331 36.2 19.0035C37.0484 18.3914 38.1868 17.3087 39 15.8836C38.5284 16.1577 37.1134 16.7064 35.7968 16.8426C36.6418 16.3615 37.8937 14.7858 38.2029 13.5327Z",fill:"white"}))}},96515:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5 9C13.0453 9 10.2347 11.8104 10.2347 15.2895C10.2347 18.7686 13.0453 21.5789 16.5 21.5789C19.9548 21.5789 22.7654 18.7686 22.7654 15.2895C22.7654 11.8104 19.9548 9 16.5 9ZM6.23468 15.2895C6.23468 9.61226 10.8251 5 16.5 5C22.1749 5 26.7654 9.61226 26.7654 15.2895C26.7654 20.9667 22.1749 25.5789 16.5 25.5789C10.8251 25.5789 6.23468 20.9667 6.23468 15.2895ZM35.5 16C33.4258 16 31.6837 17.7217 31.6837 19.9211C31.6837 22.1204 33.4258 23.8421 35.5 23.8421C37.5742 23.8421 39.3164 22.1204 39.3164 19.9211C39.3164 17.7217 37.5742 16 35.5 16ZM27.6837 19.9211C27.6837 15.5802 31.1497 12 35.5 12C39.8504 12 43.3164 15.5802 43.3164 19.9211C43.3164 24.2619 39.8504 27.8421 35.5 27.8421C31.1497 27.8421 27.6837 24.2619 27.6837 19.9211ZM16.5 32.9474C11.1565 32.9474 6.63553 36.522 5.20008 41.4261C5.04493 41.9561 4.52145 42.3079 3.98014 42.1984L2.01989 41.8016C1.47858 41.6921 1.12554 41.1628 1.26924 40.6295C3.08188 33.903 9.20882 28.9474 16.5 28.9474C23.7912 28.9474 29.9182 33.903 31.7308 40.6295C31.8745 41.1628 31.5215 41.6921 30.9801 41.8016L29.0199 42.1984C28.4786 42.3079 27.9551 41.9561 27.8 41.4261C26.3645 36.522 21.8436 32.9474 16.5 32.9474ZM34.5 35.1053C33.4444 35.1053 32.5679 35.2479 31.8346 35.4841C31.3089 35.6534 30.7069 35.4655 30.4554 34.9738L29.5446 33.1932C29.2931 32.7016 29.4865 32.0943 30.0008 31.893C31.3208 31.3762 32.8181 31.1053 34.5 31.1053C38.1911 31.1053 40.9031 32.4146 42.7838 34.5371C44.3511 36.3059 45.2273 38.5107 45.7455 40.6327C45.8765 41.1692 45.5223 41.6964 44.9807 41.8044L43.0193 42.1955C42.4777 42.3036 41.9545 41.951 41.8182 41.4158C41.3885 39.7287 40.7439 38.2663 39.79 37.1899C38.7278 35.9911 37.1389 35.1053 34.5 35.1053Z"}))}},57661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3149 23.1174C22.2013 23.1174 25.3517 19.9571 25.3517 16.0587C25.3517 12.1603 22.2013 9 18.3149 9C14.4286 9 11.2781 12.1603 11.2781 16.0587C11.2781 19.9571 14.4286 23.1174 18.3149 23.1174ZM30.6289 37.2347C30.6289 30.4125 25.1155 24.882 18.3145 24.882C11.5134 24.882 6 30.4125 6 37.2347V37.2353C6 38.2099 6.78762 39 7.75921 39C7.77558 39 7.7919 38.9998 7.80817 38.9993H28.8205C28.8367 38.9998 28.853 39 28.8694 39C29.841 39 30.6286 38.2099 30.6286 37.2353V37.2347H30.6289ZM32.9979 37.2347C32.9979 34.2847 32.1257 31.5298 30.6216 29.2211C30.9879 28.7879 31.685 28.5483 32.8836 28.5483C37.9184 28.5483 42 32.6426 42 37.6931L41.9998 37.6931V37.6936C41.9998 38.4151 41.4167 39 40.6974 39C40.68 39 40.6627 38.9997 40.6454 38.999H32.9979V37.2347ZM38.0933 22.0166C38.0933 24.9026 35.761 27.2422 32.8839 27.2422C30.0068 27.2422 27.6745 24.9026 27.6745 22.0166C27.6745 19.1306 30.0068 16.791 32.8839 16.791C35.761 16.791 38.0933 19.1306 38.0933 22.0166Z"}))}},21742:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 48 48",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1086 20.3412C23.1028 19.2196 24.8972 19.2196 25.8914 20.3412L42.8955 39.5236C44.2806 41.0861 43.1324 43.5 41.004 43.5L6.99596 43.5C4.86764 43.5 3.71945 41.0861 5.10454 39.5235L22.1086 20.3412Z"}),n.createElement("path",{d:"M4.5 7.5C4.5 5.84315 5.84315 4.5 7.5 4.5L40.5 4.5C42.1569 4.5 43.5 5.84315 43.5 7.5C43.5 9.15685 42.1569 10.5 40.5 10.5L7.5 10.5C5.84315 10.5 4.5 9.15685 4.5 7.5Z"}))}},113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=e.fill,s=void 0===o?"currentColor":o,u=e.style,l=e.className;return n.createElement("svg",{className:l,style:u,width:r,height:a,viewBox:"0 0 72 72",fill:s,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.59922 63.1209H51.2069C55.3809 63.1209 58.7776 59.7242 58.7826 55.5503V45.1431L68.4428 53.8141C68.887 54.2128 69.5279 54.3188 70.073 54.0715C70.6181 53.8292 70.9714 53.2841 70.9714 52.6886V18.661C70.9714 18.0654 70.6181 17.5203 70.073 17.278C69.5229 17.0358 68.887 17.1367 68.4428 17.5354L58.7826 26.2064V15.7992C58.7826 11.6253 55.3859 8.22858 51.212 8.22858H8.59922C4.42526 8.22858 1.02855 11.6253 1.02855 15.7992V55.5503C1.02855 59.7242 4.42526 63.1209 8.59922 63.1209ZM4.05681 15.7995C4.05681 13.2961 6.09585 11.2571 8.59921 11.2571H51.212C53.7153 11.2571 55.7544 13.2961 55.7544 15.7995V29.6033C55.7544 30.1989 56.1077 30.744 56.6528 30.9862C57.2029 31.2285 57.8388 31.1276 58.283 30.7288L67.9431 22.0579V49.2972L58.283 40.6262C57.8388 40.2275 57.1978 40.1266 56.6528 40.3688C56.1077 40.6111 55.7544 41.1562 55.7544 41.7517V55.5505C55.7544 58.0539 53.7153 60.0929 51.212 60.0929H8.59921C6.09585 60.0929 4.05681 58.0539 4.05681 55.5505V15.7995Z"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.217 47.3887C21.4491 47.525 21.7116 47.5906 21.974 47.5906C22.2365 47.5906 22.4989 47.52 22.7311 47.3837L40.7442 36.9866C41.2136 36.7141 41.5013 36.2144 41.5013 35.6744C41.5013 35.1344 41.2136 34.6347 40.7442 34.3621L22.7311 23.9601C22.2617 23.6875 21.6864 23.6875 21.217 23.9601C20.7476 24.2326 20.4599 24.7323 20.4599 25.2723V46.0765C20.4599 46.6165 20.7476 47.1162 21.217 47.3887ZM36.9589 35.6744L23.4882 43.452V27.8968L36.9589 35.6744Z"}))}},51817:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32735);function i(e){var t=e.width,r=void 0===t?"1em":t,i=e.height,a=void 0===i?"1em":i,o=(e.fill,e.style),s=e.className;return n.createElement("svg",{className:s,style:o,width:r,height:a,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 47C36.7025 47 47 36.7025 47 24C47 11.2975 36.7025 1 24 1C11.2975 1 1 11.2975 1 24C1 36.7025 11.2975 47 24 47Z",fill:"#25D366"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.9028 25.6129C30.5802 25.4515 28.9944 24.6713 28.6988 24.5635C28.4031 24.4559 28.1881 24.4021 27.9731 24.7249C27.758 25.0478 27.1399 25.7744 26.9517 25.9897C26.7636 26.2049 26.5754 26.2319 26.2529 26.0704C25.9303 25.909 24.891 25.5684 23.659 24.4694C22.7002 23.6141 22.0528 22.5579 21.8647 22.235C21.6765 21.9121 21.8446 21.7375 22.0061 21.5767C22.1512 21.4321 22.3287 21.2 22.4899 21.0116C22.6512 20.8233 22.705 20.6887 22.8125 20.4735C22.92 20.2582 22.8663 20.0699 22.7855 19.9085C22.7049 19.747 22.0599 18.1593 21.7911 17.5134C21.5293 16.8845 21.2634 16.9697 21.0654 16.9598C20.8774 16.9504 20.6622 16.9484 20.4472 16.9484C20.2322 16.9484 19.8827 17.0291 19.587 17.352C19.2914 17.6749 18.4581 18.4553 18.4581 20.0428C18.4581 21.6306 19.6139 23.1643 19.7752 23.3795C19.9365 23.5949 22.0496 26.8528 25.2853 28.2499C26.0548 28.5823 26.6557 28.7807 27.1241 28.9293C27.8968 29.1749 28.5999 29.1402 29.1557 29.0572C29.7754 28.9646 31.064 28.277 31.3328 27.5235C31.6016 26.7699 31.6016 26.1242 31.521 25.9897C31.4404 25.8551 31.2253 25.7744 30.9028 25.6129ZM25.0178 33.6472H25.0134C23.0881 33.6465 21.1998 33.1292 19.5524 32.1517L19.1606 31.9191L15.0998 32.9844L16.1837 29.0251L15.9286 28.6191C14.8546 26.9109 14.2873 24.9365 14.2881 22.9091C14.2905 16.9934 19.1037 12.1805 25.022 12.1805C27.8879 12.1815 30.5817 13.299 32.6076 15.3271C34.6333 17.3551 35.7482 20.0509 35.7471 22.9178C35.7447 28.8339 30.9315 33.6472 25.0178 33.6472ZM34.1489 13.7858C31.7117 11.3458 28.4706 10.0014 25.0173 10C17.902 10 12.111 15.7906 12.1082 22.908C12.1073 25.1832 12.7017 27.4039 13.8313 29.3617L12 36.0509L18.8432 34.2559C20.7287 35.2843 22.8516 35.8264 25.0121 35.827H25.0174H25.0174C32.132 35.827 37.9234 30.0359 37.9263 22.9184C37.9276 19.4691 36.5861 16.2258 34.1489 13.7858Z",fill:"white"}))}},47323:(e,t,r)=>{var n;window,e.exports=(n=r(25427),function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(2)),o=f(r(3)),s=f(r(4)),u=f(r(5)),l=f(r(6)),c=f(r(7)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(8));function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=a.default.Util||a.default.util,m=function(e,t,r){c.default.url(e,t).then((function(e){var t=[],n=e.Data||e;n&&n.PlayInfoList&&n.PlayInfoList.length>0?(t=n.PlayInfoList,r({videoList:t,rawData:e})):(console.error("HAS NO VIDEO INFORMATION CORRECTLY, PLEASE CHRECK THE TOKEN."),r({videoList:[],rawData:e}))}))},y=function(e){function t(e){h(this,t);var r=e.autoplay;e.autoplay&&(e.autoplay=!1),e.expireDetectType=[].concat(e.expireDetectType||[]),e.videoInit=!1;var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._autoplay=r,n._curDefinitionIndex=0,n._errReqCount=0,n.hlsOpts=e.hlsOpts||{};var i=n,a=function(e){function t(e){h(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=r.load.bind(r);return r.load=function(e,t,r){var a=r.onError;r.onError=function(e,t,r){403===e.code&&(i._errReqCount++,i._errReqCount>2&&i.emitExpireEvent()),a(e,t,r)},n(e,t,r)},r}return v(t,e),t}(o.default.DefaultConfig.loader);return n.hlsOpts.fLoader=a,n.versionNum>=3?n.hlsjs=n.hlsAlias={}:n.hls=n.hlsAlias={},n.hlsNext(0,"startPlay",e),n.config.checkHlsOffline&&s.default.on(n,"timeupdate",(function(){n.hlsAlias&&n.video&&!n.video.videoHeight?(n.hlsAlias.hlsOfflineCount=void 0===n.hlsAlias.hlsOfflineCount?1:n.hlsAlias.hlsOfflineCount+1,n.hlsAlias.hlsOfflineCount>3&&(n.pause(),n.emit("error",{msg:"OFFLINE",errorCode:-9997}),n.onError())):n.hlsAlias&&(n.hlsAlias.hlsOfflineCount=0)}),"destroy"),n.hlsTimer=new l.default,n.hlsTimer.repeat((function(){e.expireDetectType.indexOf("getUrlTime")>-1&&n.getUrlTime&&n.duration&&(new Date).getTime()/1e3>n.getUrlTime+3300+n.duration&&(n.getUrlTime=0,n.emitExpireEvent()),e.expireDetectType.indexOf("xhrStatus")>-1&&n.hlsAlias&&n.hlsAlias.manifestUrl&&Math.random()<1/7.5&&new u.default({url:n.hlsAlias.manifestUrl,type:""}).catch((function(e){e&&void 0!==e.status&&(n.hlsAlias.hlsExpireCount=void 0===n.hlsAlias.hlsExpireCount?1:n.hlsAlias.hlsExpireCount+1,n.hlsAlias.hlsExpireCount>3&&(n.hlsAlias.hlsExpireCount=0,n.emitExpireEvent()))})),e.expireDetectType.indexOf("urlExpire")>-1&&n.urlExpireTimestamp&&(new Date).getTime()/1e3>=n.urlExpireTimestamp&&(n.urlExpireTimestamp=d.MAX_TIMESTAMP,n.emitExpireEvent())}),e.checkExpireInterval||400),s.default.on(n,"destroy",(function(){n.hlsTimer&&(n.hlsTimer.clear(),n.hlsTimer=null)}),"destroy"),n}return v(t,e),i(t,[{key:"emitExpireEvent",value:function(){var e=(new Date).getTime()/1e3;this.emitExpireTimestamp?e-this.emitExpireTimestamp>d.MIN_EXPIRE_INTERVAL&&(this.emitExpireTimestamp=e,this.emit("MEDIA_EXPIRED")):(this.emitExpireTimestamp=e,this.emit("MEDIA_EXPIRED"))}},{key:"hlsNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,r=arguments[2],n=this,i=n.config||{};if(n._errReqCount=0,r)for(var a in r)i[a]=r[a];if(i&&i.startTime&&s.default.once(n,"canplay",(function(){n.currentTime=i.startTime})),n.url=r.url,!r.url||!/\.(mp3|m4a)/.test(r.url)&&!/(mp3|m4a)/.test(r.type))return r.url?(i.autoplay?(i.autoplay=!1,n._autoplay=!0):n._autoplay=!1,n.init(),void n.emit("can_start")):void((r.playAuthToken||r.vid)&&(i.autoplay?(i.autoplay=!1,this._autoplay=!0):n._autoplay=!1,m(r.playAuthToken,r.playDomain,(function(a){var o=a.videoList,u=a.rawData;if(n.emit("get_play_info",u),o&&o.length>0&&(o[0].MainPlayUrl||o[0].src)){if(o.sort((function(e,t){return t.Bitrate-e.Bitrate})),o[0].Bitrate){var l=0;o.every((function(e,t){return o[0].Bitrate===e.Bitrate&&(l=t,!0)})),l>0&&o.splice(l)}n.emit("resourceReady",o.sort((function(e,t){return t.Bitrate-e.Bitrate})).map((function(e){return e.MainPlayUrl=r.testUrl||e.MainPlayUrl,{name:e.Definition||"标清",url:e.MainPlayUrl||e.src}}))),o[0].UrlExpire&&(n.urlExpireTimestamp=r.testUrlExpire||o[0].UrlExpire),n.getUrlTime=(new Date).getTime()/1e3,e&&s.default.once(n,"playing",(function(){n.currentTime=e}));var c=o[0].MainPlayUrl||o[0].src;n.url=i.url=c;for(var d=0;d<o.length;d++)o[d].Definition.toLocaleLowerCase()===i.defaultDefinition&&(n._curDefinitionIndex=d,c=o[d].MainPlayUrl||o[d].src,n.url=i.url=c);var f=o[0].Format;if(o[0]&&o[0].type&&/(mp3|m4a|mp4)/.test(o[0].type))return void n.emit("can_start");if(f&&"m3u8"!=f&&"hls"!=f)return void n.emit("can_start");t.init(),n.emit("can_start")}else{var h=u||{ResponseMetadata:{Error:{CodeN:0,Message:""},RequestId:""}};n.emit("playInterfaceInfo",{code:h.ResponseMetadata.Error.CodeN,message:h.ResponseMetadata.Error.Message,logid:h.ResponseMetadata.RequestId}),n.emit("error",{msg:"HAS NO VIDEO INFORMATION CORRECTLY, PLEASE CHRECK THE TOKEN.",errorCode:-9998})}}))));n.emit("can_start")}},{key:"switchURL",value:function(e){var t=this,r=t.config||{};t.url=e,r.url=e;var i=t.currentTime;g.addClass(t.root,"xgplayer-is-enter"),s.default.once(t,"playing",(function(){g.removeClass(t.root,"xgplayer-is-enter")})),s.default.once(t,"canplay",(function(){t.currentTime=i,t.play()})),"object"===n(t.hlsAlias)&&(t.hlsAlias.originUrl=e,t.hlsAlias.mobile&&"function"==typeof t._start?t._start():t.src=e)}},{key:"init",value:function(){var e=this,t=g,r=this,n=r.config||{},i=r.start;if(this.browser=s.default.getBrowserVersion(),void 0===n.useHls){var a=!1;if(navigator.userAgent.toLocaleLowerCase().indexOf("ipad")>-1?(navigator.userAgent.toLocaleLowerCase().indexOf("mobile")>-1&&"MacIntel"!==navigator.platform&&"Win32"!==navigator.platform||!s.default.checkMediaSourceSupport())&&(a=!0):navigator.userAgent.toLocaleLowerCase().indexOf("mobile")>-1&&"MacIntel"!==navigator.platform&&"Win32"!==navigator.platform&&!s.default.checkMediaSourceSupport()&&(a=!0),a)return r.hlsAlias={originUrl:r.definitionList?r.definitionList[r._curDefinitionIndex||0].url:n.definitionList?n.definitionList[r._curDefinitionIndex||0].url:n.url||"",mobile:!0},r.versionNum>=3?r.hlsjs=r.hlsAlias:r.hls=r.hlsAlias,r._start=function(){r.loadSource(n.url,(function(e){if(e.length)r.root.querySelector("video")&&(r.video.querySelector("source")||r.video.src)?(r.autoplay=n.autoplay=!0,r.src=e):i.call(r,e);else{var t=new FileReader;t.onload=function(){r.root.querySelector("video")&&(r.video.querySelector("source")||r.video.src)?(r.autoplay=n.autoplay=!0,r.src=t.result):i.call(r,t.result)},t.readAsDataURL(e)}}))},n.autoplay=r._autoplay,r._autoplay&&(r.video.autoplay=!0),void r._start();r._start=r.start,r.start=function(){}}else n.useHls||r.loadSource(n.url,(function(e){if(e.length)r.root.querySelector("video")&&(r.video.querySelector("source")||r.video.src)?(r.autoplay=n.autoplay=!0,r.src=e):i.call(r,e);else{var t=new FileReader;t.onload=function(){var e=t.result;r.root.querySelector("video")&&(r.video.querySelector("source")||r.video.src)?(r.autoplay=n.autoplay=!0,r.src=e):i.call(r,e)},t.readAsDataURL(e)}}));if(r.root.querySelector("video")&&(r.video.querySelector("source")||r.video.src))r.src=n.url;else{var u=void 0;u=new o.default(this.hlsOpts),this.hlsAlias=u,r.versionNum>=3?r.hlsjs=r.hlsAlias:r.hls=r.hlsAlias,this.hlsAlias.originUrl=n.url||"",Object.defineProperty(r,"src",{get:function(){return r.currentSrc},set:function(e){n.url=e,t.removeClass(r.root,"xgplayer-is-live");var i=document.querySelector(".xgplayer-live");i&&i.parentNode.removeChild(i),r.autoplay=!0,r.paused||r.pause(),r.hlsAlias.stopLoad(),r.hlsAlias.originUrl=n.url||"",r.versionNum>=3?r.hlsjs=r.hlsAlias:r.hls=r.hlsAlias,r.register(),s.default.once(r,"canplay",(function(){r.play().catch((function(e){}))})),r.hlsAlias.attachMedia(r.video)},configurable:!0}),this.hasStart=!0,this.register(),s.default.once(this,"complete",(function(){if(e.config.autoplay&&s.default.once(r,"canplay",(function(){r.play().catch((function(e){}))})),u.attachMedia(r.video),n.isLive){g.addClass(r.root,"xgplayer-is-live");var t=g.createDom("xg-live","LIVE",{},"xgplayer-live");r.controls.appendChild(t)}})),this.config.autoplay=this._autoplay,this.root.insertBefore(this.video,this.root.firstChild),this.emit("complete"),s.default.once(this,"destroy",(function(){u.stopLoad()}))}}},{key:"updateM3U8",value:function(e,t,r){var n=this.config||{},i=this.hlsAlias;"TOP"!==n.getKeyType&&(e=window.atob(e));var a=void 0;try{a=new Blob([e],{type:"text/html"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(a=new BlobBuilder).append(e),a=a.getBlob()}var o=URL.createObjectURL(a);t=t.replace(/,URI="([^"]+)"/,',URI="'+o+'"');var u=s.default.isRelativeURL(this.url)?s.default.getAbsoluteURL(this.url):this.url,l=u.match(/((http|https):?\/\/.+)\/\w+\.\w+/)||[],c=u&&l.length>1?l[1]+"/":"";t=t.replace(/(#EXTINF:)(\d+\.?\d*)(?:,(?:[^\r|\n]*)(?:\r|\n)*)(.*(?!#))/g,(function(e,t,r,n){return/(http|https)?\:?\/\//.test(n)?t+r+",\n"+n:t+r+",\n"+c+n}));var d=void 0;try{d=new Blob([t],{type:"application/x-mpegURL"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(d=new BlobBuilder).append(t),d=d.getBlob()}var f=URL.createObjectURL(d);i&&(!0===i.mobile?(n.url=f,r&&r(d)):(i.loadSource(f),r&&r(d)))}},{key:"loadSource",value:function(e,t){var r=this,n=r.config||{},i=this.hlsAlias;i.manifestUrl=e,new u.default({type:"",url:e}).then((function(e){var r=e.responseText;if(r.match(/#EXT-X-KEY:(\w+=\w+)+/)){var a=r.match(/,URI="([^"]+)"/)[1],o=s.default.parseUrl(a);if(o&&o.ak)if("TOP"===n.getKeyType){var u=s.default.isBase64(n.keyToken)?window.atob(n.keyToken):n.keyToken;a="//"+(n.playDomain||"")+"?"+u+"&Source=jarvis&Ak="+o.ak}else a=(n.keyDomain||"")+"/kds/api/v1/keys?source=jarvis&ak="+o.ak+"&token="+(n.keyToken||"");return{keyUrl:a,ctx:r}}i&&(!0===i.mobile||i.loadSource(n.url),t&&t(n.url))})).then((function(e){if(e&&e.keyUrl){var i=e.keyUrl,a=e.ctx,o=function(e){var i=void 0;try{i=JSON.parse(e.responseText),"TOP"===n.getKeyType&&(i.data=i.Result.SecretKey)}catch(t){i={data:s.default.isBase64(e.responseText)?e.responseText:window.btoa(e.responseText)}}r.updateM3U8(i.data,a,t)};if(n.keyToken&&("TOP"===n.getKeyType?n.playDomain:n.keyDomain))if("IE 11"!==r.browser)new u.default({url:i,type:"text"}).then((function(e){o(e)}));else{var l=new XMLHttpRequest;l.open("get",i),l.send(),l.onload=function(){200!==l.status&&206!==l.status||o(l)}}else n.keyValue&&r.updateM3U8(n.keyValue,a,t)}}))}},{key:"register",value:function(){var e=this.hlsAlias,t=g,r=this,n=r.config||{};r.once("playing",(function(){var e=!1,t=r.video.querySelector("track");t&&("hidden"===t.track.mode&&(e=!0),t.track.mode="hidden",r.video.removeChild(t)),n.textTrack&&n.textTrack.length>0&&n.textTrack.some((function(t){if(t.src&&t.label&&t.default){var n=document.createElement("track");return n.src=t.src,n.kind=t.kind,n.label=t.label,n.srclang=t.srclang,n.default=!0,r.video.appendChild(n),e&&(n.track.mode="hidden"),!0}}))})),e.once(o.default.Events.MEDIA_ATTACHED,(function(){r.loadSource(n.url)})),e.on(o.default.Events.LEVEL_LOADED,(function(n,i){if(!e.inited&&(e.inited=!0,i&&i.details&&i.details.live)){t.addClass(r.root,"xgplayer-is-live");var a=t.createDom("xg-live","LIVE",{},"xgplayer-live");r.controls.appendChild(a)}})),e.on(o.default.Events.ERROR,(function(e,t){t.fatal&&r.emit("error",t)}))}},{key:"versionNum",get:function(){return this.version&&this.version[0]&&parseInt(this.version[0])}}]),t}(a.default);y.isSupported=function(e){e=e||navigator.userAgent.toLocaleLowerCase();var t=/(iphone)/.test(e)||/(ipad)/.test(e),r=/(android)/.test(e),n=/(windows phone)/.test(e),i=!(t||r||n),a=/(xiaomi)/.test(e),o=/(quark)/.test(e);return!(a||(i||r?!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'):!t||o||e.indexOf("iphone os 11_4")>-1||e.indexOf("iphone os 11_2")>-1))},y.HlsJs=o.default,t.default=y,e.exports=t.default},function(e,t){e.exports=n},function(e,t,r){var n;"undefined"!=typeof window&&(n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=new Array(a);n<a;n++)o[n]=r[n].fn;return o},l.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,n,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){var n,i,a,o,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,i=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=i.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(d)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e,t,n){var a={};a[n]=[];var o=t.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return a;for(var u,l=s[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(o);)"dll-reference"!==u[3]&&a[n].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(o);)e[u[2]]||(a[n].push(u[1]),e[u[2]]=r(u[1]).m),a[u[2]]=a[u[2]]||[],a[u[2]].push(u[4]);for(var d,f=Object.keys(a),h=0;h<f.length;h++)for(var p=0;p<a[f[h]].length;p++)d=a[f[h]][p],isNaN(1*d)||(a[f[h]][p]=1*a[f[h]][p]);return a}function o(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:r.m},s=t.all?{main:Object.keys(i.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};o(r);)for(var s=Object.keys(r),u=0;u<s.length;u++){var l=s[u],c=r[l].pop();if(i[l]=i[l]||{},!i[l][c]&&e[l][c]){i[l][c]=!0,n[l]=n[l]||[],n[l].push(c);for(var d=a(e,e[l][c],l),f=Object.keys(d),h=0;h<f.length;h++)r[f[h]]=r[f[h]]||[],r[f[h]]=r[f[h]].concat(d[f[h]])}}return n}(i,e),u="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),u=u+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var l=new window.Blob([u],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var m=f[h],y=f[m],_=f[y],w=257*f[g]^16843008*g;n[h]=w<<24|w>>>8,i[h]=w<<16|w>>>16,a[h]=w<<8|w>>>24,o[h]=w,w=16843009*_^65537*y^257*m^16843008*h,u[g]=w<<24|w>>>8,l[g]=w<<16|w>>>16,c[g]=w<<8|w>>>24,d[g]=w,h?(h=m^f[f[f[_^m]]],p^=f[f[p]]):h=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,p=this.invSubMix,v=p[0],g=p[1],m=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=t[a]:(u=s,a%i==0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=h[a/i|0]<<24):i>6&&a%i==4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?u:v[f[u>>>24]]^g[f[u>>>16&255]]^m[f[u>>>8&255]]^y[f[255&u]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,n){for(var i,a,o,s,u,l,c,d,f,h,p,v,g,m,y,_,w,b=this.keySize+6,E=this.invKeySchedule,T=this.invSBox,C=this.invSubMix,S=C[0],k=C[1],O=C[2],R=C[3],A=this.uint8ArrayToUint32Array_(r),x=A[0],L=A[1],D=A[2],P=A[3],M=new Int32Array(e),I=new Int32Array(M.length),U=this.networkToHostOrderSwap;t<M.length;){for(f=U(M[t]),h=U(M[t+1]),p=U(M[t+2]),v=U(M[t+3]),u=f^E[0],l=v^E[1],c=p^E[2],d=h^E[3],g=4,m=1;m<b;m++)i=S[u>>>24]^k[l>>16&255]^O[c>>8&255]^R[255&d]^E[g],a=S[l>>>24]^k[c>>16&255]^O[d>>8&255]^R[255&u]^E[g+1],o=S[c>>>24]^k[d>>16&255]^O[u>>8&255]^R[255&l]^E[g+2],s=S[d>>>24]^k[u>>16&255]^O[l>>8&255]^R[255&c]^E[g+3],u=i,l=a,c=o,d=s,g+=4;i=T[u>>>24]<<24^T[l>>16&255]<<16^T[c>>8&255]<<8^T[255&d]^E[g],a=T[l>>>24]<<24^T[c>>16&255]<<16^T[d>>8&255]<<8^T[255&u]^E[g+1],o=T[c>>>24]<<24^T[d>>16&255]<<16^T[u>>8&255]<<8^T[255&l]^E[g+2],s=T[d>>>24]<<24^T[u>>16&255]<<16^T[l>>8&255]<<8^T[255&c]^E[g+3],g+=3,I[t]=U(i^x),I[t+1]=U(s^L),I[t+2]=U(o^D),I[t+3]=U(a^P),x=f,L=h,D=p,P=v,t+=4}return n?(w=(_=(y=I.buffer).byteLength)&&new DataView(y).getUint8(_-1))?y.slice(0,_-w):y:I.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=r("./src/errors.ts"),s=r("./src/utils/logger.js"),u=r("./src/events.js"),l=r("./src/utils/get-self-scope.js"),c=Object(l.getSelfScope)(),d=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new a),l.expandKey(t),o(l.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i(c,t)),this.fastAesKey.expandKey().then((function(i){new n(c,r).decrypt(e,i).catch((function(n){u.onWebCryptoError(n,e,t,r,o)})).then((function(e){o(e)}))})).catch((function(n){u.onWebCryptoError(n,e,t,r,o)}))}},t.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=d},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.js"),i=r("./src/errors.ts"),a=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number.js"),s=r("./src/utils/logger.js"),u=r("./src/utils/get-self-scope.js");function l(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function d(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return!!(t+1<e.length&&l(e,t))}function h(e,t){if(f(e,t)){var r=c(e,t);if(t+r>=e.length)return!1;var n=d(e,t);if(n<=r)return!1;var i=t+n;if(i===e.length||i+1<e.length&&l(e,i))return!0}return!1}function p(e,t,r,a,o){if(!e.samplerate){var u=function(e,t,r,a){var o,u,l,c,d,f=navigator.userAgent.toLowerCase(),h=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((u=(60&t[r+2])>>>2)>p.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+u+"["+p[u]+"Hz],channelConfig:"+c),/firefox/i.test(f)?u>=6?(o=5,d=new Array(4),l=u-3):(o=2,d=new Array(2),l=u):-1!==f.indexOf("android")?(o=2,d=new Array(2),l=u):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&u>=6?l=u-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(u>=6&&1===c||/vivaldi/i.test(f))||!a&&1===c)&&(o=2,d=new Array(2)),l=u)),d[0]=o<<3,d[0]|=(14&u)>>1,d[1]|=(1&u)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[u],channelCount:c,codec:"mp4a.40."+o,manifestCodec:h};e.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}(t,r,a,o);e.config=u.config,e.samplerate=u.samplerate,e.channelCount=u.channelCount,e.codec=u.codec,e.manifestCodec=u.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+u.samplerate+",nb channel:"+u.channelCount)}}function v(e){return 9216e4/e}function g(e,t,r,n,i){var a=function(e,t,r,n,i){var a,o,s=e.length;if(a=c(e,t),o=d(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:r+n*i}}(t,r,n,i,v(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,u=a.frameLength,l={unit:t.subarray(r+s,r+s+u),pts:o,dts:o};return e.samples.push(l),{sample:l,length:u+s}}}var m=r("./src/demux/id3.js"),y=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(h(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,n){for(var i=this._audioTrack,a=m.default.getID3Data(e,0)||[],u=m.default.getTimeStamp(a),l=Object(o.isFiniteNumber)(u)?90*u:9e4*t,c=0,d=l,h=e.length,v=a.length,y=[{pts:d,dts:d,data:a}];v<h-1;)if(f(e,v)&&v+5<h){p(i,this.observer,e,v,i.manifestCodec);var _=g(i,e,v,l,c);if(!_){s.logger.log("Unable to parse AAC frame");break}v+=_.length,d=_.sample.pts,c++}else m.default.isHeader(e,v)?(a=m.default.getID3Data(e,v),y.push({pts:d,dts:d,data:a}),v+=a.length):v++;this.remuxer.remux(i,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),_=r("./src/demux/mp4demuxer.js"),w={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var o=n+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(r,r+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==i&&15!==i&&3!==a){var s=3===r?3-n:3===n?3:4,u=1e3*w.BitratesMap[14*s+i-1],l=3===r?0:2===r?1:2,c=w.SamplingRateMap[3*l+a],d=e[t+3]>>6==3?1:2,f=w.SamplesCoefficients[r][n],h=w.BytesInSlot[n],p=8*f*h;return{sampleRate:c,channelCount:d,frameLength:parseInt(f*u/c+o,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},b=w,E=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},t.readSPS=function(){var e,t,r,n,i,a,o,s=0,u=0,l=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),v(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=h();if(3===_&&v(1),m(),m(),v(1),p())for(a=3!==_?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}m();var w=h();if(0===w)h();else if(1===w)for(v(1),g(),g(),t=h(),o=0;o<t;o++)g();m(),v(1),r=h(),n=h(),0===(i=f(1))&&v(1),v(1),p()&&(s=h(),u=h(),l=h(),c=h());var b=[1,1];if(p()&&p())switch(d()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*s-2*u),height:(2-i)*(n+1)*16-(i?2:4)*(l+c),pixelRatio:b}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),T=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new a.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,(function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(e,t,r+1,n)}))},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}(),C={video:1,audio:2,id3:3,text:4},S=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new T(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:C[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,r,a,o){var u,l,c,d,f,h=t.length,p=!1;this.pmtUnknownTypes={},this.contiguous=a;var v=this.pmtParsed,g=this._avcTrack,m=this._audioTrack,y=this._id3Track,_=g.pid,w=m.pid,b=y.pid,E=this._pmtId,T=g.pesData,C=m.pesData,S=y.pesData,k=this._parsePAT,O=this._parsePMT.bind(this),R=this._parsePES,A=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),P=e._syncOffset(t);for(h-=(h+P)%188,u=P;u<h;u+=188)if(71===t[u]){if(l=!!(64&t[u+1]),c=((31&t[u+1])<<8)+t[u+2],(48&t[u+3])>>4>1){if((d=u+5+t[u+4])===u+188)continue}else d=u+4;switch(c){case _:l&&(T&&(f=R(T))&&A(f,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,u+188)),T.size+=u+188-d);break;case w:l&&(C&&(f=R(C))&&(m.isAAC?x(f):L(f)),C={data:[],size:0}),C&&(C.data.push(t.subarray(d,u+188)),C.size+=u+188-d);break;case b:l&&(S&&(f=R(S))&&D(f),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,u+188)),S.size+=u+188-d);break;case 0:l&&(d+=t[d]+1),E=this._pmtId=k(t,d);break;case E:l&&(d+=t[d]+1);var M=O(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=M.avc)>0&&(g.pid=_),(w=M.audio)>0&&(m.pid=w,m.isAAC=M.isAAC),(b=M.id3)>0&&(y.pid=b),p&&!v&&(s.logger.log("reparse from beginning"),p=!1,u=P-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(f=R(T))?(A(f,!0),g.pesData=null):g.pesData=T,C&&(f=R(C))?(m.isAAC?x(f):L(f),m.pesData=null):(C&&C.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=C),S&&(f=R(S))?(D(f),y.pesData=null):y.pesData=S,null==this.sampleAes?this.remuxer.remux(m,g,y,this._txtTrack,r,a,o):this.decryptAndRemux(m,g,y,this._txtTrack,r,a,o)},t.decryptAndRemux=function(e,t,r,n,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)}))}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)},t.decryptAndRemuxAvc=function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,i,a,o)}))}else this.remuxer.remux(e,t,r,n,i,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,r){var n=this.pmtUnknownTypes[e]||0;return 0===n&&(this.pmtUnknownTypes[e]=0,t.call(s.logger,r)),this.pmtUnknownTypes[e]++,n},t._parsePMT=function(e,t,r,n){var i,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){this._trackUnknownPmt(e[t],s.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!n){this._trackUnknownPmt(e[t],s.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:r?-1===o.audio&&(o.audio=a,o.isAAC=!1):this._trackUnknownPmt(e[t],s.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],s.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],s.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},t._parsePES=function(e){var t,r,n,i,a,o,u,l,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;if(192&(r=t[7])&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?o-(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(s.logger.warn(Math.round((o-u)/9e4)+"s delta between PTS and DTS, align them"),o=u):u=o),l=(i=t[8])+9,e.size<=l)return null;e.size-=l,a=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){var v=(t=d[h]).byteLength;if(l){if(l>v){l-=v;continue}t=t.subarray(l),v-=l,l=0}a.set(t,c),c+=v}return n&&(n-=i+3),{data:a,pts:o,dts:u,len:n}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;if(isNaN(e.pts)){if(!n)return void t.dropped++;var i=r[n-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,n,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample,l=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,u&&s.length&&!o.audFound&&(c(u,o),u=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,u||(u=a.avcSample=d(!0,e.pts,e.dts,"")),u.frame=!0;var s=t.data;if(l&&s.length>4){var f=new E(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(u.key=!0)}break;case 5:n=!0,u||(u=a.avcSample=d(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0,(r=new E(a.discardEPB(t.data))).readUByte();for(var h=0,p=0,v=!1,g=0;!v&&r.bytesAvailable>1;){h=0;do{h+=g=r.readUByte()}while(255===g);p=0;do{p+=g=r.readUByte()}while(255===g);if(4===h&&0!==r.bytesAvailable){if(v=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var y=r.readUByte(),_=31&y,w=[y,r.readUByte()];for(i=0;i<_;i++)w.push(r.readUByte()),w.push(r.readUByte()),w.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}else if(5===h&&0!==r.bytesAvailable){if(v=!0,p>16){var b=[];for(i=0;i<16;i++)b.push(r.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||b.push("-");var T=p-16,C=new Uint8Array(T);for(i=0;i<T;i++)C[i]=r.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:h,uuid:b.join(""),userDataBytes:C,userData:Object(m.utf8ArrayToStr)(C.buffer)})}}else if(p<r.bytesAvailable)for(i=0;i<p;i++)r.readUByte()}break;case 7:if(n=!0,l=!0,!o.sps){var S=(r=new E(t.data)).readSPS();o.width=S.width,o.height=S.height,o.pixelRatio=S.pixelRatio,o.sps=[t.data],o.duration=a._duration;var k=t.data.subarray(1,4),O="avc1.";for(i=0;i<3;i++){var R=k[i].toString(16);R.length<2&&(R="0"+R),O+=R}o.codec=O}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,u&&c(u,o),u=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&n&&u.units.push(t)})),t&&u&&(c(u,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,i,a=0,o=e.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],d=-1;for(-1===u&&(d=0,i=31&e[0],u=0,a=1);a<o;)if(t=e[a++],u)if(1!==u)if(t)if(1===t){if(d>=0)n={data:e.subarray(d,a-u-1),type:i},c.push(n);else{var f=this._getLastNalUnit();if(f&&(l&&a<=4-l&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-l)),(r=a-u-1)>0)){var h=new Uint8Array(f.data.byteLength+r);h.set(f.data,0),h.set(e.subarray(0,r),f.data.byteLength),f.data=h}}a<o?(d=a,i=31&e[a],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(d>=0&&u>=0&&(n={data:e.subarray(d,o),type:i,state:u},c.push(n)),0===c.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return s.naluState=u,c},t.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=e[o];return r},t._parseAACPES=function(e){var t,r,a,o,u,l,c,d=this._audioTrack,h=e.data,m=e.pts,y=this.aacOverFlow,_=this.aacLastPTS;if(y){var w=new Uint8Array(y.byteLength+h.byteLength);w.set(y,0),w.set(h,y.byteLength),h=w}for(a=0,u=h.length;a<u-1&&!f(h,a);a++);if(!a||(a<u-1?(l="AAC PES did not start with ADTS header,offset:"+a,c=!1):(l="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+l),this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:l}),!c)){if(p(d,this.observer,h,a,this.audioCodec),r=0,t=v(d.samplerate),y&&_){var b=_+t;Math.abs(b-m)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((b-m)/90)),m=b)}for(;a<u;){if(f(h,a)){if(a+5<u){var E=g(d,h,a,m,r);if(E){a+=E.length,o=E.sample.pts,r++;continue}}break}a++}y=a<u?h.subarray(a,u):null,this.aacOverFlow=y,this.aacLastPTS=o}},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,i=0,a=e.pts;i<r;)if(b.isHeader(t,i)){var o=b.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),k=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=m.default.getID3Data(e,0);if(n&&void 0!==m.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(b.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,n){for(var i=m.default.getID3Data(e,0)||[],a=m.default.getTimeStamp(i),o=void 0!==a?90*a:9e4*t,s=i.length,u=e.length,l=0,c=0,d=this._audioTrack,f=[{pts:o,dts:o,data:i}];s<u;)if(b.isHeader(e,s)){var h=b.appendFrame(d,e,s,o,l);if(!h)break;s+=h.length,c=h.sample.pts,l++}else m.default.isHeader(e,s)?(i=m.default.getID3Data(e,s),f.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),O=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),R=Math.pow(2,32)-1,A=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(R+1)),i=Math.floor(r%(R+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(R+1)),i=Math.floor(r%(R+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,o=Math.floor(n/(R+1)),s=Math.floor(n%(R+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(R+1)),o=Math.floor(r%(R+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)a=(i=l[n]).duration,o=i.size,s=i.flags,u=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();function x(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function L(e,t){return void 0===t&&(t=!1),x(e,1e3,1/9e4,t)}function D(e,t){return void 0===t&&(t=1),x(e,9e4,1/t)}var P=D(10),M=D(.2),I=null;function U(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}var B,F=function(){function e(e,t,r,n){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===I){var i=navigator.userAgent.match(/Chrome\/(\d+)/i);I=i?parseInt(i[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var n=r.pts-e;return n<-4294967296?(t=!0,U(e,r.pts)):n>0?e:r.pts}),e[0].pts);return t&&s.logger.debug("PTS rollover detected"),r},t.remux=function(e,t,r,i,a,o,u){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var l=e.samples.length,c=t.samples.length,d=a,f=a;if(l&&c){var h=this.getVideoStartPts(t.samples),p=(U(e.samples[0].pts,h)-h)/t.inputTimeScale;d+=Math.max(0,p),f+=Math.max(0,-p)}if(l){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var v,g=this.remuxAudio(e,d,o,u);c&&(g&&(v=g.endPTS-g.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,f,o,v))}else if(c){var m=this.remuxVideo(t,f,o,0,u);m&&e.codec&&this.remuxEmptyAudio(e,d,o,m)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(n.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var a,o,u=this.observer,l=e.samples,c=t.samples,d=this.typeSupported,f="audio/mp4",h={},p={tracks:h},v=void 0===this._initPTS;if(v&&(a=o=1/0),e.config&&l.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(f="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),h.audio={container:f,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:A.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(a=o=l[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&c.length){var g=t.inputTimeScale;if(t.timescale=g,h.video={container:"video/mp4",codec:t.codec,initSegment:A.initSegment([t]),metadata:{width:t.width,height:t.height}},v){var m=this.getVideoStartPts(c),y=Math.round(g*r);o=Math.min(o,U(c[0].dts,m)-y),a=Math.min(a,m-y),this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:a})}}else v&&h.audio&&this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:a});Object.keys(h).length?(u.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,v&&(this._initPTS=a,this._initDTS=o)):u.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,a){var o,u,l,c,d,f=e.timescale,h=e.samples,p=[],v=h.length,g=this._initPTS,m=8,y=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,w=0,b=!1,E=this.nextAvcDts;if(0!==v){r||(E=t*f-(h[0].pts-U(h[0].dts,h[0].pts)));for(var T=0;T<v;T++){var C=h[T];C.pts=U(C.pts-g,E),C.dts=U(C.dts-g,E),C.dts>C.pts&&(w=Math.max(Math.min(w,C.pts-C.dts),-1*M)),C.dts<h[T>0?T-1:T].dts&&(b=!0)}b&&h.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id})),c=h[0].dts,d=h[v-1].dts;var S=Math.round((d-c)/(v-1));if(w<0){if(w<-2*S){s.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+L(-S,!0)+" ms");for(var k=w,O=0;O<v;O++)h[O].dts=k=Math.max(k,h[O].pts-S),h[O].pts=Math.max(k,h[O].pts)}else{s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+L(w,!0)+" ms to overcome this issue");for(var R=0;R<v;R++)h[R].dts=h[R].dts+w}c=h[0].dts,d=h[v-1].dts}if(r){var x=c-E,D=x>S;if(D||x<-1){D?s.logger.warn("AVC: "+L(x,!0)+" ms ("+x+"dts) hole between fragments detected, filling it"):s.logger.warn("AVC: "+L(-x,!0)+" ms ("+x+"dts) overlapping between fragments detected"),c=E;var P=h[0].pts-x;h[0].dts=c,h[0].pts=P,s.logger.log("Video: First PTS/DTS adjusted: "+L(P,!0)+"/"+L(c,!0)+", delta: "+L(x,!0)+" ms")}}I&&I<75&&(c=Math.max(0,c));for(var B=0,F=0,N=0;N<v;N++){for(var j=h[N],H=j.units,z=H.length,V=0,K=0;K<z;K++)V+=H[K].data.length;F+=V,B+=z,j.length=V,j.dts=Math.max(j.dts,c),j.pts=Math.max(j.pts,j.dts,0),y=Math.min(j.pts,y),_=Math.max(j.pts,_)}d=h[v-1].dts;var G=F+4*B+8;try{u=new Uint8Array(G)}catch(e){return void this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating video mdat "+G})}var X=new DataView(u.buffer);X.setUint32(0,G),u.set(A.types.mdat,4);for(var Z=0;Z<v;Z++){for(var W,q=h[Z],Y=q.units,Q=0,J=0,$=Y.length;J<$;J++){var ee=Y[J],te=ee.data,re=ee.data.byteLength;X.setUint32(m,re),m+=4,u.set(te,m),m+=re,Q+=4+re}if(Z<v-1)o=h[Z+1].dts-q.dts;else{var ne=this.config,ie=q.dts-h[Z>0?Z-1:Z].dts;if(ne.stretchShortVideoTrack){var ae=ne.maxBufferHole,oe=Math.floor(ae*f),se=(a?y+a*f:this.nextAudioPts)-q.pts;se>oe?((o=se-ie)<0&&(o=ie),s.logger.log("It is approximately "+L(se,!1)+" ms to the next segment; using duration "+L(o,!1)+" ms for the last video frame.")):o=ie}else o=ie}W=Math.round(q.pts-q.dts),p.push({size:Q,duration:o,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:q.key?2:1,isNonSync:q.key?0:1}})}this.nextAvcDts=d+o;var ue=e.dropped;if(e.nbNalu=0,e.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var le=p[0].flags;le.dependsOn=2,le.isNonSync=0}e.samples=p,l=A.moof(e.sequenceNumber++,c,e),e.samples=[];var ce={data1:l,data2:u,startPTS:y/f,endPTS:(_+o)/f,startDTS:c/f,endDTS:this.nextAvcDts/f,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:ue};return this.observer.trigger(n.default.FRAG_PARSING_DATA,ce),ce}},t.remuxAudio=function(e,t,r,a){var o,u,l,c,d,f,h=e.inputTimeScale,p=e.timescale,v=h/p,g=(e.isAAC?1024:1152)*v,m=this._initPTS,y=!e.isAAC&&this.typeSupported.mpeg,_=y?0:8,w=e.samples,b=[],E=this.nextAudioPts;if(r|=w.length&&E&&(a&&Math.abs(t-E/h)<.1||Math.abs(w[0].pts-E-m)<20*g),w.forEach((function(e){e.pts=e.dts=U(e.pts-m,t*h)})),0!==(w=w.filter((function(e){return e.pts>=0}))).length){if(r||(E=a?Math.max(0,t*h):w[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,C=0,S=E;C<w.length;){var k=w[C],R=k.pts,x=R-S;if(x<=-T*g)r||C>0?(s.logger.warn("Dropping 1 audio frame @ "+L(S,!0)/1e3+"s due to "+L(x,!0)+" ms overlap."),w.splice(C,1)):(s.logger.warn("Audio frame @ "+L(R,!0)/1e3+"s overlaps nextAudioPts by "+L(x,!0)+" ms."),S=R+g,C++);else if(x>=T*g&&x<P&&S){var D=Math.round(x/g);s.logger.warn("Injecting "+D+" audio frames @ "+L(S,!0)/1e3+"s due to "+L(x,!0)+" ms gap.");for(var M=0;M<D;M++){var I=Math.max(S,0);(u=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=k.unit.subarray()),w.splice(C,0,{unit:u,pts:I,dts:I}),S+=g,C++}k.pts=k.dts=S,S+=g,C++}else Math.abs(x),k.pts=k.dts=S,S+=g,C++}for(var B=w.length,F=0;B--;)F+=w[B].unit.byteLength;for(var N=0,j=w.length;N<j;N++){var H=w[N],z=H.unit,V=H.pts;if(void 0!==f&&o)o.duration=Math.round((V-f)/v);else{var K=V-E,G=0;if(r&&e.isAAC&&K){if(K>0&&K<P)G=Math.round((V-E)/g),s.logger.log(L(K,!0)+" ms hole between AAC samples detected,filling it"),G>0&&((u=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(u=z.subarray()),F+=G*u.length);else if(K<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+L(E,!0)+" ms / "+L(V,!0)+" ms / "+L(-K,!0)+" ms"),F-=z.byteLength;continue}V=E}if(d=V,!(F>0))return;F+=_;try{l=new Uint8Array(F)}catch(e){return void this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}y||(new DataView(l.buffer).setUint32(0,F),l.set(A.types.mdat,4));for(var X=0;X<G;X++)(u=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=z.subarray()),l.set(u,_),_+=u.byteLength,o={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(o)}l.set(z,_);var Z=z.byteLength;_+=Z,o={size:Z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(o),f=V}var W=0;if((B=b.length)>=2&&(W=b[B-2].duration,o.duration=W),B){this.nextAudioPts=E=f+v*W,e.samples=b,c=y?new Uint8Array:A.moof(e.sequenceNumber++,d/v,e),e.samples=[];var q=d/h,Y=E/h,Q={data1:c,data2:l,startPTS:q,endPTS:Y,startDTS:q,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:B};return this.observer.trigger(n.default.FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,n){var i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),o=this.nextAudioPts,u=(void 0!==o?o:n.startDTS*i)+this._initDTS,l=n.endDTS*i+this._initDTS,c=1024*a,d=Math.ceil((l-u)/c),f=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),f){for(var h=[],p=0;p<d;p++){var v=u+p*c;h.push({unit:f,pts:v,dts:v})}e.samples=h,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var i=e.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<r;s++){var u=e.samples[s];u.pts=U(u.pts-a,t*i)/i,u.dts=U(u.dts-o,t*i)/i}this.observer.trigger(n.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var r=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(r){for(var o=0;o<r;o++){var s=e.samples[o];s.pts=U(s.pts-a,t*i)/i}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(n.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}(),N=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,i,a,o,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(n.default.FRAG_PARSING_DATA,{data1:u,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(n.default.FRAG_PARSED)},e}(),j=Object(u.getSelfScope)();try{B=j.performance.now.bind(j.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),B=j.Date.now}var H=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,i,o,s,u,l,c,d,f,h){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var v=this.decrypter;null==v&&(v=this.decrypter=new a.default(this.observer,this.config));var g=B();v.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=B();p.observer.trigger(n.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,u,l,c,d,f,h)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,u,l,c,d,f,h)},t.pushDecrypted=function(e,t,r,a,o,s,u,l,c,d,f,h){var p=this.demuxer,v=this.remuxer;if(!p||u||l){for(var g,m=this.observer,w=this.typeSupported,b=this.config,E=[{demux:S,remux:F},{demux:_.default,remux:N},{demux:y,remux:F},{demux:k,remux:F}],T=0,C=E.length;T<C&&!(g=E[T]).demux.probe(e);T++);if(!g)return void m.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});v&&v instanceof g.remux||(v=new g.remux(m,b,w,this.vendor)),p&&p instanceof g.demux||(p=new g.demux(m,v,b,w),this.probe=g.demux.probe),this.demuxer=p,this.remuxer=v}(u||l)&&(p.resetInitSegment(r,a,o,d),v.resetInitSegment()),u&&(p.resetTimeStamp(h),v.resetTimeStamp(h)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,f)},e}();t.default=H},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),a=r("./src/utils/logger.js"),o=r("./node_modules/eventemitter3/index.js");t.default=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n.default(t,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,(function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)}))}},"./src/demux/id3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var n,i=r("./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);)i+=10,i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i;if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var i=e._readSize(t,r+6),a=(r+=10)+i;r+8<a;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):e._decodeTextFrame(t)},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var n=r.decode(e);if(t){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}for(var a,s,u,l=e.length,c="",d=0;d<l;){if(0===(a=e[d++])&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[d++],u=e[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&u)<<0)}}return c},e}();function o(){var e=Object(i.getSelfScope)();return n||void 0===e.TextDecoder||(n=new e.TextDecoder("utf-8")),n}var s=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/logger.js"),i=r("./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:a?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,a,o,s,u,l=[];if(t.data?(s=t.start,a=t.end,t=t.data):(s=0,a=t.byteLength),!r.length)return null;for(n=s;n<a;)u=(i=e.readUint32(t,n))>1?n+i:a,e.bin2str(t.subarray(n+4,n+8))===r[0]&&(1===r.length?l.push({data:t,start:n+8,end:u}):(o=e.findBox({data:t,start:n+8,end:u},r.slice(1))).length&&(l=l.concat(o))),n=u;return l},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[];var s=(o=o[0]).data[0];a=0===s?8:16;var u=e.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var l=o.end+0,c=e.readUint16(o,a);a+=2;for(var d=0;d<c;d++){var f=a,h=e.readUint32(o,f);f+=4;var p=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=e.readUint32(o,f);f+=4,r.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:l,end:l+p-1}}),l+=p,a=f+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),u=e.findBox(t,["mdia","mdhd"])[0];if(u){o=0===(a=u.data[u.start])?12:20;var l=e.readUint32(u,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var h=e.bin2str(f.data.subarray(f.start+12,f.start+16));n.logger.log("MP4Demuxer:"+d+":"+h+" found")}r[s]={timescale:l,type:d},r[d]={timescale:l,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,a;return i=e.readUint32(n,4),a=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0]/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),u=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,u)}}))}))}))},t.append=function(t,r,n,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(o,t);this.initPTS=u=l-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(o,t,u),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,t)},t.destroy=function(){},e}();t.default=o},"./src/errors.ts":function(e,t,r){"use strict";var n,i;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(n||(n={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":function(e,t,r){"use strict";r.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ar}));var n={};r.r(n),r.d(n,"newCue",(function(){return ht}));var i,a,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),u=r("./src/polyfills/number.js"),l=r("./src/events.js"),c=r("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},f=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var h=r("./src/demux/mp4demuxer.js");function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v,g=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,r;return t=e,(r=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&p(t.prototype,r),e}();function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(v||(v={}));var y=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[v.AUDIO]=!1,e[v.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r,n=e.prototype;return n.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},n.addElementaryStream=function(e){this._elementaryStreams[e]=!0},n.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},n.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},n.setDecryptDataFromLevelKey=function(e,t){var r=e;return(null==e?void 0:e.method)&&e.uri&&!e.iv&&((r=new g(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},t=e,(r=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(u.isFiniteNumber)(this.programDateTime))return null;var e=Object(u.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&m(t.prototype,r),e}();function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,r;return t=e,(r=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(u.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&_(t.prototype,r),e}(),b=/^(\d+)x(\d+)$/,E=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,T=function(){function e(t){for(var r in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=b.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(E.lastIndex=0;null!==(t=E.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),C={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function S(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var k=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,O=/#EXT-X-MEDIA:(.*)/g,R=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),A=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,x=/\.(mp4|m4s|m4v|m4a)$/i,L=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,i=[],a={},o=!1;function s(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return function(e,t){var r=C[t];return!!r&&!0===r[e.slice(0,4)]}(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}for(k.lastIndex=0;null!=(n=k.exec(t));)if(n[1]){var u={},l=u.attrs=new T(n[1]);u.url=e.resolve(n[2],r);var c=l.decimalResolution("RESOLUTION");c&&(u.width=c.width,u.height=c.height),u.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),u.name=l.NAME,s([].concat((l.CODECS||"").split(/[ ,]+/)),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=e.convertAVC1ToAVCOTI(u.videoCodec)),i.push(u)}else if(n[3]){var d=new T(n[3]);d["DATA-ID"]&&(o=!0,a[d["DATA-ID"]]=d)}return{levels:i,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,r,n,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(O.lastIndex=0;null!==(a=O.exec(t));){var u=new T(a[1]);if(u.TYPE===n){var l={attrs:u,id:s++,groupId:u["GROUP-ID"],instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE,type:n,default:"YES"===u.DEFAULT,autoselect:"YES"===u.AUTOSELECT,forced:"YES"===u.FORCED,lang:u.LANGUAGE};if(u.URI&&(l.url=e.resolve(u.URI,r)),i.length){var c=e.findGroup(i,l.groupId);l.audioCodec=c?c.codec:i[0].codec}o.push(l)}}return o},e.parseLevelPlaylist=function(e,t,r,n,i){var a,o,s,l=0,d=0,f=new w(t),h=0,p=null,v=new y,m=null;for(R.lastIndex=0;null!==(a=R.exec(e));){var _=a[1];if(_){v.duration=parseFloat(_);var b=(" "+a[2]).slice(1);v.title=b||null,v.tagList.push(b?["INF",_,b]:["INF",_])}else if(a[3]){if(Object(u.isFiniteNumber)(v.duration)){var E=l++;v.type=n,v.start=d,s&&(v.levelkey=s),v.sn=E,v.level=r,v.cc=h,v.urlId=i,v.baseurl=t,v.relurl=(" "+a[3]).slice(1),D(v,p),f.fragments.push(v),p=v,d+=v.duration,v=new y}}else if(a[4]){var C=(" "+a[4]).slice(1);p?v.setByteRange(C,p):v.setByteRange(C)}else if(a[5])v.rawProgramDateTime=(" "+a[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),null===m&&(m=f.fragments.length);else{if(!(a=a[0].match(A))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var S=(" "+a[o+1]).slice(1),k=(" "+a[o+2]).slice(1);switch(a[o]){case"#":v.tagList.push(k?[S,k]:[S]);break;case"PLAYLIST-TYPE":f.type=S.toUpperCase();break;case"MEDIA-SEQUENCE":l=f.startSN=parseInt(S);break;case"TARGETDURATION":f.targetduration=parseFloat(S);break;case"VERSION":f.version=parseInt(S);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":h++,v.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(S);break;case"KEY":var O=new T(S),L=O.enumeratedString("METHOD"),P=O.URI,M=O.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(O.KEYFORMAT||"identity")){c.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}L&&(s=new g(t,P),P&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(s.method=L,s.key=null,s.iv=M));break;case"START":var I=new T(S).decimalFloatingPoint("TIME-OFFSET");Object(u.isFiniteNumber)(I)&&(f.startTimeOffset=I);break;case"MAP":var U=new T(S);v.relurl=U.URI,U.BYTERANGE&&v.setByteRange(U.BYTERANGE),v.baseurl=t,v.level=r,v.type=n,v.sn="initSegment",f.initSegment=v,(v=new y).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+a)}}}return(v=p)&&!v.relurl&&(f.fragments.pop(),d-=v.duration),f.totalduration=d,f.averagetargetduration=d/f.fragments.length,f.endSN=l-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=h,!f.initSegment&&f.fragments.length&&f.fragments.every((function(e){return x.test(e.relurl)}))&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(v=new y).relurl=f.fragments[0].relurl,v.baseurl=t,v.level=r,v.type=n,v.sn="initSegment",f.initSegment=v,f.needSidxRanges=!0),m&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(f.fragments,m),f},e}();function D(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null==t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(u.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var P=window.performance,M=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MANIFEST_LOADING,l.default.LEVEL_LOADING,l.default.AUDIO_TRACK_LOADING,l.default.SUBTITLE_TRACK_LOADING)||this).loaders={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.canHaveQualityLevels=function(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},n.mapContextToLevelType=function(e){switch(e.type){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},n.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var o=n.prototype;return o.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return e.loader=i,this.loaders[e.type]=i,i},o.getInternalLoader=function(e){return this.loaders[e.type]},o.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},o.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},o.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},o.onManifestLoading=function(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},o.onAudioTrackLoading=function(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},o.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},o.load=function(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,n,a,o,s=this.getInternalLoader(e);if(s){var u=s.context;if(u&&u.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case i.MANIFEST:r=t.manifestLoadingMaxRetry,n=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:r=0,o=0,a=0,n=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,n=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var l={timeout:n,maxRetry:r,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,l,d),!0},o.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=P.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},o.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},o.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},o._handleMasterPlaylist=function(e,t,r,i){var a=this.hls,o=e.data,s=n.getResponseUrl(e,r),u=L.parseMasterPlaylist(o,s),d=u.levels,f=u.sessionData;if(d.length){var h=d.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=L.parseMasterPlaylistMedia(o,s,"AUDIO",h),v=L.parseMasterPlaylistMedia(o,s,"SUBTITLES"),g=L.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(p.length){var m=!1;p.forEach((function(e){e.url||(m=!0)})),!1===m&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(l.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:v,captions:g,url:s,stats:t,networkDetails:i,sessionData:f})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},o._handleTrackOrLevelPlaylist=function(e,t,r,a){var o=this.hls,c=r.id,d=r.level,f=r.type,h=n.getResponseUrl(e,r),p=Object(u.isFiniteNumber)(c)?c:0,v=Object(u.isFiniteNumber)(d)?d:p,g=n.mapContextToLevelType(r),m=L.parseLevelPlaylist(e.data,h,v,g,p);if(m.tload=t.tload,m.fragments.length){if(f===i.MANIFEST){var y={url:h,details:m};o.trigger(l.default.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:h,stats:t,networkDetails:a,sessionData:null})}if(t.tparsed=P.now(),m.needSidxRanges){var _=m.initSegment.url;this.load({url:_,isSidxRequest:!0,type:f,level:d,levelDetails:m,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=m,this._handlePlaylistLoaded(e,t,r,a)}else o.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:h,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},o._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=h.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var r=e.info;if(i){var n=i.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),i&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},o._handleNetworkError=function(e,t,r,n){var a,o;void 0===r&&(r=!1),void 0===n&&(n=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var u=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:a=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}u&&(u.abort(),this.resetInternalLoader(e.type));var d={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:u,context:e,networkDetails:t};n&&(d.response=n),this.hls.trigger(l.default.ERROR,d)},o._handlePlaylistLoaded=function(e,t,r,a){var o=r.type,s=r.level,u=r.id,c=r.levelDetails;if(c&&c.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(l.default.LEVEL_LOADED,{details:c,level:s||0,id:u||0,stats:t,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(l.default.AUDIO_TRACK_LOADED,{details:c,id:u,stats:t,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(l.default.SUBTITLE_TRACK_LOADED,{details:c,id:u,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,r,"invalid target duration",a)},n}(f),I=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.FRAG_LOADING)||this).loaders={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},i.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s,l,d,f=n[r];f&&(c.logger.warn("abort previous fragment loader for type: "+r),f.abort()),f=n[r]=t.loader=i.fLoader?new a(i):new o(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var h=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(u.isFiniteNumber)(h)&&Object(u.isFiniteNumber)(p)&&(s.rangeStart=h,s.rangeEnd=p),l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(s,l,d)},i.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:n})},i.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},i.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},i.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:n})},n}(f),U=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.KEY_LOADING)||this).loaders={},r.decryptkey=null,r.decrypturl=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},i.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(n&&(c.logger.warn("abort previous key loader for type:"+r),n.abort()),!i)return void c.logger.warn("key uri is falsy");t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,u)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},i.loadsuccess=function(e,t,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(l.default.KEY_LOADED,{frag:n})):c.logger.error("after key load, decryptdata unset")},i.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},i.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},n}(f),B="NOT_LOADED",F="APPENDING",N="PARTIAL",j="OK",H=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.BUFFER_APPENDED,l.default.FRAG_BUFFERED,l.default.FRAG_LOADED)||this).bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},i.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===n.length)return null;var i=n.pop();return r[i].body},i.detectEvictedFragments=function(e,t){var r=this;Object.keys(this.fragments).forEach((function(n){var i=r.fragments[n];if(i&&i.buffered){var a=i.range[e];if(a)for(var o=a.time,s=0;s<o.length;s++){var u=o[s];if(!r.isTimeBuffered(u.startPTS,u.endPTS,t)){r.removeFragment(i.body);break}}}}))},i.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},i.getBufferedTimes=function(e,t,r){for(var n,i,a=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:a,partial:o}},i.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},i.getPartialFragment=function(e){var t,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var u=i.fragments[s];i.isPartial(u)&&(r=u.body.startPTS-i.bufferPadding,n=u.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(a=u.body,o=t)))})),a},i.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=B;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?N:j:F),n},i.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},i.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},i.onFragLoaded=function(e){var t=e.frag;Object(u.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},i.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},i.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},i.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},i.removeAllFragments=function(){this.fragments=Object.create(null)},n}(f),z=function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r<=n;){var o=t(a=e[i=(r+n)/2|0]);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null},V=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,i=e.buffered,a=[];for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var n=[];if(r)for(var i=0;i<e.length;i++){var a=n.length;if(a){var o=n[a-1].end;e[i].start-o<r?e[i].end>o&&(n[a-1].end=e[i].end):n.push(e[i])}else n.push(e[i])}else n=e;for(var s,u=0,l=t,c=t,d=0;d<n.length;d++){var f=n[d].start,h=n[d].end;if(t+r>=f&&t<h)l=f,u=(c=h)-t;else if(t+r<f){s=f;break}}return{len:u,start:l,end:c,nextStart:s}},e}(),K=r("./node_modules/eventemitter3/index.js"),G=r("./node_modules/webworkify-webpack/index.js"),X=r("./src/demux/demuxer-inline.js");function Z(){return window.MediaSource||window.WebKitMediaSource}var W=r("./src/utils/get-self-scope.js"),q=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},n}(K.EventEmitter),Y=Object(W.getSelfScope)(),Q=Z()||{isTypeSupported:function(){return!1}},J=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new q,i=e.config,a=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(l.default.FRAG_DECRYPTED,a),n.on(l.default.FRAG_PARSING_INIT_SEGMENT,a),n.on(l.default.FRAG_PARSING_DATA,a),n.on(l.default.FRAG_PARSED,a),n.on(l.default.ERROR,a),n.on(l.default.FRAG_PARSING_METADATA,a),n.on(l.default.FRAG_PARSING_USERDATA,a),n.on(l.default.INIT_PTS_FOUND,a);var o={mp4:Q.isTypeSupported("video/mp4"),mpeg:Q.isTypeSupported("audio/mpeg"),mp3:Q.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=G("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:u,id:t,config:JSON.stringify(i)})}catch(e){c.logger.warn("Error in worker:",e),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&Y.URL.revokeObjectURL(d.objectURL),this.demuxer=new X.default(n,o,i,u),this.w=void 0}}else this.demuxer=new X.default(n,o,i,u)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,i,a,o,s){var l=this.w,d=Object(u.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,f=i.decryptdata,h=this.frag,p=!(h&&i.cc===h.cc),v=!(h&&i.level===h.level),g=h&&i.sn===h.sn+1,m=!v&&g;if(p&&c.logger.log(this.id+":discontinuity detected"),v&&c.logger.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:e,decryptdata:f,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:d,discontinuity:p,trackSwitch:v,contiguous:m,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,f,t,r,n,d,p,v,m,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":Y.URL.revokeObjectURL(this.w.objectURL);break;case l.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function $(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function ee(e,t,r){var n=e[t],i=e[r],a=i.startPTS;if(Object(u.isFiniteNumber)(a))r>t?(n.duration=a-n.start,n.duration<0&&c.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"));else if(r>t){var o=n.cc===i.cc;i.start=n.start+(o&&n.minEndPTS?n.minEndPTS-n.start:n.duration)}else i.start=Math.max(n.start-i.duration,0)}function te(e,t,r,n,i,a){var o=r,s=n;if(Object(u.isFiniteNumber)(t.startPTS)){var l=Math.abs(t.startPTS-r);Object(u.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(l,t.deltaPTS):t.deltaPTS=l,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),s=Math.min(n,t.endPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var c=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.minEndPTS=s,t.startDTS=i,t.endDTS=a,t.duration=n-r;var d,f,h,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;for(d=p-e.startSN,(f=e.fragments)[d]=t,h=d;h>0;h--)ee(f,h,h-1);for(h=d;h<f.length-1;h++)ee(f,h,h+1);return e.PTSKnown=!0,c}function re(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,n=0;if(ne(e,t,(function(e,i){n=e.cc-i.cc,Object(u.isFiniteNumber)(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,r=i),t.PTSKnown=!0})),t.PTSKnown){if(n){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,a=0;a<i.length;a++)i[a].cc+=n}r?te(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var a=0;a<i.length;a++)i[a].start+=n[r].start}(e,t),t.PTSKnown=e.PTSKnown}}function ne(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=n;o<=i;o++){var s=e.fragments[a+o],u=t.fragments[o];if(!s||!u)break;r(s,u,o)}}function ie(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}var ae=function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t};function oe(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function se(e,t,r){!function(e,t,r){if(function(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}(e,r,t)){var n=function(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var i=function(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}(r,n[0].cc);if(i&&(!i||i.startPTS))return i;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(r.details,t);n&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),oe(n.start,t))}}(e,r,t),!r.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(u.isFiniteNumber)(n)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),oe(n,e))}}(r,t.details)}function ue(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(u.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var n=0;n<e.length;++n){var i=e[n];if(de(t,r,i))return i}return null}function le(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=null;return e?i=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(i=t[0]),i&&0===ce(r,n,i)?i:z(t,ce.bind(null,r,n))||i}function ce(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function de(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}var fe=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,i=r.currentTime,a=r.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,i===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var u=V.bufferInfo(r,i,0),l=u.len>0,d=u.nextStart||0;if(l||d){if(a){var f=u.len>2,h=!d||d-i>2&&!this.fragmentTracker.getPartialFragment(i);if(f||h)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,u.start||0)-i;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var v=self.performance.now();if(null!==n){var g=v-n;!a&&g>=250&&this._reportStall(u.len);var m=V.bufferInfo(r,i,t.maxBufferHole);this._tryFixBufferStall(m,g)}else this.stalled=v}}}else if(this.moved=!0,null!==n){if(this.stallReported){var y=self.performance.now()-n;c.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media.currentTime,a=n.getPartialFragment(i);a&&this._trySkipBufferHole(a)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,i=n.currentTime,a=0,o=0;o<n.buffered.length;o++){var u=n.buffered.start(o);if(i+t.maxBufferHole>=a&&i<u){var d=Math.max(u+.05,n.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,e&&r.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:e}),d}a=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var a=n+i*e.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+n+" to "+a),r.currentTime=a,t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pe=function(e){var t,r;function n(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(r=e.call.apply(e,[this,t].concat(i))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(he(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},n}(f),ve="STOPPED",ge="STARTING",me="IDLE",ye="PAUSED",_e="KEY_LOADING",we="FRAG_LOADING",be="FRAG_LOADING_WAITING_RETRY",Ee="WAITING_TRACK",Te="PARSING",Ce="PARSED",Se="BUFFER_FLUSHING",ke="ENDED",Oe="ERROR",Re="WAITING_INIT_PTS",Ae="WAITING_LEVEL",xe=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ve},i._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===N||i===j}return!1},i.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,i=t?t.currentTime:null,a=V.bufferInfo(r||t,i,this.config.maxBufferHole);if(c.logger.log("media seeking to "+(Object(u.isFiniteNumber)(i)?i.toFixed(3):i)),n===we){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,l=o.start-s,d=o.start+o.duration+s;i<l||i>d?(o.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=me):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else n===ke&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=me);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=ve,this.fragmentTracker=null},i.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},n}(pe);function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var De,Pe=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.LEVELS_UPDATED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this).fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=ve,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n.audioOnly=!1,n.bitrateTest=!1,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,o,d=n.prototype;return d.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=me,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ve},d.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},d.doTick=function(){switch(this.state){case Se:this.fragLoadError=0;break;case me:this._doTickIdle();break;case Ae:var e=this.levels[this.level];e&&e.details&&(this.state=me);break;case be:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=me)}this._checkBuffer(),this._checkFragmentChanged()},d._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var u=n<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,d=V.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,u),f=d.len;if(!(f>=o)){c.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==i)this.state=Ae;else{if(this._streamEnded(d,h)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(l.default.BUFFER_EOS,p),void(this.state=ke)}this._fetchPayloadOrEos(n,d,h)}}}}},d._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=(this.level,r.fragments),a=i.length;if(0!==a){var o,s=i[0].start,u=i[a-1].start+i[a-1].duration,l=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(o=this._ensureFragmentAtLivePoint(r,l,s,u,n,i)))return}else l<s&&(o=i[0]);o||(o=this._findFragment(s,n,a,i,l,u,r)),o&&(o.encrypted?this._loadKey(o,r):this._loadFragment(o,r,e,l))}},d._ensureFragmentAtLivePoint=function(e,t,r,n,i,a){var o,s=this.hls.config,l=this.media,d=1/0;if(void 0!==s.liveMaxLatencyDuration?d=s.liveMaxLatencyDuration:Object(u.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(d=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-s.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);t=f,l&&!l.paused&&l.readyState&&l.duration>f&&f>l.currentTime&&(c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),l.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&i)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),o=ue(a,i.endProgramDateTime,s.maxFragLookUpTolerance);else{var h=i.sn+1;if(h>=e.startSN&&h<=e.endSN){var p=a[h-e.startSN];i.cc===p.cc&&(o=p,c.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=z(a,(function(e){return i.cc-e.cc})))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}return o},d._findFragment=function(e,t,r,n,i,a,o){var s,u=this.hls.config;if(s=i<a?le(t,n,i,i>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance):n[r-1]){var l=s.sn-o.startSN,d=t&&s.level===t.level,f=n[l-1],h=n[l+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var p=t.deltaPTS;p&&p>u.maxBufferHole&&t.dropped&&l?(s=f,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=h,this.fragmentTracker.getState(s)!==j&&c.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(h&&h.backtracked?(c.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:l&&(s=null)))}return s},d._loadKey=function(e,t){c.logger.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=_e,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},d._loadFragment=function(e,t,r,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(u.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||i===B||i===N?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,c.logger.log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(r.toFixed(3))+", bufferEnd: "+parseFloat(n.toFixed(3))),this.hls.trigger(l.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new J(this.hls,"main")),this.state=we):i===F&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},d.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},d.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},d._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),V.isBuffered(r,t)?e=this.getBufferedFrag(t):V.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},d.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused)||t.pause():e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},d.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,e.currentTime>0&&V.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},d.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r=this.getBufferedFrag(e.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var n=this.hls.nextLoadLevel,i=this.levels[n],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(e.currentTime+t);if(o){var s=this.followingBufferedFrag(o);if(s){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null;var l=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(l,Number.POSITIVE_INFINITY)}}}},d.flushMainBuffer=function(e,t){this.state=Se;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,r)},d.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new fe(r,t,this.fragmentTracker,this.hls)},d.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},d.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(u.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},d.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},d.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},d.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],a=t.totalduration,o=0;if(c.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||i.details&&i.details.live){var s=i.details;s&&t.fragments.length>0?(re(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(u.isFiniteNumber)(o)?c.logger.log("live playlist sliding:"+o.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),se(this.fragPrevious,n,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,se(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=r,this.hls.trigger(l.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(u.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ae&&(this.state=me),this.tick()},d.onKeyLoaded=function(){this.state===_e&&(this.state=me,this.tick())},d.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,a=e.frag;if(this.state===we&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=n[t.level],u=s.details;if(this.bitrateTest=!1,this.stats=o,c.logger.log("Loaded "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=me,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=me,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=e.payload,r.trigger(l.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level+", cc "+t.cc),this.state=Te,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(u.PTSKnown||!u.live),f=u.initSegment?u.initSegment.data:[],h=this._getAudioCodec(s);(this.demuxer=this.demuxer||new J(this.hls,"main")).push(e.payload,f,h,s.videoCodec,t,u.totalduration,d)}}this.fragLoadError=0},d.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te){var n,i,a=e.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",c.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}for(n in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,a),a){i=a[n],c.logger.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}},d.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===Te){var i=this.levels[this.level],a=r;if(Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&a.addElementaryStream(v.AUDIO),!0===e.hasVideo&&a.addElementaryStream(v.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=me,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=te(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(l.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===Te&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(l.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},d.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te&&(this.stats.tparsed=window.performance.now(),this.state=Ce,this._checkAppendedParsed())},d.onAudioTrackSwitching=function(e){var t=this.altAudio,r=!!e.url,n=e.id;if(!r){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=me}var a=this.hls;t&&a.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:n})}},d.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},d.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var o=n[a];"main"===o.id?(r=a,t=o,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&t?(c.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},d.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==Te&&t!==Ce||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},d._checkAppendedParsed=function(){if(!(this.state!==Ce||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+ae(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=me}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},d.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&V.isBuffered(this.media,this.media.currentTime)&&V.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=be}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Oe;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Oe&&(e.fatal?(this.state=Oe,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Ae||(this.state=me));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Te&&this.state!==Ce||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=me):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},d._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},d._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},d.onFragLoadEmergencyAborted=function(){this.state=me,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},d.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?v.AUDIO:v.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=me,this.fragPrevious=null},d.onLevelsUpdated=function(e){this.levels=e.levels},d.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},d._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(t!==r&&r>=0){if(e.seeking)return void c.logger.log("could not seek to "+r+", already seeking at "+t);var n=(e.buffered.length?e.buffered.start(0):0)-r;n>0&&n<this.config.maxBufferHole&&(c.logger.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),c.logger.log("seek to target start position "+r+" from current time "+t+". ready state "+e.readyState),e.currentTime=r}},d._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},i=n,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&Le(i.prototype,o),n}(xe);function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ie=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.FRAG_LOADED,l.default.ERROR)||this).canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,De=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o=n.prototype;return o.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},o.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},o.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},o.stopLoad=function(){this.canload=!1},o.onManifestLoaded=function(e){var t,r=[],n=[],i={},a=null,o=!1,u=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,u=u||!!e.audioCodec,De&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=i[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&$(a||e,"audio",t.AUDIO),t.SUBTITLES&&$(a||e,"text",t.SUBTITLES))})),o&&u&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||S(t,"audio"))&&(!r||S(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||S(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===t){this._firstLevel=d,c.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}var f=u&&!o;this.hls.trigger(l.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:o,altAudio:!f&&n.some((function(e){return!!e.url}))})}else this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},o.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(l.default.LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var o=i.urlId;r.trigger(l.default.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else r.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},o.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},o.recoverLevel=function(e,t,r,n){var i,a,o,s=this,u=this.hls.config,l=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+l+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c.logger.warn("level controller, "+l+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+l+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(c.logger.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},o.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},o.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=ie(i.details,n,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},o.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},o.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];c.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(l.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},o.removeLevel=function(e,t){var r=this.levels.filter((function(r,n){return n!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter((function(e,r){return r!==t})),r.urlId=0,!0)})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(l.default.LEVELS_UPDATED,{levels:r})},i=n,(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Me(i.prototype,a),n}(f),Ue=r("./src/demux/id3.js");function Be(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Fe(e){if(null==e?void 0:e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Ne=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA,l.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,r.media=void 0,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.destroy=function(){f.prototype.destroy.call(this)},i.onMediaAttached=function(e){this.media=e.media,this.media},i.onMediaDetaching=function(){Fe(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Be(r,this.media),r}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=Ue.default.getID3Frames(r[i].data);if(a){var o=Math.max(r[i].pts,0),s=i<r.length-1?r[i+1].pts:t.endPTS;s||(s=t.start+t.duration),s-o<=0&&(s=o+.25);for(var u=0;u<a.length;u++){var l=a[u];if(!Ue.default.isTimeStampFrame(l)){var c=new n(o,s,"");c.value=l,this.id3Track.addCue(c)}}}}},i.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var n=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,n=e.length-1;r<=n;){var i=Math.floor((n+r)/2);if(t<e[i].endTime)n=i-1;else{if(!(t>e[i].endTime))return e[i];r=i+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}(r.cues,t);if(n)for(;r.cues[0]!==n;)r.removeCue(r.cues[0])}},n}(f),je=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),He=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new je(t),this.fast_=new je(r)}var t=e.prototype;return t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ve=window.performance,Ke=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR)||this).lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o=n.prototype;return o.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},o.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,i=this.hls,a=i.config,o=t.level;i.levels[o].details.live?(r=a.abrEwmaFastLive,n=a.abrEwmaSlowLive):(r=a.abrEwmaFastVoD,n=a.abrEwmaSlowVoD),this._bwEstimator=new He(i,n,r,a.abrEwmaDefaultEstimate)}},o._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader;if(!n||n.stats&&n.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=n.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=Ve.now()-i.trequest,o=Math.abs(t.playbackRate);if(a>500*r.duration/o){var s=e.levels,u=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/a),d=s[r.level];if(!d)return;var f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,h=i.total?i.total:Math.max(i.loaded,Math.round(r.duration*f/8)),p=t.currentTime,v=(h-i.loaded)/u,g=(V.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(g<2*r.duration/o&&v>g){var m,y=e.minAutoLevel;for(m=r.level-1;m>y;m--){var _=s[m].realBitrate?Math.max(s[m].realBitrate,s[m].bitrate):s[m].bitrate;if(r.duration*_/(6.4*u)<g)break}void 0<v&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+v.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(a,i.loaded),n.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:i}))}}}}},o.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(u.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},o.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(u.isFiniteNumber)(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},o.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},o.clearTimer=function(){clearInterval(this.timer),this.timer=null},o._findBestLevel=function(e,t,r,n,i,a,o,s,u){for(var l=i;l>=n;l--){var d=u[l];if(d){var f,h=d.details,p=h?h.totalduration/h.fragments.length:t,v=!!h&&h.live;f=l<=e?o*r:s*r;var g=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,m=g*p/f;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(f)+"/"+g+"/"+p+"/"+a+"/"+m),f>g&&(!m||v&&!this.bitrateTestDelay||m<a))return l}}return-1},i=n,(a=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,f=(V.bufferInfo(a,u,n.maxBufferHole).end-u)/l,h=this._findBestLevel(o,s,d,i,t,f,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(h>=0)return h;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,v=n.abrBandWidthFactor,g=n.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;m&&(p=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-m,c.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=g=1)}return h=this._findBestLevel(o,s,d,i,t,f+p,v,g,r),Math.max(h,0)}}])&&ze(i.prototype,a),n}(f),Ge=Z(),Xe=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED)||this)._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){c.logger.log("media source opened"),r.hls.trigger(l.default.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){c.logger.log("media source closed")},r._onMediaSourceEnded=function(){c.logger.log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),i={},a=r.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}r.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:i}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),r.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.destroy=function(){f.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){c.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},i.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Ge){var r=this.mediaSource=new Ge;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},i.onMediaDetaching=function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(l.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in e)if(!t[n]){var i=e[n];if(!i)throw Error("source buffer exists for track "+n+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var u=t[n]=r.addSourceBuffer(o);u.addEventListener("updateend",this._onSBUpdateEnd),u.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:u,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},i.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a>=0;a--){var o=n[a],s=r[o];if(s){var u=s.buffered;u.length>0&&i>u.start(0)&&this.removeBufferRange(o,s,0,i)&&this.hls.trigger(l.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},i.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(u.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var i=r[n];i&&(t+=i.buffered.length)}}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}},i.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=r.shift();if(i)try{var a=n[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void r.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(n){c.logger.error("error while trying to append buffer:"+n.message),r.unshift(i);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===n.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(l.default.ERROR,o)}}}},i.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var a=n[r];if(a){if(a.ended=!1,a.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,a,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},i.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),s=Math.max(a,r),u=Math.min(o,n);if(Math.min(u,o)-s>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+l),t.remove(s,u),!0}}}catch(e){c.logger.warn("removeBufferRange failed",e)}return!1},n}(f);function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var We=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED,l.default.LEVELS_UPDATED,l.default.BUFFER_CODECS,l.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o,s=n.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,i){return n.isLevelAllowed(i,t.restrictedLevels)&&i<=e}));return this.clientRect=null,n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},n.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n,i,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=r)&&(n=s,!(i=e[o+1])||n.width!==i.width||n.height!==i.height)){a=o;break}}return a},i=n,o=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(a=[{key:"mediaWidth",get:function(){return this.getDimensions().width*n.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*n.contentScaleFactor}}])&&Ze(i.prototype,a),o&&Ze(i,o),n}(f),qe=window.performance,Ye=function(e){var t,r;function n(t){return e.call(this,t,l.default.MEDIA_ATTACHING)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},i.checkFPS=function(e,t,r){var n=qe.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var d=u.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=d)&&(d-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,u.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},i.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},n}(f),Qe=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(window.performance.now(),n.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,u;n.tload=Math.max(n.tfirst,window.performance.now()),u="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,n.loaded=n.total=u;var l={url:t.responseURL,data:s};this.callbacks.onSuccess(l,n,i,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(c.logger.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(c.logger.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $e=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.AUDIO_TRACK_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.LEVEL_LOADED,l.default.ERROR)||this)._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o=n.prototype;return o.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},o.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},o.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},o.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},o.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},o.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},o._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,i=t.id;this.hls.trigger(l.default.AUDIO_TRACK_SWITCHING,{id:i,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},o.doTick=function(){this._updateTrack(this._trackId)},o._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},o._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:c.logger.warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(n=null,o()),a||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},o._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live||!r)},o._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;c.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},o._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},o._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===r){a=o;break}a!==e?(c.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},i=n,(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&Je(i.prototype,a),n}(pe);function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tt=window.performance,rt=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this).fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=ve,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n.waitingVideoCC=null,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o=n.prototype;return o.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,c.logger.log("InitPTS for cc: "+r+" found from main: "+n),this.state===Re&&this.tick())},o.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=me):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ge),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ve},o.doTick=function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case Oe:case ye:case Se:break;case ge:this.state=Ee,this.loadedmetadata=!1;break;case me:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=e<i.maxBufferHole?Math.max(2,i.maxBufferHole):i.maxBufferHole,f=V.bufferInfo(o,e,d),h=V.bufferInfo(s,e,d),p=f.len,v=f.end,g=this.fragPrevious,m=Math.min(i.maxBufferLength,i.maxMaxBufferLength),y=Math.max(m,h.len),_=this.audioSwitch,w=this.trackId;if((p<y||_)&&w<a.length){if(void 0===(r=a[w].details)){this.state=Ee;break}if(!_&&this._streamEnded(f,r))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=ke);var b,E=r.fragments,T=E.length,C=E[0].start,S=E[T-1].start+E[T-1].duration;if(_)if(r.live&&!r.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),v=0;else if(v=e,r.PTSKnown&&e<C){if(!(f.end>C||f.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=C+.05}if(r.initSegment&&!r.initSegment.data)b=r.initSegment;else if(v<=C){if(b=E[0],null!==this.videoTrackCC&&b.cc!==this.videoTrackCC&&(b=function(e,t){return z(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(E,this.videoTrackCC)),r.live&&b.loadIdx&&b.loadIdx===this.fragLoadIdx){var k=f.nextStart?f.nextStart:C;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(k+.05)),void(this.media.currentTime=k+.05)}}else{var O,R=i.maxFragLookUpTolerance,A=g?E[g.sn-E[0].sn+1]:void 0;v<S?(v>S-R&&(R=0),O=A&&!ce(v,R,A)?A:z(E,(function(e){return ce(v,R,e)}))):O=E[T-1],O&&(b=O,C=O.start,g&&b.level===g.level&&b.sn===g.sn&&(b.sn<r.endSN?(b=E[b.sn+1-r.startSN],this.fragmentTracker.getState(b)!==j&&c.logger.log("SN just loaded, load next one: "+b.sn)):b=null))}b&&(b.encrypted?(c.logger.log("Loading key for "+b.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+w),this.state=_e,n.trigger(l.default.KEY_LOADING,{frag:b})):(this.fragCurrent=b,(_||this.fragmentTracker.getState(b)===B)&&(c.logger.log("Loading "+b.sn+", cc: "+b.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+w+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+v.toFixed(3)),"initSegment"!==b.sn&&(this.startFragRequested=!0),Object(u.isFiniteNumber)(b.sn)&&(this.nextLoadPosition=b.start+b.duration),n.trigger(l.default.FRAG_LOADING,{frag:b}),this.state=we)))}break;case Ee:(t=this.tracks[this.trackId])&&t.details&&(this.state=me);break;case be:var x=tt.now(),L=this.retryDate,D=(o=this.media)&&o.seeking;(!L||x>=L||D)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=me);break;case Re:var P=this.waitingFragment;if(P){var M=P.frag.cc;if(void 0!==this.initPTS[M])this.waitingFragment=null,this.state=we,this.onFragLoaded(P);else if(this.videoTrackCC!==this.waitingVideoCC)c.logger.log("Waiting fragment cc ("+M+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var I=V.bufferInfo(this.mediaBuffer,this.media.currentTime,i.maxBufferHole);ce(I.end,i.maxFragLookUpTolerance,P.frag)<0&&(c.logger.log("Waiting fragment cc ("+M+") @ "+P.frag.start+" cancelled because another fragment at "+I.end+" is needed"),this.clearWaitingFragment())}}else this.state=me}},o.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=me)},o.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},o.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},o.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},o.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=ye,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=me),this.tick()},o.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],i=n.details,a=t.totalduration,o=0;if(c.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||i&&i.live?i&&t.fragments.length>0?(re(i,t),o=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+o.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(u.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Ee&&(this.state=me),this.tick()},o.onKeyLoaded=function(){this.state===_e&&(this.state=me,this.tick())},o.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===we&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,o=t.level,s=t.sn,u=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",f=this.stats=e.stats;if("initSegment"===s)this.state=me,f.tparsed=f.tbuffered=tt.now(),i.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:f,frag:t,id:"audio"}),this.tick();else{this.state=Te,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var h=this.initPTS[u],p=i.initSegment?i.initSegment.data:[];void 0!==h?(this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.demuxer.push(e.payload,p,d,null,t,a,!1,h)):(c.logger.log("Unknown video PTS for cc "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=Re)}}this.fragLoadError=0},o.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te){var n,i=e.tracks;if(i.video&&delete i.video,n=i.audio){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,i),c.logger.log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var a=n.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,o))}this.tick()}}},o.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===Te){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(v.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(a.details,r,e.startPTS,e.endPTS);var d=this.media,f=!1;if(this.audioSwitch)if(d&&d.readyState){var h=d.currentTime;c.logger.log("switching audio track : currentTime:"+h),h>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=Se,o.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0,this.audioSwitch=!1,o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:i});var p=this.pendingData;if(!p)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})})),!f&&p.length&&(p.forEach((function(e){t.state===Te&&(t.pendingBuffering=!0,t.hls.trigger(l.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},o.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te&&(this.stats.tparsed=tt.now(),this.state=Ce,this._checkAppendedParsed())},o.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},o.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},o.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==Te&&t!==Ce||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},o._checkAppendedParsed=function(){if(!(this.state!==Ce||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=tt.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&c.logger.log("audio buffered : "+ae(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=me}this.tick()}},o.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var a=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=tt.now()+a,this.state=be}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Oe}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Oe&&(this.state=e.fatal?Oe:me,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Te||this.state===Ce)){var o=this.mediaBuffer,u=this.media.currentTime;if(o&&V.isBuffered(o,u)&&V.isBuffered(o,u+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=me}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Se,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},o.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=Ce):(this.state=me,this.fragPrevious=null,this.tick())},i=n,(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&et(i.prototype,a),n}(xe),nt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function i(t,i,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var u="",l=!1,c=t,d=i,f=a,h=null,p="",v=!0,g="auto",m="start",y=50,_="middle",w=50,b="middle";Object.defineProperty(o,"id",n({},s,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",n({},s,{get:function(){return l},set:function(e){l=!!e}})),Object.defineProperty(o,"startTime",n({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},s,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},s,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},s,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},s,{get:function(){return p},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},s,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},s,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},s,{get:function(){return m},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},s,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},s,{get:function(){return _},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},s,{get:function(){return w},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},s,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),o.displayState=void 0}return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),it=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function at(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new it,this.regionList=[]}function ot(){this.values=Object.create(null)}function st(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(r);2===o.length&&t(o[0],o[1])}}ot.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ut=new nt(0,0,0),lt="middle"===ut.align?"middle":"center";function ct(e,t,r){var n=e;function i(){var t=function(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var n=new ot;st(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",lt,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",lt,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",lt,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===ut.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",lt);var a=n.get("position","auto");"auto"===a&&50===ut.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function dt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}at.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=dt(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var i=(n=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:n=r(),t.state){case"HEADER":/:/.test(n)?st(n,(function(e,t){}),/:/):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new nt(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{ct(n,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var ft=at;function ht(e,t,r,n){for(var i,a,o,s,u,l=[],c=window.VTTCue||TextTrackCue,d=0;d<n.rows.length;d++)if(o=!0,s=0,u="",!(i=n.rows[d]).isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&o?s++:(u+=i.chars[f].uchar,o=!1);i.cueStartTime=t,t===r&&(r+=1e-4),a=new c(t,r,dt(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),l.push(a),e&&e.addCue(a)}return l}var pt,vt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},gt=function(e){var t=e;return vt.hasOwnProperty(e)&&(t=vt[e]),String.fromCharCode(t)},mt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},yt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},_t={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},wt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},bt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(pt||(pt={}));var Et=function(){function e(){this.time=null,this.verboseLevel=pt.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&c.logger.log(this.time+" ["+e+"] "+t)},e}(),Tt=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},Ct=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),St=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Ct(t,r,n,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),kt=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new St);this.logger=e,this.pos=0,this.currPenState=new Ct}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(pt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(pt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=gt(e);this.pos>=100?this.logger.log(pt.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Ot=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new kt(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(pt.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(pt.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(i.rows[n+s])}}this.currRow=t;var u=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,c=Math.max(l-1,0);u.setCursor(e.indent),e.color=u.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(pt.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(pt.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(pt.INFO,"Rolling up")}else this.logger.log(pt.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Rt=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ot(r),this.nonDisplayedMemory=new Ot(r),this.lastOutputScreen=new Ot(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(pt.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(pt.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(pt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(pt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(pt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(pt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(pt.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(pt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(pt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(pt.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(pt.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(pt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(pt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(pt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(pt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(pt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(pt.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(pt.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function At(e,t,r){r.a=e,r.b=t}function xt(e,t,r){return r.a===e&&r.b===t}var Lt=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new Et;this.channels=[null,new Rt(e,t,n),new Rt(e+1,r,n)],this.cmdHistory={a:null,b:null},this.logger=n}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,i,a=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(this.logger.log(pt.DATA,"["+Tt([t[o],t[o+1]])+"] -> ("+Tt([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(pt.WARNING,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(pt.WARNING,"Couldn't parse cleaned data "+Tt([n,i])+" orig: "+Tt([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(xt(e,t,r))return At(null,null,r),this.logger.log(pt.DEBUG,"Repeated command ("+Tt([e,t])+") is dropped"),!0;var n=20===e||21===e||23===e?1:2,i=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),At(e,t,r),this.currentChannel=n,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(pt.ERROR,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(pt.DEBUG,"MIDROW ("+Tt([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,n=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(xt(e,t,n))return At(null,null,n),!0;var i=e<=23?1:2;r=t>=64&&t<=95?1===i?mt[e]:_t[e]:1===i?yt[e]:wt[e];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(r,t)),At(e,t,n),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){var a;a=17===i?t+80:18===i?t+112:t+144,this.logger.log(pt.INFO,"Special char '"+gt(a)+"' in channel "+r),n=[a]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var o=Tt(n);this.logger.log(pt.DEBUG,"Char codes =  "+o.join(",")),At(e,t,this.cmdHistory)}return n},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=bt[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));var i=e<=23?1:2;return this.channels[i].setBkgData(n),At(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}(),Dt=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Pt=function(e,t,r){return e.substr(r||0,t.length)===t},Mt=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},It=function(e,t,r,n,i,a){var o,s=Object(Ue.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),l="00:00.000",c=0,d=0,f=0,h=[],p=!0,v=!1,g=new ft;g.oncue=function(e){var t=r[n],i=r.ccOffset;t&&t.new&&(void 0!==d?i=r.ccOffset=t.start:function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC];e.presentationOffset=r}(r,n,f)),f&&(i=f-r.presentationOffset),v&&(e.startTime+=i-d,e.endTime+=i-d),e.id=Mt(e.startTime.toString())+Mt(e.endTime.toString())+Mt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&h.push(e)},g.onparsingerror=function(e){o=e},g.onflush=function(){o&&a?a(o):i(h)},s.forEach((function(e){if(p){if(Pt(e,"X-TIMESTAMP-MAP=")){p=!1,v=!0,e.substr(16).split(",").forEach((function(e){Pt(e,"LOCAL:")?l=e.substr(6):Pt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*r[n].start||0)<0&&(t+=8589934592),c-=t,d=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(u.isFiniteNumber)(t)&&Object(u.isFiniteNumber)(r)&&Object(u.isFiniteNumber)(n)&&Object(u.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,(t+=6e4*n)+36e5*i}(l)/1e3,f=c/9e4}catch(e){v=!1,o=e}return}""===e&&(p=!1)}g.parse(e+"\n")})),g.flush()};function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var Ft=function(e){var t,r;function n(t){var r;if((r=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.FRAG_DECRYPTED,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.FRAG_LOADED,l.default.INIT_PTS_FOUND)||this).media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.captionsTracks={},r.nonNativeCaptionsTracks={},r.captionsProperties=void 0,r.cea608Parser1=void 0,r.cea608Parser2=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode},textTrack3:{label:r.config.captionsTextTrack3Label,languageCode:r.config.captionsTextTrack3LanguageCode},textTrack4:{label:r.config.captionsTextTrack4Label,languageCode:r.config.captionsTextTrack4LanguageCode}},r.config.enableCEA708Captions){var n=new Dt(Ut(r),"textTrack1"),i=new Dt(Ut(r),"textTrack2"),a=new Dt(Ut(r),"textTrack3"),o=new Dt(Ut(r),"textTrack4");r.cea608Parser1=new Lt(1,n,i),r.cea608Parser2=new Lt(3,a,o)}return r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.addCues=function(e,t,r,n,i){for(var a,o,s,u,c=!1,d=i.length;d--;){var f=i[d],h=(a=f[0],o=f[1],s=t,u=r,Math.min(o,u)-Math.max(a,s));if(h>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],r),c=!0,h/(r-t)>.5))return}if(c||i.push([t,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,r,n);else{var p=this.Cues.newCue(null,t,r,n);this.hls.trigger(l.default.CUES_PARSED,{type:"captions",cues:p,track:e})}},i.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,i=e.initPTS,a=this.unparsedVttFrags;"main"===n&&(this.initPTS[r.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},i.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},i.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},i.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,o=i.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,Fe(r[e]),Be(r[e],n);else{var u=this.createTextTrack("captions",a,o);u&&(u[e]=!0,r[e]=u)}}},i.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(l.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},i.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},i.destroy=function(){e.prototype.destroy.call(this)},i.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},i.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Fe(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},i._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Fe(t[r])}},i.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=e.subtitles||[],n=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var n;if(r<i.length){for(var a=null,o=0;o<i.length;o++)if(Bt(i[o],e)){a=i[o];break}a&&(n=a)}n||(n=t.createTextTrack("subtitles",e.name,e.lang)),e.default?n.mode=t.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",t.textTracks.push(n)}))}else if(!n&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(l.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var r=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(r){var n="textTrack"+r[1],i=t.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}}))},i.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser1,i=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var c=t.sn;t.sn!==o+1&&n&&i&&(n.reset(),i.reset()),this.lastSn=c}else if("subtitle"===t.type)if(r.byteLength){if(!Object(u.isFiniteNumber)(a[t.cc]))return s.push(e),void(a.length&&this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var d=t.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(t,r)}else this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},i._parseVTTs=function(e,t){var r=this,n=this.hls,i=this.prevCC,a=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:i,new:!0},this.prevCC=e.cc),It(t,this.initPTS[e.cc],o,e.cc,(function(t){if(r.config.renderTextTracksNatively){var i=a[e.level];if("disabled"===i.mode)return void n.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){c.logger.debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}}))}else{var o=r.tracks[e.level].default?"default":"subtitles"+e.level;n.trigger(l.default.CUES_PARSED,{type:"subtitles",cues:t,track:o})}n.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){c.logger.log("Failed to parse VTT cue: "+t),n.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},i.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(u.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},i.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var n=0;n<e.samples.length;n++){var i=e.samples[n].bytes;if(i){var a=this.extractCea608Data(i);t.addData(e.samples[n].pts,a[0]),r.addData(e.samples[n].pts,a[1])}}},i.extractCea608Data=function(e){for(var t=31&e[0],r=2,n=[[],[]],i=0;i<t;i++){var a=e[r++],o=127&e[r++],s=127&e[r++],u=3&a;0===o&&0===s||0!=(4&a)&&(0!==u&&1!==u||(n[u].push(o),n[u].push(s)))}return n},n}(f);function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var Ht,zt=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADED,l.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o=n.prototype;return o.destroy=function(){f.prototype.destroy.call(this)},o.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(u.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},o.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(u.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),jt(this.media.textTracks).forEach((function(e){Fe(e)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(l.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},o.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,a=this.tracks,o=a[i];if(r>=a.length||r!==i||!o||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+r+" loaded"),n.live){var s=ie(o.details,n,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},o.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},o.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},o._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},o._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(c.logger.log("Loading subtitle track "+e),r.trigger(l.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},o._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=jt(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var a=i[n];a&&(a.mode="disabled")}var o=i[e];o&&(o.mode=r?"showing":"hidden")}},o._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(u.isFiniteNumber)(e)||e<-1||e>=r.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(l.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},o._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=jt(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},i=n,(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Nt(i.prototype,a),n}(f),Vt=r("./src/crypt/decrypter.js"),Kt=window.performance,Gt=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.ERROR,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED,l.default.LEVEL_UPDATED)||this).fragmentTracker=r,n.config=t.config,n.state=ve,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new Vt.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.startLoad=function(){this.stopLoad(),this.state=me;var e=this.tracks[this.currentTrackId];e&&e.details&&(this.setInterval(500),this.tick())},i.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=me,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=t.start,o=0;o<n.length;o++)if(a>=n[o].start&&a<=n[o].end){i=n[o];break}var s=t.start+t.duration;i?i.end=s:(i={start:a,end:s},n.push(i))}}},i.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=me},i.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ve)},i.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=me)},i.onSubtitleTracksUpdated=function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},i.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,a=i[n];t>=i.length||t!==n||!a||(r.live&&function(e,t,r){void 0===r&&(r=0);var n=-1;ne(e,t,(function(e,t,r){t.start=e.start,n=r}));var i=t.fragments;if(n<0)i.forEach((function(e){e.start+=r}));else for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},i.onKeyLoaded=function(){this.state===_e&&(this.state=me)},i.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,i=this.hls;if(this.state===we&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=Kt.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=Kt.now();i.trigger(l.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},i.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},i.doTick=function(){if(this.media)switch(this.state){case me:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,u=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=V.bufferedInfo(this._getBuffered(),n.currentTime,o),f=d.end,h=d.len,p=i[t].details,v=p.fragments,g=v.length,m=v[g-1].start+v[g-1].duration;if(h>u)return;var y=this.fragPrevious;f<m?(y&&p.hasProgramDateTime&&(a=ue(v,y.endProgramDateTime,s)),a||(a=le(y,v,f,s))):a=v[g-1],a&&a.encrypted?(c.logger.log("Loading key for "+a.sn),this.state=_e,this.hls.trigger(l.default.KEY_LOADING,{frag:a})):a&&r.getState(a)===B&&(this.fragCurrent=a,this.state=we,this.hls.trigger(l.default.FRAG_LOADING,{frag:a}))}else this.state=me},i.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,e.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){if(this.fragCurrent){var e=this.media?this.media.currentTime:0,t=this.config.maxFragLookUpTolerance,r=this.fragCurrent.start-t,n=this.fragCurrent.start+this.fragCurrent.duration+t;(e<r||e>n)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=me,this.tick())}},n}(xe);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Ht||(Ht={}));var Xt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wt=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHED,l.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(e){if(c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!r.mediaKeysPromise)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){r._media&&(r._attemptSetMediaKeys(t),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};r.mediaKeysPromise.then(t).catch(t)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=t.config.drmSystemOptions,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,o=n.prototype;return o.getLicenseServerUrl=function(e){switch(e){case Ht.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},o._attemptKeySystemAccess=function(e,t,r){var n=this,i=function(e,t,r,n){if(e===Ht.WIDEVINE)return function(e,t,r){var n={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[n]}(t,r,n);throw new Error("Unknown key-system: "+e)}(e,t,r,this._drmSystemOptions);c.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=a.then((function(t){return n._onMediaKeySystemAccessObtained(e,t)})),a.catch((function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},o._onMediaKeySystemAccessObtained=function(e,t){var r=this;c.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n);var i=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return n.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated(),t}));return i.catch((function(e){c.logger.error("Failed to create media-keys:",e)})),i},o._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},o._onNewMediaKeySession=function(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},o._onKeySessionMessage=function(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},o._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},o._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var i=n.mediaKeysSession;if(!i)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){c.logger.debug("Key-session generation succeeded")})).catch((function(e){c.logger.error("Error generating key-session request:",e),r.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},o._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},o._onLicenseRequestReadyStageChange=function(e,t,r,n){if(4===e.readyState)if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),n(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(r,n)}},o._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===Ht.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},o._requestLicense=function(e,t){c.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);c.logger.log("Sending license request to URL: "+n);var a=this._generateLicenseRequestChallenge(r,e);i.send(a)}catch(e){c.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},o.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},o.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},o.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(Ht.WIDEVINE,t,r)}},i=n,(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Zt(i.prototype,a),n}(f);function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){Qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jt=Yt(Yt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Qe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ke,bufferController:Xe,capLevelController:We,fpsController:Ye,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Xt,testBandwidth:!0},{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Gt,subtitleTrackController:zt,timelineController:Ft,audioStreamController:rt,audioTrackController:$e,emeController:Wt});function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ir(e,t,r){return t&&nr(e.prototype,t),r&&nr(e,r),e}var ar=function(e){var t,r;function n(t){var r;void 0===t&&(t={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var i=n.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=er(er({},i),t);var a=rr(r).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(a.debug),r._autoLevelCapping=-1;var o=r.abrController=new a.abrController(rr(r)),s=new a.bufferController(rr(r)),u=r.capLevelController=new a.capLevelController(rr(r)),l=new a.fpsController(rr(r)),d=new M(rr(r)),f=new I(rr(r)),h=new U(rr(r)),p=new Ne(rr(r)),v=r.levelController=new Ie(rr(r)),g=new H(rr(r)),m=[v,r.streamController=new Pe(rr(r),g)],y=a.audioStreamController;y&&m.push(new y(rr(r),g)),r.networkControllers=m;var _=[d,f,h,o,s,u,l,p,g];if(y=a.audioTrackController){var w=new y(rr(r));r.audioTrackController=w,_.push(w)}if(y=a.subtitleTrackController){var b=new y(rr(r));r.subtitleTrackController=b,m.push(b)}if(y=a.emeController){var E=new y(rr(r));r.emeController=E,_.push(E)}return(y=a.subtitleStreamController)&&m.push(new y(rr(r),g)),(y=a.timelineController)&&_.push(new y(rr(r))),r.coreComponents=_,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.isSupported=function(){return function(){var e=Z();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}()},ir(n,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return l.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return n.defaultConfig?n.defaultConfig:Jt},set:function(e){n.defaultConfig=e}}]);var i=n.prototype;return i.destroy=function(){c.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(e){c.logger.log("attachMedia"),this.media=e,this.trigger(l.default.MEDIA_ATTACHING,{media:e})},i.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(l.default.MANIFEST_LOADING,{url:e})},i.startLoad=function(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},i.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},i.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},i.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},ir(n,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),n}(q);ar.defaultConfig=void 0},"./src/polyfills/number.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isFiniteNumber",(function(){return n})),r.d(t,"MAX_SAFE_INTEGER",(function(){return i}));var n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";function n(){return"undefined"==typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return n}))},"./src/utils/logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",(function(){return c})),r.d(t,"logger",(function(){return d}));var n=r("./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(e,t){return"["+e+"] > "+t}var u=Object(n.getSelfScope)();function l(e){var t=u.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=s(e,n[0])),t.apply(u.console,n)}:i}var c=function(e){if(u.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):l(t)}))}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},d=o}}).default},e.exports=n())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={getBrowserVersion:function(){var e=navigator.userAgent;if(e.toLowerCase().indexOf("mobile")>-1)return"Unknown";if(e.indexOf("Firefox")>-1)return"Firefox "+e.match(/firefox\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("Edge")>-1)return"Edge "+e.match(/edge\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("rv:11")>-1)return"IE 11";if(e.indexOf("Opera")>-1||e.indexOf("OPR")>-1){if(e.indexOf("Opera")>-1)return"Opera "+e.match(/opera\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("OPR")>-1)return"Opera "+e.match(/opr\/[\d.]+/gi)[0].match(/[\d]+/)[0]}else{if(e.indexOf("Chrome")>-1)return"Chrome "+e.match(/chrome\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("Safari")>-1)return"Safari "+e.match(/safari\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(!(e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1))return"Unknown";if(e.indexOf("MSIE")>-1)return"IE "+e.match(/msie [\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("Trident")>-1){var t=e.match(/trident\/[\d.]+/gi)[0].match(/[\d]+/)[0];return"IE "+(parseInt(t)+4)}}},parseUrl:function(e){var t=e.split("?")[1],r={};return t&&t.split("&").forEach((function(e){e=e.split("="),r[e[0]]=decodeURIComponent(e[1])})),r},isBase64:function(e){return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)},isRelativeURL:function(e){return!/^(?:[a-z]+:)?\/\//.test(e)},getAbsoluteURL:function(e){var t=new Image;return t.src=e,t.src},checkMediaSourceSupport:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource;return e&&"function"==typeof e.isTypeSupported},offInDestroy:function(e,t,r,n){e.once(n,(function i(){e.off(t,r),e.off(n,i)}))},on:function(e,t,r,i){i?(e.on(t,r),n.offInDestroy(e,t,r,i)):e.on(t,(function n(i){r(i),e.off(t,n)}))},once:function(e,t,r,i){i?(e.once(t,r),n.offInDestroy(e,t,r,i)):e.once(t,(function n(i){r(i),e.off(t,n)}))}};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.url,i=t.method,a=void 0===i?"GET":i,o=t.type,s=void 0===o?"arraybuffer":o,u=t.timeout,l=void 0===u?1e4:u,c=t.data,d=void 0===c?{}:c;return n(this,e),new Promise((function(e,t){var n=new window.XMLHttpRequest,i=a.toUpperCase(),o=[];for(var u in s&&(n.responseType=s),l&&(n.timeout=l),d)o.push("k="+d[u]);if(n.onload=function(){200===n.status||206===n.status?e(n):t(n)},n.onerror=function(){t(n)},n.ontimeout=function(){t(n)},n.onabort=function(){t(n)},"GET"===i)n.open(i,""+r),n.send();else{if("post"!==i)throw new Error("xhr "+i+" is not supported");n.open(i,r),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(o.join("&"))}}))},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeID=null,this.func=null}return n(e,[{key:"repeat",value:function(e,t){var r=this;null===this.func&&(this.func=e),this.func===e&&(this.timeID=setTimeout((function(){e(),r.repeat(e,t)}),t))}},{key:"clear",value:function(){clearTimeout(this.timeID)}}]),e}();t.default=i,e.exports=t.default},function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t,r){"use strict";var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,r){"use strict";var n=r(12)("wks"),i=r(13),a=r(0).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){"use strict";var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,r){"use strict";var n=r(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":n(e))?null!==e:"function"==typeof e}},function(e,t,r){"use strict";var n=r(6);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";e.exports=!r(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){"use strict";var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,r){"use strict";var n=r(3),i=r(26),a=r(27),o=Object.defineProperty;t.f=r(7)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){"use strict";e.exports=!1},function(e,t,r){"use strict";var n=r(8),i=r(1)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,r){"use strict";var n=r(2),i=r(0),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(10)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){"use strict";var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,r){"use strict";var n=r(9),i=r(28);e.exports=r(7)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";var n=r(4),i=r(0).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){"use strict";var n=r(0),i=r(14),a=r(18),o=r(13)("src"),s=r(29),u=(""+s).split("toString");r(2).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var l="function"==typeof r;l&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(l&&(a(r,o)||i(r,o,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},function(e,t,r){"use strict";var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";var n,i,a,o=r(5),s=r(38),u=r(39),l=r(16),c=r(0),d=c.process,f=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,g=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},_=function(e){y.call(e.data)};f&&h||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},h=function(e){delete m[e]},"process"==r(8)(d)?n=function(e){d.nextTick(o(y,e,1))}:v&&v.now?n=function(e){v.now(o(y,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=_,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",_,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,r){"use strict";var n=r(6);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t,r){e.exports=r(23)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(24);var n,i=(n=r(48))&&n.__esModule?n:{default:n};t.default={url:i.default},e.exports=t.default},function(e,t,r){"use strict";var n,i,a,o,s=r(10),u=r(0),l=r(5),c=r(11),d=r(25),f=r(4),h=r(6),p=r(30),v=r(31),g=r(37),m=r(20).set,y=r(40)(),_=r(21),w=r(41),b=r(42),E=r(43),T=u.TypeError,C=u.process,S=C&&C.versions,k=S&&S.v8||"",O=u.Promise,R="process"==c(C),A=function(){},x=i=_.f,L=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[r(1)("species")]=function(e){e(A,A)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==k.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(i||(2==e._h&&U(e),e._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&(c.exit(),o=!0)),r===t.promise?l(T("Promise-chain cycle")):(a=D(r))?a.call(r,u,l):u(r)):l(n)}catch(e){c&&!o&&c.exit(),l(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&M(e)}))}},M=function(e){m.call(u,(function(){var t,r,n,i=e._v,a=I(e);if(a&&(t=w((function(){R?C.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=R||I(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},I=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(e){m.call(u,(function(){var t;R?C.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},F=function e(t){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw T("Promise can't be resolved itself");(r=D(t))?y((function(){var i={_w:n,_d:!1};try{r.call(t,l(e,i,1),l(B,i,1))}catch(e){B.call(i,e)}})):(n._v=t,n._s=1,P(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};L||(O=function(e){p(this,O,"Promise","_h"),h(e),n.call(this);try{e(l(F,this,1),l(B,this,1))}catch(e){B.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(44)(O.prototype,{then:function(e,t){var r=x(g(this,O));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=R?C.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&P(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=l(F,e,1),this.reject=l(B,e,1)},_.f=x=function(e){return e===O||e===o?new a(e):i(e)}),d(d.G+d.W+d.F*!L,{Promise:O}),r(45)(O,"Promise"),r(46)("Promise"),o=r(2).Promise,d(d.S+d.F*!L,"Promise",{reject:function(e){var t=x(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!L),"Promise",{resolve:function(e){return E(s&&this===o?O:this,e)}}),d(d.S+d.F*!(L&&r(47)((function(e){O.all(e).catch(A)}))),"Promise",{all:function(e){var t=this,r=x(t),n=r.resolve,i=r.reject,a=w((function(){var r=[],a=0,o=1;v(e,!1,(function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then((function(e){u||(u=!0,r[s]=e,--o||n(r))}),i)})),--o||n(r)}));return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=x(t),n=r.reject,i=w((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(14),o=r(17),s=r(5),u=function e(t,r,u){var l,c,d,f,h=t&e.F,p=t&e.G,v=t&e.P,g=t&e.B,m=p?n:t&e.S?n[r]||(n[r]={}):(n[r]||{}).prototype,y=p?i:i[r]||(i[r]={}),_=y.prototype||(y.prototype={});for(l in p&&(u=r),u)d=((c=!h&&m&&void 0!==m[l])?m:u)[l],f=g&&c?s(d,n):v&&"function"==typeof d?s(Function.call,d):d,m&&o(m,l,d,t&e.U),y[l]!=d&&a(y,l,f),v&&_[l]!=d&&(_[l]=d)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){"use strict";e.exports=!r(7)&&!r(15)((function(){return 7!=Object.defineProperty(r(16)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){"use strict";e.exports=r(12)("native-function-to-string",Function.toString)},function(e,t,r){"use strict";e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){"use strict";var n=r(5),i=r(32),a=r(33),o=r(3),s=r(34),u=r(36),l={},c={},d=e.exports=function(e,t,r,d,f){var h,p,v,g,m=f?function(){return e}:u(e),y=n(r,d,t?2:1),_=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(a(m)){for(h=s(e.length);h>_;_++)if((g=t?y(o(p=e[_])[0],p[1]):y(e[_]))===l||g===c)return g}else for(v=m.call(e);!(p=v.next()).done;)if((g=i(v,y,p.value,t))===l||g===c)return g};d.BREAK=l,d.RETURN=c},function(e,t,r){"use strict";var n=r(3);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){"use strict";var n=r(19),i=r(1)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){"use strict";var n=r(35),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){"use strict";var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,r){"use strict";var n=r(11),i=r(1)("iterator"),a=r(19);e.exports=r(2).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){"use strict";var n=r(3),i=r(6),a=r(1)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||null==(r=n(o)[a])?t:i(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){"use strict";var n=r(0).document;e.exports=n&&n.documentElement},function(e,t,r){"use strict";var n=r(0),i=r(20).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(8)(o);e.exports=function(){var e,t,r,l=function(){var n,i;for(u&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var d=!0,f=document.createTextNode("");new a(l).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){"use strict";e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){"use strict";var n=r(0).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){"use strict";var n=r(3),i=r(4),a=r(21);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(17);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){"use strict";var n=r(9).f,i=r(18),a=r(1)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){"use strict";var n=r(0),i=r(9),a=r(7),o=r(1)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(1)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){try{e=JSON.parse(n.default.base64decode(e))}catch(e){return Promise.reject("base64 decode error")}var a=[];for(var o in r)a.push(o+"="+r[o]);var s="//"+t+"?"+e.GetPlayInfoToken+"&ssl=true";return a.length>0&&(s+="&"+a.join("&")),new i.default({type:"json",method:"GET",url:s}).then((function(e){return e.response&&e.response.Result?e.response.Result:e.response||e}))}return Promise.reject("vid, host and token can't be empty")};var n=a(r(49)),i=a(r(50));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={base64decode:function(e){var t,r,n,i,a,o,s,u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(o=e.length,a=0,s="";a<o;){do{t=u[255&e.charCodeAt(a++)]}while(a<o&&-1===t);if(-1===t)break;do{r=u[255&e.charCodeAt(a++)]}while(a<o&&-1===r);if(-1===r)break;s+=String.fromCharCode(t<<2|(48&r)>>4);do{if(61==(n=255&e.charCodeAt(a++)))return s;n=u[n]}while(a<o&&-1===n);if(-1===n)break;s+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(61==(i=255&e.charCodeAt(a++)))return s;i=u[i]}while(a<o&&-1===i);if(-1===i)break;s+=String.fromCharCode((3&n)<<6|i)}return s}};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.url,i=t.method,a=void 0===i?"GET":i,o=t.type,s=void 0===o?"arraybuffer":o,u=t.data,l=void 0===u?{}:u,c=t.headers,d=void 0===c?{}:c;return n(this,e),new Promise((function(e,t){var n=new window.XMLHttpRequest,i=a.toUpperCase(),o=[];for(var u in l)o.push(u+"="+l[u]);if("GET"!==i)throw new Error("xhr "+i+" is not supported");for(var c in n.open(i,""+r),s&&(n.responseType=s),d)n.setRequestHeader(c,""+d[c]);n.send(),n.onload=function(){200===n.status||206===n.status?e(n):t(n)},n.onerror=function(){t(n)}}))},e.exports=t.default}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TIMESTAMP=5e9,t.MIN_EXPIRE_INTERVAL=300}]))},15121:function(e,t,r){var n;e.exports=(n=r(25427),function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=24)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=o(r(1)),a=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headSize=8,this.size=0,this.type="",this.subBox=[],this.start=-1}return n(e,[{key:"readHeader",value:function(e){if(this.start=e.position,this.size=e.readUint32(),this.type=String.fromCharCode(e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()),1===this.size)this.size=e.readUint64();else if(0===this.size&&"mdat"!==this.type)throw new a.default("parse","",{line:19,handle:"[Box] readHeader",msg:"parse mp4 mdat box failed"});if("uuid"===this.type)for(var t=[],r=0;r<16;r++)t.push(e.readUint8());"pssh"===this.type&&(this.version=e.readUint8(),this.flags=e.readUint8())}},{key:"readBody",value:function(t){var r=this.size-t.position+this.start,n=this.type;this.data=t.buffer.slice(t.position,t.position+r),t.position+=this.data.byteLength;var i=void 0;(i=e.containerBox.find((function(e){return e===n}))?e.containerParser:e[n])&&i instanceof Function&&i.call(this)}},{key:"read",value:function(e){this.readHeader(e),this.readBody(e)}}],[{key:"containerParser",value:function(){for(var t=new i.default(this.data),r=t.buffer.byteLength;t.position<r;){var n=new e;n.readHeader(t),this.subBox.push(n),n.readBody(t)}delete this.data,t=null}}]),e}();s.containerBox=["moov","trak","edts","mdia","minf","dinf","stbl","mvex","moof","traf","mfra","sinf","schi"],t.default=s,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=(n=r(5))&&n.__esModule?n:{default:n},o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof ArrayBuffer))throw new a.default("parse","",{line:9,handle:"[Stream] constructor",msg:"data is valid"});this.buffer=t,this.dataview=new DataView(t),this.dataview.position=0}return i(e,[{key:"skip",value:function(t){for(var r=Math.floor(t/4),n=t%4,i=0;i<r;i++)e.readByte(this.dataview,4);n>0&&e.readByte(this.dataview,n)}},{key:"readString",value:function(e){if(this.position+e<=this.buffer.byteLength){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this.readUint8());return t}throw new Error("Not_enough_bytes_in_buffer")}},{key:"readUint8Array",value:function(e){for(var t=new Uint8Array(e),r=0;r<e;r++)t[r]=this.readUint8();return t}},{key:"readUint8",value:function(){return e.readByte(this.dataview,1)}},{key:"readUint16",value:function(){return e.readByte(this.dataview,2)}},{key:"readUint24",value:function(){return e.readByte(this.dataview,3)}},{key:"readUint32",value:function(){return e.readByte(this.dataview,4)}},{key:"readUint64",value:function(){return e.readByte(this.dataview,8)}},{key:"readInt8",value:function(){return e.readByte(this.dataview,1,!0)}},{key:"readInt16",value:function(){return e.readByte(this.dataview,2,!0)}},{key:"readInt32",value:function(){return e.readByte(this.dataview,4,!0)}},{key:"position",set:function(e){this.dataview.position=e},get:function(){return this.dataview.position}}],[{key:"readByte",value:function(e,t,r){var n=void 0;switch(t){case 1:n=r?e.getInt8(e.position):e.getUint8(e.position);break;case 2:n=r?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(r)throw new Error("not supported for readByte 3");n=e.getUint8(e.position)<<16,n|=e.getUint8(e.position+1)<<8,n|=e.getUint8(e.position+2);break;case 4:n=r?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(r)throw new a.default("parse","",{line:73,handle:"[Stream] readByte",msg:"not supported for readBody 8"});n=e.getUint32(e.position)<<32,n|=e.getUint32(e.position+4);break;default:n=""}return e.position+=t,n}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={findBox:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.type!==t){if(e&&e.subBox){var i=e.subBox.filter((function(e){return e.type===t}));i.length?i.forEach((function(e){return r.push(e)})):e.subBox.forEach((function(e){return n.findBox(e,t,r)}))}}else r.push(e);return(r=[].concat(r)).length>1?r:r[0]},padStart:function(e,t,r){for(var n=String(r),i=t>>0,a=Math.ceil(i/n.length),o=[],s=String(e);a--;)o.push(n);return o.join("").substring(0,i-s.length)+s},toHex:function(){for(var e=[],t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.forEach((function(t){e.push(n.padStart(Number(t).toString(16),2,0))})),e},sum:function(){for(var e=0,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){e+=t})),e},stscOffset:function(e,t,r){var n=r[t];if(n){var i=Math.floor((t-n.first_sample)/n.samples_per_chunk),a=n.first_sample+i*n.samples_per_chunk;return{chunk_index:n.first_chunk+i,samples_offset:[a,t]}}var o=e.entries.pop();e.entries.push(o);var s=Math.floor((t-o.first_sample)/o.samples_per_chunk);return{chunk_index:o.first_chunk+s,samples_offset:[o.first_sample+o.samples_per_chunk*s,t]}},seekSampleOffset:function(e,t,r,i,a,o){var s=n.stscOffset(e,i+1,o),u=t.entries[s.chunk_index-1]+n.sum.apply(null,r.entries.slice(s.samples_offset[0]-1,s.samples_offset[1]-1))-a;if(void 0===u)throw new Error("result="+u+",stco.length="+t.entries.length+",sum="+n.sum.apply(null,r.entries.slice(0,i)));if(u<0)throw new Error("result="+u+",stco.length="+t.entries.length+",sum="+n.sum.apply(null,r.entries.slice(0,i)));return u},seekSampleTime:function(e,t,r){var n=void 0,i=void 0,a=0,o=0,s=0;return e.entry.every((function(e){return i=e.sampleDuration,r<a+e.sampleCount?(n=o+(r-a)*e.sampleDuration,!1):(a+=e.sampleCount,o+=e.sampleCount*i,!0)})),t&&t[r]&&(s=t[r]),n||(n=o+(r-a)*i),{time:n,duration:i,offset:s}},seekOrderSampleByTime:function(e,t,r){var n=0,i=0,a=0,o=void 0;return e.every((function(e,s){return o=e.sampleCount*e.sampleDuration/t,r<=n+o?(i=a+Math.ceil((r-n)*t/e.sampleDuration),n+=Math.ceil((r-n)*t/e.sampleDuration)*e.sampleDuration/t,!1):(n+=o,a+=e.sampleCount,!0)})),0===i&&a>0&&(i=a-1),{order:i,startTime:n}},seekTrakDuration:function(e,t){var r=n.findBox(e,"stts"),i=0;return r.entry.forEach((function(e){i+=e.sampleCount*e.sampleDuration})),Number(i/t).toFixed(4)},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t},fromHex:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=window.parseInt(e.substr(r,2),16);return t},fromCharCode:function(e){for(var t="",r=0;r<e.length;r+=16e3){var n=e.subarray(r,r+16e3);t+=String.fromCharCode.apply(null,n)}return t},ArrayBufferToString:function(e){for(var t="",r=new Uint8Array(e),n=0;n<r.length;n++)t+=String.fromCharCode(r[n]);return t},Base64ToHex:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),r="",n=0;n<t.length;n++)r+=("0"+t.charCodeAt(n).toString(16)).substr(-2);return r},toBase64:function(e,t){var r=n.fromCharCode(e);t=void 0===t||t;var i=window.btoa(r).replace(/\+/g,"-").replace(/\//g,"_");return t?i:i.replace(/=*$/,"")},toUTF8:function(e){for(var t=encodeURIComponent(e),r=unescape(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n.buffer},bufferToString:function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()},strToBuf:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e[r]+e[r+1],16));return new Uint8Array(t)},formatIV:function(e){var t="";if(e.forEach((function(e){t+=n.bufferToString(e)})),t.length<=32)for(var r=32-t.length,i=0;i<r;i++)t+="0";return t},str2hex:function(e){if(""===e)return"";for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t},parse:function(e){if(!Array.isArray(e)){for(var t=[],r="",n=0;n<e.length;n++)n%2&&(r=e[n-1]+e[n],t.push(parseInt(r,16)),r="");return t}return e.map((function(e){return parseInt(e,16)}))}};t.default=n,n.generateUniqueKey=function(e){var t=e.vid,r=e.start,n=e.end,i=e.mediaType,a=e.definition,o=e.preloadTime;return r=r||0,n=n||0,i=i||"video",t?o?a?t+"#"+i+"#"+a+"#pretime"+o+"#mp4":t+"#"+i+"#pretime"+o+"#mp4":a?t+"#"+i+"#"+a+"#"+r+"#"+n+"#mp4":t+"#"+i+"#"+r+"#"+n+"#mp4":null},n.validateFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e instanceof ArrayBuffer){try{if(2===t.length){var r=t[1]-t[0]+1;if(e.byteLength!==r)return}}catch(e){return console.error(e),!1}return!0}return!1},n.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},n.getBufferSplits=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e5;if(t-e-r<r/2||!t)return[[e,t]];for(var n=[];e<t;){var i=e+r;(i>t||t-i<r/2)&&(i=t),n.push([e,i]),e=i+1}return n},n.nowTime=function(){try{return parseInt(performance.now(),10)}catch(e){return(new Date).getTime()}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=t.Base=function(){function e(){s(this,e)}return i(e,[{key:"mixIn",value:function(e){return Object.assign(this,e)}},{key:"clone",value:function(){var e=new this.constructor;return Object.assign(e,this),e}}],[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(this,[null].concat(t)))}}]),e}(),l=t.WordArray=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*e.length;s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=e;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){for(var o=i.byteLength,u=[],l=0;l<o;l+=1)u[l>>>2]|=i[l]<<24-l%4*8;n.words=u,n.sigBytes=o}else n.words=e,n.sigBytes=r;return n}return o(t,e),i(t,[{key:"toString",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:c).stringify(this)}},{key:"concat",value:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<i;a+=1){var o=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this}},{key:"clamp",value:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}},{key:"clone",value:function(){var e=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.words=this.words.slice(0),e}}],[{key:"random",value:function(e){for(var r,n=[],i=function(e){var t=e,r=987654321,n=4294967295;return function(){var e=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return e/=4294967296,(e+=.5)*(Math.random()>.5?1:-1)}},a=0;a<e;a+=4){var o=i(4294967296*(r||Math.random()));r=987654071*o(),n.push(4294967296*o()|0)}return new t(n,e)}}]),t}(u),c=t.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=1){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l(r,t/2)}},d=t.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=1){var a=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l(r,t)}},f=t.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=t.BufferedBlockAlgorithm=function(e){function t(){s(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._minBufferSize=0,e}return o(t,e),i(t,[{key:"reset",value:function(){this._data=new l,this._nDataBytes=0}},{key:"_append",value:function(e){var t=e;"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}},{key:"_process",value:function(e){var t=void 0,r=this._data,n=this.blockSize,i=r.words,a=r.sigBytes,o=a/(4*n),s=(o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0))*n,u=Math.min(4*s,a);if(s){for(var c=0;c<s;c+=n)this._doProcessBlock(i,c);t=i.splice(0,s),r.sigBytes-=u}return new l(t,u)}},{key:"clone",value:function(){var e=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e._data=this._data.clone(),e}}]),t}(u),p=(t.Hasher=function(e){function t(e){s(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.blockSize=16,r.cfg=Object.assign(new u,e),r.reset(),r}return o(t,e),i(t,[{key:"reset",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this._doReset()}},{key:"update",value:function(e){return this._append(e),this._process(),this}},{key:"finalize",value:function(e){return e&&this._append(e),this._doFinalize()}}],[{key:"_createHelper",value:function(e){return function(t,r){return new e(r).finalize(t)}}},{key:"_createHmacHelper",value:function(e){return function(t,r){return new p(e,r).finalize(t)}}}]),t}(h),t.HMAC=function(e){function t(e,r){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=new e;n._hasher=i;var o=r;"string"==typeof o&&(o=f.parse(o));var u=i.blockSize,l=4*u;o.sigBytes>l&&(o=i.finalize(r)),o.clamp();var c=o.clone();n._oKey=c;var d=o.clone();n._iKey=d;for(var h=c.words,p=d.words,v=0;v<u;v+=1)h[v]^=1549556828,p[v]^=909522486;return c.sigBytes=l,d.sigBytes=l,n.reset(),n}return o(t,e),i(t,[{key:"reset",value:function(){var e=this._hasher;e.reset(),e.update(this._iKey)}},{key:"update",value:function(e){return this._hasher.update(e),this}},{key:"finalize",value:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}]),t}(u))},function(e,t,r){"use strict";var n,i,a,o,s,u,l,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=r(30),f=r(47),h=Function.prototype.apply,p=Function.prototype.call,v=Object.create,g=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var r,i;return f(t),i=this,n.call(this,e,r=function(){a.call(i,e,r),h.call(t,this,arguments)}),r.__eeOnceListener__=t,this},s={on:n=function(e,t){var r;return f(t),y.call(this,"__ee__")?r=this.__ee__:(r=_.value=v(null),g(this,"__ee__",_),_.value=null),r[e]?"object"===c(r[e])?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:i,off:a=function(e,t){var r,n,i,a;if(f(t),!y.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"===(void 0===(n=r[e])?"undefined":c(n)))for(a=0;i=n[a];++a)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[a?0:1]:n.splice(a,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:o=function(e){var t,r,n,i,a;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"===(void 0===i?"undefined":c(i))){for(r=arguments.length,a=new Array(r-1),t=1;t<r;++t)a[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)h.call(n,this,a)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),t=1;t<r;++t)a[t-1]=arguments[t];h.call(i,this,a)}}},u={on:d(n),once:d(i),off:d(a),emit:d(o)},l=m({},u),e.exports=t=function(e){return null==e?v(l):m(Object(e),u)},t.methods=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCodeByHttpCode=t.ERROR_TYPES=t.ERROR_CODES=t.ParserError=t.NetWorkError=void 0;var n,i=(n=r(50))&&n.__esModule?n:{default:n};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o={416:-499899,401:-499898,403:-499897,404:-499896,timeout:-499895,"4xx":-499894,"5xx":-499893,networkError:-499892,contentError:-499891,mse:-499971,mseOpen:-499972,mseAppend:-499973,boxsError:-499980,moovError:-499981,notH264:-499982,mdatError:-499983,mdhdError:-499984,noneURL:-499988,h265Error:-499985,other:-499989,waitTimeout:-499791},s={network:1003,format:1005,runtime:1002,other:9999,demux:1006,remux:1007};function u(e){var t=0;switch(e){case 0:t=0;break;case-1:t=o.networkError;break;case-2:t=o.timeout;break;case-3:t=o.contentError;break;default:t=e<500?o[e]||e["4xx"]:o[e]||e["5xx"]}return t}t.NetWorkError=function e(t,r,n){a(this,e);var o=0,l=0;n&&n.range&&n.range.length>1&&(o=n.range[0],l=n.range[0]);var c=u(r);return{errorCode:c,errorType:t,errorTypeCode:s[t],errorMessage:n.httpText,url:n.url,httpCode:r,version:i.default,rangeStart:o,rangeEnd:l,ext:n,mediaError:{code:c,message:n.httpText}}},t.ParserError=function e(t,r,n){return a(this,e),{errorCode:r,errorType:t,errorTypeCode:s[t],version:i.default,errorMessage:n.msg,ext:n,mediaError:{code:r,message:n.msg}}},t.ERROR_CODES=o,t.ERROR_TYPES=s,t.getErrorCodeByHttpCode=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoEventMiddleware=t.userGestureEventMiddleware=void 0,t.getPlayLicenses=s,t.getKeyValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],r=arguments[2],a=arguments[3],o=new n.default;if(r){(0,i.log)("[getKeyValue]>before openBox");var u=a.awManager.openBox(r);if((0,i.log)("[getKeyValue]>after openBox: ",u),t){var l={clearKeys:{}};l.clearKeys[t]=u,o.resolve(l)}else o.resolve(u)}else{var c=s(e,t,a.getLicenseUrl);c.id="requestPromise",a._addPendingPromise(c),c.then((function(e){if(a._removePendingPromise(c),a.awManager){(0,i.log)("[getKeyValue]>before openBox");var r=a.awManager.openBox(e);(0,i.log)("[getKeyValue]>after openBox: ",r);var n={clearKeys:{}};n.clearKeys[t]=r,o.resolve(n)}else(0,i.log)("[getKeyValue]>awManager not exist, player destroyed")})).catch((function(e){throw(0,i.log)("[getKeyValue]>requestPromise reject"),e}))}return o},t.offInDestroy=u,t.on=function(e,t,r,n){n?(e.on(t,r),u(e,t,r,n)):e.on(t,(function n(i){r(i),e.off(t,n)}))},t.once=function(e,t,r,n){n?(e.once(t,r),u(e,t,r,n)):e.once(t,(function n(i){r(i),e.off(t,n)}))};var n=o(r(7)),i=r(8),a=o(r(113));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"//i.snssdk.com/video/drm/v1/play_licenses",i=new n.default;return new a.default({type:"json",method:"POST",url:r,data:{drm_type:"22",license_request:[{vid:e,kids:[].concat(t)}]}}).then((function(r){var n=r.response;if(n){var a=n.play_licenses[e][t];i.resolve(a)}else i.reject()})).catch((function(){i.reject()})),i}function u(e,t,r,n){e.once(n,(function i(){e.off(t,r),e.off(n,i)}))}t.userGestureEventMiddleware={playBtnClick:function(e,t,r,n){e.paused||e.waitingMoreBuffer&&(e.waitingMoreBuffer=!1),n.call(e,t,r)}},t.videoEventMiddleware={waiting:function(e,t){var r=e.player,n=e.eventName;r.waitingMoreBuffer=!0,t(n,e)},play:function(e,t){var r=e.player,n=e.eventName;r.waitingMoreBuffer||t(n,e)},pause:function(e,t){var r=e.player,n=e.eventName;r.waitingMoreBuffer||t(n,e)},seeking:function(e,t){var r=e.player,n=e.eventName;r.isSeekingStart=!0,t(n,e)},progress:function(e,t){(0,i.log)(">>>>progress");var r=e.player,n=e.eventName;if(r.waitingMoreBuffer){var a=r.getBufferedRange(r.buffered2);0===a[0]&&0===a[1]||(void 0===r.inWaitingStart||r.isSeekingStart?((0,i.log)("progress 起播或seek结束"),a[1]-r.currentTime>=(r.config.canplayWaterLevel||1)||a[1]>r.duration-1?((0,i.log)("progress 出起播水位"),r.play()):((0,i.log)("progress 未出起播水位"),r.emit("waiting"))):((0,i.log)("progress video卡顿结束"),a[1]-r.currentTime>=(r.config.bufferWaterLevel||5)||a[1]>r.duration-1?((0,i.log)("progress 出卡顿水位"),r.play()):((0,i.log)("progress 未出卡顿水位"),r.emit("waiting"))))}t(n,e)},playing:function(e,t){var r=e.player,n=e.eventName;(0,i.log)("playing");var a=r.getBufferedRange(r.buffered2);if(0===a[0]&&0===a[1])return(0,i.log)("playing 当前播放时刻没有缓存 未出水位"),r.waitingMoreBuffer=!0,r.pause(),void t.call("waiting",e);void 0===r.inWaitingStart||r.isSeekingStart?((0,i.log)("playing 起播或seek结束"),a[1]-r.currentTime>=(r.config.canplayWaterLevel||1)||a[1]>r.duration-1?((0,i.log)("playing 出起播水位"),r.waitingMoreBuffer=!1,r.isSeekingStart=!1,t(n,e)):((0,i.log)("playing 未出起播水位"),r.waitingMoreBuffer=!0,r.pause(),t.call("waiting",e))):((0,i.log)("playing video卡顿结束"),a[1]-r.currentTime>=(r.config.bufferWaterLevel||5)||a[1]>r.duration-1?((0,i.log)("playing 出卡顿水位"),r.waitingMoreBuffer=!1,t(n,e)):((0,i.log)("playing 未出卡顿水位"),r.waitingMoreBuffer=!0,r.pause(),t.call("waiting",e)))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=void 0,r=void 0,n=new Promise((function(e,n){t=e,r=n}));return n.resolve=function(e){t(e),n.state="fulfilled"},n.reject=function(e){r(e),n.state="rejected"},n.state="pending",n}return n(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];i&&console.log&&(t=console).log.apply(t,["[logger]",e].concat(n))};var n=function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e){return!1}}()&&!function(){try{return window.localStorage.setItem("_localstorage_support_test",!0),window.localStorage.removeItem("_localstorage_support_test"),!1}catch(e){return!0}}(),i=function(){if(n)try{return!!window.localStorage.getItem("playerlog")}catch(e){return!1}return!1}()},function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=r(41)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n,i=(n=r(48))&&n.__esModule?n:{default:n};e.exports=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new Date;t.setFullYear(1904),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),this.time=t}return n(e,[{key:"setTime",value:function(e){return this.time.setTime(this.time.getTime()+1*e),this.time.toLocaleString()}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordBasedCipher=t.OpenSSLKdf=t.SerializableCipher=t.OpenSSLFormatter=t.CipherParams=t.BlockCipher=t.Pkcs7=t.CBC=t.BlockCipherMode=t.StreamCipher=t.Cipher=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},a=r(3),o=r(106),s=r(107);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=t.Cipher=function(e){function t(e,r,n){u(this,t);var i=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.cfg=Object.assign(new a.Base,n),i._xformMode=e,i._key=r,i.reset(),i}return c(t,e),n(t,[{key:"reset",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this._doReset()}},{key:"process",value:function(e){return this._append(e),this._process()}},{key:"finalize",value:function(e){return e&&this._append(e),this._doFinalize()}}],[{key:"createEncryptor",value:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}},{key:"createDecryptor",value:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}},{key:"_createHelper",value:function(e){var t=function(e){return"string"==typeof e?w:y};return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}]),t}(a.BufferedBlockAlgorithm);d._ENC_XFORM_MODE=1,d._DEC_XFORM_MODE=2,d.keySize=4,d.ivSize=4,t.StreamCipher=function(e){function t(){var e;u(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return a.blockSize=1,a}return c(t,e),n(t,[{key:"_doFinalize",value:function(){return this._process(!0)}}]),t}(d);var f=t.BlockCipherMode=function(e){function t(e,r){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._cipher=e,n._iv=r,n}return c(t,e),n(t,null,[{key:"createEncryptor",value:function(e,t){return this.Encryptor.create(e,t)}},{key:"createDecryptor",value:function(e,t){return this.Decryptor.create(e,t)}}]),t}(a.Base);function h(e,t,r){var n=e,i=void 0,a=this._iv;a?(i=a,this._iv=void 0):i=this._prevBlock;for(var o=0;o<r;o+=1)n[t+o]^=i[o]}var p=t.CBC=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),t}(f);p.Encryptor=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,[{key:"processBlock",value:function(e,t){var r=this._cipher,n=r.blockSize;h.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}]),t}(p),p.Decryptor=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,[{key:"processBlock",value:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),h.call(this,e,t,n),this._prevBlock=i}}]),t}(p);var v=t.Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(i);var u=a.WordArray.create(o,n);e.concat(u)},unpad:function(e){var t=e,r=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=r}},g=(t.BlockCipher=function(e){function t(e,r,n){u(this,t);var i=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,Object.assign({mode:p,padding:v},n)));return i.blockSize=4,i}return c(t,e),n(t,[{key:"reset",value:function(){var e=void 0;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this);var r=this.cfg,n=r.iv,a=r.mode;this._xformMode===this.constructor._ENC_XFORM_MODE?e=a.createEncryptor:(e=a.createDecryptor,this._minBufferSize=1),this._mode=e.call(a,this,n&&n.words),this._mode.__creator=e}},{key:"_doProcessBlock",value:function(e,t){this._mode.processBlock(e,t)}},{key:"_doFinalize",value:function(){var e=void 0,t=this.cfg.padding;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}]),t}(d),t.CipherParams=function(e){function t(e){u(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.mixIn(e),r}return c(t,e),n(t,[{key:"toString",value:function(e){return(e||this.formatter).stringify(this)}}]),t}(a.Base)),m=t.OpenSSLFormatter={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.WordArray.create([1398893684,1701076831]).concat(r).concat(t):t).toString(o.Base64)},parse:function(e){var t=void 0,r=o.Base64.parse(e),n=r.words;return 1398893684===n[0]&&1701076831===n[1]&&(t=a.WordArray.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),g.create({ciphertext:r,salt:t})}},y=t.SerializableCipher=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,null,[{key:"encrypt",value:function(e,t,r,n){var i=Object.assign(new a.Base,this.cfg,n),o=e.createEncryptor(r,i),s=o.finalize(t),u=o.cfg;return g.create({ciphertext:s,key:r,iv:u.iv,algorithm:e,mode:u.mode,padding:u.padding,blockSize:o.blockSize,formatter:i.format})}},{key:"decrypt",value:function(e,t,r,n){var i=t,o=Object.assign(new a.Base,this.cfg,n);return i=this._parse(i,o.format),e.createDecryptor(r,o).finalize(i.ciphertext)}},{key:"_parse",value:function(e,t){return"string"==typeof e?t.parse(e,this):e}}]),t}(a.Base);y.cfg=Object.assign(new a.Base,{format:m});var _=t.OpenSSLKdf={execute:function(e,t,r,n){var i=n;i||(i=a.WordArray.random(8));var o=s.EvpKDFAlgo.create({keySize:t+r}).compute(e,i),u=a.WordArray.create(o.words.slice(t),4*r);return o.sigBytes=4*t,g.create({key:o,iv:u,salt:i})}},w=t.PasswordBasedCipher=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,null,[{key:"encrypt",value:function(e,t,r,n){var i=Object.assign(new a.Base,this.cfg,n),o=i.kdf.execute(r,e.keySize,e.ivSize);i.iv=o.iv;var s=y.encrypt.call(this,e,t,o.key,i);return s.mixIn(o),s}},{key:"decrypt",value:function(e,t,r,n){var i=t,o=Object.assign(new a.Base,this.cfg,n);i=this._parse(i,o.format);var s=o.kdf.execute(r,e.keySize,e.ivSize,i.salt);return o.iv=s.iv,y.decrypt.call(this,e,i,s.key,o)}}]),t}(y);w.cfg=Object.assign(y.cfg,{kdf:_})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(4)),a=r(112),o=u(a),s=u(r(2));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c={ERROR:"error",PROGRESS:"progress",CANCEL:"cancel"},d={ERROR:"ERROR",CANCEL:"CANCEL",TIMEOUT:"TIMEOUT"},f=function(){function e(t,r,n,a){var o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};l(this,e),(0,i.default)(this),this.url=t,this.range=r,this._callback=a;var u=n.ext||{};this.playerId=n.playerId,this.uniqueTag=this.url+"&range="+r[0]+"-"+r[1],this.options=n,this.lastTime=0,this.loaded=0,this.progressLoaded=[],this.startTime=0;var c=e.DefaultConfig;Object.keys(c).map((function(e){void 0===o.options[e]&&(o.options[e]=c[e])})),this.context={range:r||[],url:this.uniqueTag,speed:0,playerId:n.playerId,headers:{},costTime:0,connectTime:0,loaded:0,size:0,readyState:0,httpCode:0,httpText:"",vid:u.vid||"",ext:u||{}},s&&Object.keys(s).map((function(e){o.context[e]=s[e]})),r.length>1&&(u.start=r[0],u.end=r[1]),e.queue.some((function(e){return e.url===t&&JSON.stringify(e.range)===JSON.stringify(r)&&e.playerId===n.playerId}))||(this.id=this.playerId+r.join("-"),this.running=!1,this.canceled=!1,this.preloader=this.options.preloader,this.options.useUrlRange&&r&&r.length>1&&(t=t+(t.split("?")[1]?"&":"?")+"range="+r[0]+"-"+r[1]),this.initialize(t,r,a,this.options))}return n(e,null,[{key:"DefaultConfig",get:function(){return{timeout:5e4,retryCount:2,xhrSetup:null,playerId:0,isCache:!1,preloader:null,ext:{},responseType:"arraybuffer",useUrlRange:!1}}}]),n(e,[{key:"initialize",value:function(t,r,n,i){var u=this,l=new window.XMLHttpRequest;l.target=this,l.responseType=i.responseType,l.open("get",t),l.timeout=i.timeout,"function"==typeof i.xhrSetup&&i.xhrSetup(l,t),i.useUrlRange||l.setRequestHeader("Range","bytes="+r[0]+"-"+r[1]),l.onreadystatechange=function(e){u.context.readyState=l.readyState,2===l.readyState&&(u.context.headers=(0,o.default)(l),u.context.size=(0,a.getFileSize)(u.context.headers),u.context.httpCode=l.status,u.context.httpText=l.statusText,u.context.connectTime=s.default.nowTime()-u.startTime),1===l.readyState&&(u.lastTime=s.default.nowTime()),4===l.readyState&&(u.context.costTime=s.default.nowTime()-u.startTime)},l.onload=function(e){var t=s.default.nowTime()-u.startTime;u.context.costTime=t,e?(u.context.httpCode=l.status||-2,200===l.status||206===l.status?(u.context.httpText=l.statusText||"request_success",u.context.loaded=e.loaded,u.context.range.length>1&&!u.context.range[1]&&(u.context.range[1]=u.context.range[0]+e.loaded),n&&n instanceof Function&&n(l.response,u.context),i.isCache&&s.default.validateFragment(l.response,r)&&u.preloader&&u.preloader.setItem(u.cacheKey,{res:l.response,headers:u.headers||{},status:l.status}).catch((function(){}))):l.status>=400&&(u.context.httpText=l.statusText||"request_error",u._emitTaskError(d.ERROR,u.context),u._emitProgressEvent("error",u.context))):(u.context.httpCode=-3,u._emitProgressEvent("error",u.context),u._emitTaskError(d.ERROR,u.context)),l.target.remove()},l.onprogress=function(t){var r=s.default.nowTime();if(r-u.lastTime>50||t.lengthComputable&&t.loaded===t.total){var n=r-u.startTime,i=e.getMSpeedInbPS(n,t.loaded);e.netSampling({mTime:r-u.startTime,mBytes:t.loaded,mSpeedInbPS:i,mRTT:u.context.connectTime}),u.context.speed=i,u.lastTime=r}u.context.loaded=t.loaded},l.onerror=function(e){l.target.remove(),u.context.httpCode=-1,u.context.httpText="request_error",u._emitProgressEvent("error",u.context),u._emitTaskError(d.ERROR,u.context)},l.ontimeout=function(){u.context.httpCode=l.status||-2,u.context.httpText=l.statusText||"request_timeout",u._emitProgressEvent("timeout",u.context),u._emitTaskError(d.TIMEOUT,u.context),u.cancel()},l.onabort=function(){l.target.remove()},this.canceled||(this.xhr=l,e.queue.push(this)),this.update()}},{key:"cancel",value:function(){this.running&&this.xhr.abort(),this._emitTaskError(d.CANCEL,this.context),this.remove(),this.canceled=!0}},{key:"_emitTaskError",value:function(e,t){var r=this.context,n={httpCode:r.httpCode,httpText:r.httpText,url:t.url,context:t,type:e};this.emit(c.ERROR,n)}},{key:"_emitProgressEvent",value:function(e,t){var r=(0,a.transformHeaders)(t.headers);this.emit(c.PROGRESS,{costTime:t.costTime,connectTime:t.connectTime,pos:t.loaded,cdnUrl:t.url,range:t.range||[],speed:t.speed,headers:t.headers,status:t.httpCode,type:e,ext:r})}},{key:"remove",value:function(){var t=this;e.queue.filter((function(r,n){return r.url===t.url&&r.id===t.id&&(e.queue.splice(n,1),!0)})),this.update()}},{key:"update",value:function(){var t=e.queue,r=t.filter((function(e){return e.running})),n=t.filter((function(e){return!e.running})),i=e.limit-r.length;n.forEach((function(e,t){t<i&&e.run()}))}},{key:"run",value:function(){1===this.xhr.readyState?(this.running=!0,this.xhr.send(),this.startTime=s.default.nowTime(),this.startDownloadTime=s.default.nowTime(),this.startConnectTime=s.default.nowTime()):this.remove()}},{key:"costTime",get:function(){return 0===this.startDownloadTime?s.default.nowTime()-this.startConnectTime:s.default.nowTime()-this.startDownloadTime}},{key:"connectCostTime",get:function(){return this.startDownloadTime>0?this.startDownloadTime-this.startConnectTime:0}}],[{key:"clear",value:function(t){for(var r=e.queue,n=r.length-1;n>-1;n--){var i=r[n];i.running&&i.playerId===t&&i.cancel(),r.splice(n,1)}}},{key:"getMSpeedInbPS",value:function(e,t){return parseInt(8*t/e*1e3,10)}},{key:"netSampling",value:function(t){e.netRecords.push(t),e.netRecords.length>e.MQueueCapacity&&e.netRecords.splice(0,1),e.speed=e.getSpeed(),e.realTimeSpeed=t.mSpeedInbPS,e.realTimeRTT=t.mRTT,e.RTT=e.getRTT()}},{key:"getRTT",value:function(){if(e.netRecords.length<1)return 0;var t=[];e.netRecords.map((function(e){t.push(e.mRTT)})),t.sort((function(e,t){return e-t}));var r=t.length;return r%2==0?(t[r/2-1]+t[r/2])/2:t[Math.floor(r/2)]}},{key:"getSpeed",value:function(){var t=e.INVALID_SPEED;if(e.netRecords.length<1)return t;var r=[];e.netRecords.map((function(e){r.push(e)})),r.sort((function(e,t){return e.mSpeedInbPS-t.mSpeedInbPS}));for(var n=r.length,i=0,a=0;a<n;a++)i+=r[a].mBytes;i/=2;for(var o=0;o<n;o++)if((i-=r[o].mBytes)<=0){t=r[o].mSpeedInbPS;break}return t<0?e.INVALID_SPEED:t}},{key:"EVENTS",get:function(){return c}},{key:"TASK_ERROR_TYPES",get:function(){return d}}]),e}();f.queue=[],f.limit=10,f.netRecords=[],f.MQueueCapacity=10,f.speed=0,f.realTimeSpeed=0,f.realTimeRTT=0,f.RTT=0,f.INVALID_SPEED=0,"undefined"!=typeof window&&(window.TASK=f),t.default=f,e.exports=t.default},function(e,t,r){"use strict";(function(e){var r,n,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="tjUo")}({"+dLj":function(e,t,r){var n=r("UBbi"),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},"23+d":function(e,t,r){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},"5/Fh":function(e,t,r){var n=r("pVAg");e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},"5u1z":function(e,t,r){e.exports=r("C5t7")()?Object.keys:r("+dLj")},"7YTw":function(e,t,r){var n=r("5/Fh");e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},"7px9":function(e,t,r){e.exports=function(e){return null!=e}},"8Ul1":function(e,t,r){var n,i,a,s,u,l,c,d="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},f=r("HX/o"),h=r("U4eW"),p=Function.prototype.apply,v=Function.prototype.call,g=Object.create,m=Object.defineProperty,y=Object.defineProperties,_=Object.prototype.hasOwnProperty,w={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var r,i;return h(t),n.call(i=this,e,r=function(){a.call(i,e,r),p.call(t,this,arguments)}),r.__eeOnceListener__=t,this},u={on:n=function(e,t){var r;return h(t),_.call(this,"__ee__")?r=this.__ee__:(r=w.value=g(null),m(this,"__ee__",w),w.value=null),r[e]?"object"===d(r[e])?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:i,off:a=function(e,t){var r,n,i,a;if(h(t),!_.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"===(void 0===(n=r[e])?"undefined":d(n)))for(a=0;i=n[a];++a)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[a?0:1]:n.splice(a,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:s=function(e,t,r){var n,i,a,o,s;if(_.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"===(void 0===o?"undefined":d(o))){for(i=arguments.length,s=new Array(i-1),n=1;n<i;++n)s[n-1]=arguments[n];for(o=o.slice(),n=0;a=o[n];++n)p.call(a,this,s)}else switch(arguments.length){case 1:v.call(o,this);break;case 2:v.call(o,this,t);break;case 3:v.call(o,this,t,r);break;default:for(i=arguments.length,s=new Array(i-1),n=1;n<i;++n)s[n-1]=arguments[n];p.call(o,this,s)}}},l={on:f(n),once:f(i),off:f(a),emit:f(s)},c=y({},l),e.exports=t=function(e){return null==e?g(c):y(Object(e),l)},t.methods=u},AxBp:function(e,t,r){var n=r("7YTw"),i=/^\s*class[\s{/}]/,a=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!i.test(a.call(e))}},C5t7:function(e,t,r){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},"HX/o":function(e,t,r){var n=r("7px9"),i=r("AxBp"),a=r("t7Nw"),o=r("Yv2q"),s=r("Q8aG");(e.exports=function(e,t){var r,i,u,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],n(e)?(r=s.call(e,"c"),i=s.call(e,"e"),u=s.call(e,"w")):(r=u=!0,i=!1),c={value:t,configurable:r,enumerable:i,writable:u},l?a(o(l),c):c}).gs=function(e,t,r){var u,l,c,d;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],n(t)?i(t)?n(r)?i(r)||(c=r,r=void 0):r=void 0:(c=t,t=r=void 0):t=void 0,l=n(e)?(u=s.call(e,"c"),s.call(e,"e")):!(u=!0),d={get:t,set:r,configurable:u,enumerable:l},c?a(o(c),d):d}},I9c2:function(e,t,r){e.exports=function(){}},J2Kb:function(e,t,r){var n=r("UBbi");e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},KpE9:function(e,t,r){var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},Q8aG:function(e,t,r){e.exports=r("TKg6")()?String.prototype.contains:r("KpE9")},TKg6:function(e,t,r){var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},U4eW:function(e,t,r){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},UBbi:function(e,t,r){var n=r("I9c2")();e.exports=function(e){return e!==n&&null!==e}},Yv2q:function(e,t,r){var n=r("UBbi"),i=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return i.call(arguments,(function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)})),t}},pVAg:function(e,t,r){var n="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},i=r("7px9"),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!i(e)&&hasOwnProperty.call(a,void 0===e?"undefined":n(e))}},t7Nw:function(e,t,r){e.exports=r("23+d")()?Object.assign:r("xZY9")},tjUo:function(e,t,r){r.r(t),r.d(t,"prelaodconstans",(function(){return n})),r.d(t,"PreloaderBase",(function(){return Z}));var n={};r.r(n),r.d(n,"PRELOAD_NEXT",(function(){return i})),r.d(n,"PRELOAD_SEG_DONE",(function(){return a})),r.d(n,"STATES",(function(){return s})),r.d(n,"ONE_STEP_DONE",(function(){return u})),r.d(n,"MEDIA_FORMAT",(function(){return l})),r.d(n,"MEDIA_TYPES",(function(){return c})),r.d(n,"PRELOAD_TYPES",(function(){return d})),r.d(n,"CACHE_TYPES",(function(){return f})),r.d(n,"DOWN_STATES",(function(){return h}));var i="PRELOAD_NEXT",a="PRELOAD_SEG_DONE",s={PREPARE:"PREPARE",IDLE:"IDLE",PRELOADING:"PRELOADING",FINISH:"FINISH"},u="ONE_STEP_DONE",l={DASH:0,MP4:1},c={VIDEO:0,AUDIO:1,MIXED:2},d={DURATION:0,SIZE:1},f={INDEXDB:0,MEMORY:1},h={FAIL:-1,SUCCESS:0,DOWNLOADING:1},p=r("8Ul1"),v=r.n(p),g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=void 0,r=void 0,n=new Promise((function(e,n){t=e,r=n}));return n.resolve=t,n.reject=r,n}return g(e,[{key:"resolve",value:function(){}},{key:"reject",value:function(){}}]),e}(),y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=function(){function e(t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v()(this),this.state=s.PREPARE,this.options=t||{},this.logger=t.logger||function(){},this._preloadManager=r,this.player=r.player,this._predictInst=this._preloadManager.predictInst,this._handlers=n,this._toLoadList=[],this.retryCount=0,this._cachedHandler=i,this._cachedDataHanlder=a}return y(e,[{key:"start",value:function(){var e=this,t=new m;return this._handlers.start(this.options).then((function(r){r.onObtain().then((function(n){e._predictInst.updateMediaInfos(n);var i=e._predictInst.preloadPredict(e.options),a=e._predictInst.cachedData;e._cachedDataHanlder(Object.assign({vid:e.options.vid},{data:a}));var o=Object.assign(i,e.options);r.onTransform(o).then((function(r){e._toLoadList=r,t.resolve(r)}))}))})).catch((function(e){t.reject(new Error("preload unit start error"))})),t}},{key:"preloadSeg",value:function(){var e=this;if(0===this._toLoadList.length)return this.state=s.FINISH,void this.emit(a,!0);this.state="PRELOADING";var t=this._toLoadList.shift();this._handlers.onRequest(t,(function(r){var n=Object.assign({},t.extData,r);e._cachedHandler(n)})).then((function(){e.state=s.IDLE,e.emit(a)})).catch((function(t){e.requestError(),e.emit(a,!1)}))}},{key:"requestError",value:function(){this.retryCount++,this.state=s.IDLE,10<=this.retryCount&&(this.state=s.FINISH),this.emit(u),this.logger("preload request error")}},{key:"cancelLoading",value:function(){this._toLoadList=[]}}]),e}(),w=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}(),b=function(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))};function E(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var T={},C="readonly",S="readwrite";function k(e){var t=T[e.name],r={};r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function O(e,t){return new Promise((function(r,n){if(T[e.name]=T[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);k(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=w.open.apply(w,i);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),function(e){var t=T[e.name].deferredOperations.pop();t&&(t.resolve(),t.promise)}(e)}}))}function R(e){return O(e,!1)}function A(e){return O(e,!0)}function x(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function L(e){var t=this,r=t._initReady().then((function(){var e=T[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return function(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}(r,e,e),r}function D(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(0<n&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return Promise.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)})).then((function(){return function(e){k(e);for(var t=T[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,R(e).then((function(t){return e.db=t,x(e)?A(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw function(e,t){var r=T[e.name].deferredOperations.pop();r&&(r.reject(t),r.promise)}(e,t),t}))}(e).then((function(){D(e,t,r,n-1)}))})).catch(r);r(i)}}var P={_driver:"asyncStorage",_initStorage:function(e){var t=this;t._defaultConfig=e;var r={db:null};if(e)for(var n in e)r[n]=e[n];var i=T[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},T[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=L);var a=[];function o(){return Promise.resolve()}for(var s=0;s<i.forages.length;s++){var u=i.forages[s];u!==t&&a.push(u._initReady().catch(o))}var l=i.forages.slice(0);return t._ready=Promise.all(a).then((function(){return r.db=i.db,R(r)})).then((function(e){return r.db=e,x(r,t._defaultConfig.version)?A(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var a=l[n];a!==t&&(a._dbInfo.db=r.db,a._dbInfo.version=r.version)}})),t._ready},probeSupport:function(){try{if(!w||!w.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),getItem:function(e,t){var r=this;e=E(e);var n=new Promise((function(t,n){r.ready().then((function(){D(r._dbInfo,C,(function(i,a){if(i)return n(i);try{var o=a.objectStore(r._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),t(e)},o.onerror=function(){n(o.error)}}catch(i){n(i)}}))})).catch(n)}));return b(n,t),n},setItem:function(e,t,r){var n=this;e=E(e);var i=new Promise((function(r,i){n.ready().then((function(){return n._dbInfo,t})).then((function(t){D(n._dbInfo,S,(function(a,o){if(a)return i(a);try{var s=o.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),r(t)},o.onabort=o.onerror=function(){var e=u.error?u.error:u.transaction.error;i(e)}}catch(a){i(a)}}))})).catch(i)}));return b(i,r),i},removeItem:function(e,t){var r=this;e=E(e);var n=new Promise((function(t,n){r.ready().then((function(){D(r._dbInfo,S,(function(i,a){if(i)return n(i);try{var o=a.objectStore(r._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){n(o.error)},a.onabort=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(i){n(i)}}))})).catch(n)}));return b(n,t),n},clear:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){D(t._dbInfo,S,(function(n,i){if(n)return r(n);try{var a=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(n){r(n)}}))})).catch(r)}));return b(r,e),r},length:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){D(t._dbInfo,C,(function(n,i){if(n)return r(n);try{var a=i.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){r(a.error)}}catch(n){r(n)}}))})).catch(r)}));return b(r,e),r},ready:function(){return this._ready},all:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){D(t._dbInfo,C,(function(n,i){if(n)return r(n);try{var a=i.objectStore(t._dbInfo.storeName).openCursor(),o=[];a.onsuccess=function(){var t=a.result;t?(o.push({key:t.key,value:t.value}),t.continue()):e(o)},a.onerror=function(){r(a.error)}}catch(n){r(n)}}))})).catch(r)}));return b(r,e),r}},M="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},I=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),U=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return I(e,[{key:"_initStorage",value:function(e){var t=e.name+"_"+e.storeName;return this.key=t,window[t]&&"object"===M(window[t])||(window[t]={}),this.store=window[t],Promise.resolve()}},{key:"getItem",value:function(e,t){var r=this.store[e];return void 0===r&&(r=null),this._internalPromise(t,r)}},{key:"setItem",value:function(e,t,r){return this.store[e]=t,this._internalPromise(r)}},{key:"removeItem",value:function(e,t){return delete this.store[e],this._internalPromise(t)}},{key:"clear",value:function(e){return this.store={},window[this.key]={},this._internalPromise(e)}},{key:"length",value:function(e){var t=Object.keys(this.store).length;return this._internalPromise(e,t)}},{key:"_internalPromise",value:function(e,t){var r=t?Promise.resolve(t):Promise.resolve();return b(r,e),r}},{key:"all",value:function(e){for(var t=[],r=Object.keys(this.store),n=0;n<r.length;n++){var i=r[n];t.push({key:i,value:this.store[i]})}return this._internalPromise(e,t)}},{key:"probeSupport",value:function(){return!0}}]),e}()),B=!function(){var e="_localstorage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}(),F=(B&&localStorage.length,function(e){try{return localStorage.getItem(e)}catch(e){return null}}),N=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),j={description:"",name:"__PRE_CACHE__",storeName:"keyvaluepairs",version:1},H="__PRE_CACHE__KEYS",z=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._driver=r===f.MEMORY?U:P,this._driver._initStorage(j).catch((function(){})),this._hasIdbForbidden=!1,this._maxCache=!t||t<=0?200:t,this.setMaxCache(this._maxCache),this._allCachedKeys={},this._allCachedTimeKeys={},this.getCachedKeysFromLocal(),this._readyPromise=new m,this.init()}return N(e,[{key:"getCachedKeysFromLocal",value:function(){var e=F(H);if(e)for(var t=e.split("|"),r=0;r<t.length;r++){var n=t[r],i=this._getCacheKeyInfos(n),a=i.time,o=i.cachedKey;this._allCachedKeys[o]=1,this._allCachedTimeKeys[o]=a}}},{key:"_getCacheKeyInfos",value:function(e){var t=e.split("$"),r=void 0;return 2===t.length&&(r=t[0],e=t[1]),{time:r,cachedKey:e}}},{key:"writeCachedKeysToLocal",value:function(e){var t=[];this._allCachedKeys={},this._allCachedTimeKeys={};for(var r=0;r<e.length;r++){var n=e[r].key,i=this._getCacheKeyInfos(n),a=i.time,o=i.cachedKey;this._allCachedKeys[o]=1,this._allCachedTimeKeys[o]=a,t.push(n)}var s=t.join("|");!function(e,t){try{localStorage.setItem(e,t)}catch(e){}}(H,s)}},{key:"init",value:function(){var e=this;this._driver.setItem("test","test").then((function(){})).catch((function(){e._hasIdbForbidden=!0})).finally((function(){e._driver.removeItem("test").catch((function(){})),e._hasIdbForbidden&&(e._driver=U,e._driver._initStorage(j)),e._getAll(),e._readyPromise.resolve()}))}},{key:"_getAll",value:function(){var e=this;this._driver.all().then((function(t){e._cachedLength=t.length;var r=t.length-e._maxCache,n=t;if(0<r){var i=t.slice(0,r);n=t.slice(r);for(var a=0;a<i.length;a++)e.removeItem(i[a].key).then((function(){}))}e.writeCachedKeysToLocal(n)})).catch((function(){}))}},{key:"getItem",value:function(e,t){if(!this.hasItem(e))return Promise.resolve(!1);var r=this._getTimeKey(e).timeKey;return this._driver.getItem(r,t)}},{key:"setItem",value:function(e,t,r){var n=this;this._getTimeKey(e).timeKey&&this.removeItem(e);var i=(new Date).getTime();this._allCachedKeys[e]=1,this._allCachedTimeKeys[e]=i;var a=this._genTimeKey(e,i);return r=r?function(){n._getAll(),r()}:function(){n._getAll()},this._driver.setItem(a,t,r)}},{key:"_getTimeKey",value:function(e){var t=this._allCachedTimeKeys[e],r=e;return t&&(r=this._genTimeKey(e,t)),{timeKey:r,time:t}}},{key:"_genTimeKey",value:function(e,t){return t+"$"+e}},{key:"removeItem",value:function(e,t){var r=this._getTimeKey(e).timeKey,n=this._driver.removeItem(r,t);return delete this._allCachedKeys[e],delete this._allCachedTimeKeys[e],n}},{key:"hasItem",value:function(e){return!!this._allCachedKeys[e]}},{key:"clear",value:function(e){return this._driver.clear(e)}},{key:"length",value:function(e){return this._driver.length(e)}},{key:"setMaxCache",value:function(e){"number"==typeof e&&0<e&&(this._maxCache=e)}}]),e}(),V=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),K=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v()(this),this._preloadDataList=[],this._currentPreloadInst=null,this._dashPreloadList=[],this.autoPreload=t.autoPreload||!1,this._onPreloadNext=this.onPreloadNextReady.bind(this),this.on(i,this._onPreloadNext),this.update(t,r,n),this._cacheInst=new z(t.preloadMaxCacheCount,t.preloadCacheType),this._preloadCacheProgress={},this._ptag_=!0,this._cachedDatas={}}return V(e,[{key:"update",value:function(e,t,r){var n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==r?r:null;if(this._options=e,this._predictInst=i,!this._predictInst)throw new Error("PreloaderManager predictInst is null");this._readyPromise=this._predictInst.init(e),this.handlers=n}},{key:"onCacheSegment",value:function(e){var t=e.vid,r=e.format,n=e.cacheKey,i=e.total,a=e.loaded,o=e.isInitSegment,s=e.mediaType,u=this.getProgressCacheKey(t,r,s),l=this._preloadCacheProgress[u];(l=l||(this._preloadCacheProgress[u]={}))[n]={total:i,loaded:a,isInitSegment:o}}},{key:"onCachePredict",value:function(e){var t=e.vid,r=e.data;t&&r&&(this._cachedDatas[t]=r)}},{key:"getProgressCacheKey",value:function(e,t,r){return e+"-"+t+"-"+r}},{key:"onPreloadNextReady",value:function(){var e=this;this._readyPromise.then((function(){e.onPreloadNext()}))}},{key:"onPreloadSegDone",value:function(){this.autoPreload&&this.emit(i)}},{key:"onPreloadNext",value:function(){var e=this;if(null==this._currentPreloadInst&&0<this._preloadDataList.length){if(0<this._preloadDataList.length){var t=this._preloadDataList.shift().data;t.payload&&(this._currentPreloadInst=new _(t,this,this.handlers,(function(t){e.onCacheSegment(t)}),(function(t){e.onCachePredict(t)})),this._currentPreloadInst.on(a,this.onPreloadSegDone.bind(this)),this._currentPreloadInst.start().then((function(){e._currentPreloadInst.preloadSeg()})).catch((function(){e._currentPreloadInst=null})))}}else null!=this._currentPreloadInst&&(this._currentPreloadInst.state===s.IDLE?this._currentPreloadInst.preloadSeg():this._currentPreloadInst.state===s.FINISH&&(this._currentPreloadInst=null))}},{key:"addDashPreloader",value:function(e){e&&e.data&&(this._preloadDataList.push(e),this.sort(this._preloadDataList),this.autoPreload&&this.emit(i))}},{key:"_addDashPreloader",value:function(e){e&&e.data&&this._preloadDataList.push(e)}},{key:"addDashPreloaderList",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this.sort(t);for(var r=0;r<t.length;r++)this._addDashPreloader(t[r])}},{key:"sort",value:function(e){e.sort((function(e,t){return void 0===e.order&&void 0===e.order||e.order<t.order?-1:1}))}},{key:"destroy",value:function(){this.off(i,this._onPreloadNext)}},{key:"cancelLoading",value:function(){this._currentPreloadInst&&(this._currentPreloadInst.cancelLoading(),this._currentPreloadInst=null),this._preloadDataList=[]}},{key:"preloadCacheProgress",value:function(e){var t=e.vid,r=e.format,n=e.mediaType,i=e.prelaodType,a=e.bitrate,o=e.set_duration,s=e.set_size,u=e.media_type,l=e.start_time,c=this.getProgressCacheKey(t,r,n),d=this._preloadCacheProgress[c];if(d){for(var f=Object.values(d),p=0,v=0,g=0,m=0,y=0,_=0;_<f.length;_++){var w=f[_];w.isInitSegment&&(p=w.total,g=w.loaded,m=w.loaded===w.total?h.SUCCESS:h.DOWNLOADING),v+=w.total,y+=w.loaded}return{media_type:u,preload_type:i,stream_bitrate:a,header_size:p,content_total_size:v,start_time:l||-1,state_info:{set_duration:o,set_size:s,current_header_download_size:g,current_content_download_size:y,header_download_state:m,content_download_state:y===v?h.SUCCESS:h.DOWNLOADING}}}return null}},{key:"getPreloadTaskInfos",value:function(){}},{key:"getItem",value:function(e,t){return this._cacheInst.getItem(e,t)}},{key:"setItem",value:function(e,t,r){return this._cacheInst.setItem(e,t,r)}},{key:"removeItem",value:function(e,t){return this.removeItem(e,t)}},{key:"cachedDatas",get:function(){return this._cachedDatas}},{key:"predictInst",get:function(){return this._predictInst}}],[{key:"getInstance",value:function(t,r,n){var i=0<arguments.length&&void 0!==t?t:{},a=1<arguments.length&&void 0!==r?r:{},o=2<arguments.length&&void 0!==n?n:null,s=window[e.GLOBAL_KEY];if(s&&s._ptag_)return s.update(i,a,o),s;var u=new e(i,a,o);return window[e.GLOBAL_KEY]=u}}]),e}();K.GLOBAL_KEY="__preloadcontext__";var G=K,X=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v()(this),this.options=t,this.promisePolyfill(),this.before(),this.check(),this._preloadManager=G.getInstance(t,this.handlers,this.predictInst),this.loadingTasks=[]}return X(e,[{key:"promisePolyfill",value:function(){Promise.prototype.finally||(Promise.prototype.finally={finally:function(e){function t(t){return Promise.resolve(e()).then(t)}return this.then((function(e){return t((function(){return e}))}),(function(e){return t((function(){return Promise.reject(e)}))}))}}.finally)}},{key:"before",value:function(){throw new Error("need")}},{key:"check",value:function(){if(!this.handlers)throw new Error("handlers null");if(!this.handlers.start||!this.handlers.onRequest)throw new Error("handlers callback null");if(!this.predictInst)throw new Error("predictInst null");if(!this.predictInst.__p__)throw new Error("predictInst need extends predictbase")}},{key:"preloadNext",value:function(){this._preloadManager.emit(i)}},{key:"start",value:function(){throw new Error("start need implment, return Promise")}},{key:"cancelLoading",value:function(){for(var e=0;e<this.loadingTasks.length;e++)try{var t=this.loadingTasks[e];"function"==typeof t.cancel&&t.cancel()}catch(e){}this.loadingTasks=[],this._preloadManager.cancelLoading()}},{key:"addTasker",value:function(e){this.loadingTasks.push(e)}},{key:"removeTasker",value:function(e){var t=this;setTimeout((function(){for(var r=t.loadingTasks.length-1;-1<r;r--)if(t.loadingTasks[r]===e){t.loadingTasks.splice(r,1);break}}))}},{key:"addDashPreloader",value:function(e){this._preloadManager.addDashPreloader(e)}},{key:"addDashPreloaderList",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this._preloadManager.addDashPreloaderList(t)}},{key:"preloadManager",get:function(){return this._preloadManager}}]),e}()},xZY9:function(e,t,r){var n=r("5u1z"),i=r("J2Kb"),a=Math.max;e.exports=function(e,t){var r,o,s,u=a(arguments.length,2);for(e=Object(i(e)),s=function(n){try{e[n]=t[n]}catch(n){r=r||n}},o=1;o<u;++o)n(t=arguments[o]).forEach(s);if(void 0!==r)throw r;return e}}})},"object"==o(t)&&"object"==o(e)?e.exports=a():(n=[],void 0===(i="function"==typeof(r=a)?r.apply(t,n):r)||(e.exports=i))}).call(this,r(9)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MP4_EVENTS=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=p(r(4)),a=p(r(11)),o=p(r(49)),s=p(r(20)),u=p(r(104)),l=p(r(14)),c=p(r(2)),d=r(5),f=p(d),h=r(6);function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g={ERROR:"error",META_READY:"metaReady",MOOV_READY:"moovReady",TASK_PROGRESS:"progress_event",FRAGMENT:"fragment"},m=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];v(this,e),(0,i.default)(this),this.urls=t,this.url=t,this.backUrl=u,this.options=e.getDefaultConfig(),Object.keys(r).map((function(e){void 0!==r[e]&&null!==r[e]&&(o.options[e]=r[e])})),this.CHUNK_SIZE=this.options.chunkSize,this.player=n,this.timeRage=[],this.canDownload=!0,this.isAudioEncryption=!1,this.isVideoEncryption=!1,this.bufferLoaded=new Uint8Array(0),this._boxes=[],this.meta=null,this.preloadCacheBuffer=[],this.preloader=a||this.player&&this.player.preloader,this.videoTrak=null,this.audioTrak=null,this.mdatStart=null,this.timeRage=[],this.size=0,this.rtSpeed=0,this.init(s)}return n(e,null,[{key:"getDefaultConfig",value:function(){return{xhrSetup:null,chunkSize:8e5,loadSize:800,isCache:!1,playerId:"",vid:"",ext:{}}}},{key:"speed",get:function(){return l.default.speed}},{key:"realTimeSpeed",get:function(){return l.default.realTimeSpeed}}]),n(e,[{key:"getData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t+this.CHUNK_SIZE-1;return new Promise((function(n,i){var a=new l.default(e.url,[t,r],{xhrSetup:e.options.xhrSetup,ext:e.options.ext||{},isCache:e.options.isCache,preloader:e.preloader,playerId:e.options.playerId,useUrlRange:e.options.useUrlRange},(function(e,t){var r={response:e,context:t};self.hasDestroyed||n(r)}));(0,h.once)(a,l.default.EVENTS.ERROR,(function(t){if(t.type===l.default.TASK_ERROR_TYPES.CANCEL&&e.log(">>>Task.TASK_ERROR_TYPES.CANCEL",t.context.ranger),!self.hasDestroyed&&t.type!==l.default.TASK_ERROR_TYPES.CANCEL){var r=new d.NetWorkError("network",t.httpCode,t.context);i(r)}})),(0,h.once)(a,l.default.EVENTS.PROGRESS,(function(t){e.emit(g.TASK_PROGRESS,t)}))}))}},{key:"moovParse",value:function(){var e=this,t=this.moovBox,r=c.default.findBox(t,"mvhd"),n=c.default.findBox(t,"trak"),i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,f=void 0,h=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,w=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=[1,1],k=c.default.findBox(t,"pssh"),O=c.default.findBox(t,"encv"),R=c.default.findBox(t,"enca");if(O){this.isVideoEncryption=!0;var A=c.default.findBox(O,"frma"),x=c.default.findBox(O,"tenc");O.data_format=A.data_format,O.default_IsEncrypted=x.default_IsEncrypted,O.default_IV_size=x.default_IV_size,O.default_KID=x.default_KID}if(R){this.isAudioEncryption=!0;var L=c.default.findBox(R,"frma"),D=c.default.findBox(R,"tenc");R.data_format=L.data_format,R.default_IsEncrypted=D.default_IsEncrypted,R.default_IV_size=D.default_IV_size,R.default_KID=D.default_KID}if(Array.isArray(n)||(n=[n]),n.forEach((function(t){var r=c.default.findBox(t,"hdlr"),n=c.default.findBox(t,"mdhd");if(r&&n){var k=c.default.findBox(t,"stsd").subBox[0];if("vide"===r.handleType){var O=c.default.findBox(t,"avcC"),A=void 0;if(O){if("encv"===k.type){if(!(O=c.default.findBox(k,"avcC")))return void e.emit("error",new d.ParserError("demux",d.ERROR_CODES.notH264,{line:112,handle:"[MP4] Encrypted video is non-h264",msg:"[MP4] Encrypted video is non-h264",url:e.url}));var x=c.default.findBox(t,"senc");E=x.samples}}else if(A=c.default.findBox(t,"hvcC"),"encv"===k.type){if(!A)return void e.emit("error",new d.ParserError("demux",d.ERROR_CODES.notH264,{line:112,handle:"[MP4] Encrypted video is non-h264",url:e.url}));var L=c.default.findBox(t,"senc");E=L.samples}var D=c.default.findBox(t,"tkhd");if(i=t,u=n.timescale,O)o=k.type+"."+c.default.toHex(O.profile,O.profileCompatibility,O.AVCLevelIndication).join(""),f=O.sequence,S=[O.spsInfo.par_ratio.width,O.spsInfo.par_ratio.height],O.spsInfo.codec_size&&(g=O.spsInfo.codec_size.width,m=O.spsInfo.codec_size.height),h=O.pps&&O.pps.map((function(e){return Number("0x"+e)})),v=O.profile;else if(A){C=A.data;var P=c.default.findBox(t,"hvc1");P&&(T=P.data,g=P.width,m=P.height),o=k.type+"."+c.default.toHex(A.profile,A.profileCompatibility,A.profileCompatibilityIndications).join(""),p=A.vps&&A.vps.map((function(e){return Number("0x"+e)})),f=A.sequence,h=A.pps&&A.pps.map((function(e){return Number("0x"+e)})),v=A.profile}else o=""+k.type;D&&!g&&(g=D.width,m=D.height)}if("soun"===r.handleType){a=t;var M=c.default.findBox(t,"esds"),I=c.default.findBox(t,"mp4a"),U=c.default.findBox(t,5);if(l=n.timescale,s=M?k.type+"."+c.default.toHex(M.subBox[0].subBox[0].typeID)+"."+M.subBox[0].subBox[0].subBox[0].type:""+k.type,U&&U.EScode&&(w=U.EScode.map((function(e){return Number("0x"+e)}))),I&&(y=I.channelCount,_=I.sampleRate),R){var B=c.default.findBox(t,"senc");y=R.channelCount,_=R.sampleRate,b=B.samples}}}else e.emit("error",new d.ParserError("demux",d.ERROR_CODES.mdhdError,"[MP4] hdlr or mdhd is null",{line:101,handle:"[MP4] hdlr or mdhd is null",msg:"[MP4] hdlr or mdhd is null",url:e.url}))})),f){this.videoTrak=i,this.audioTrak=a||null;var P=this._boxes.find((function(e){return"mdat"===e.type})),M=c.default.seekTrakDuration(i,u),I=a?c.default.seekTrakDuration(a,l):M;if(P){this.mdatStart=P.start;var U=this.videoKeyFrames,B=U.length-1;U.forEach((function(t,r){r<B?e.timeRage.push({0:t.time.time/u,1:U[r+1].time.time/u,downloaded:!1,isLoading:!1}):e.timeRage.push({0:t.time.time/u,1:-1,downloaded:!1,isLoading:!1})})),this.meta={size:this.size,videoCodec:o,audioCodec:s,createTime:r.createTime,modifyTime:r.modifyTime,duration:r.duration/r.timeScale,timeScale:r.timeScale,videoDuration:M,videoTimeScale:u,audioDuration:I,audioTimeScale:l,endTime:Math.min(M,I),vps:p,sps:f,pps:h,width:g,height:m,profile:v,pixelRatio:S,channelCount:y,sampleRate:_,audioConfig:w,pssh:k,encv:O,enca:R,videoSenc:E,audioSenc:b,hvc1Data:T,hvcCData:C,ext:{videoTrak:this.videoTrak,audioTrak:this.audioTrak,mdatStart:this.mdatStart,timeRage:this.timeRage},stss:this._stssObj},(O&&O.default_KID||R&&R.default_KID)&&(this.meta.kid=(O&&O.default_KID||R&&R.default_KID).join("")),this.log("moovParse",this.timeRage),this.emit("metaReady",this.meta)}else this.emit("error",new d.ParserError("demux",d.ERROR_CODES.mdatError,{line:176,handle:"[MP4] init",msg:"mdat is null"}))}}},{key:"log",value:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.player&&this.player.log&&(t=this.player).log.apply(t,[e].concat(n))}},{key:"init",value:function(e){var t=this;this.meta=e.meta,this.preloadCacheBuffer=e.mediaSegList||[],this.meta&&this.meta.ext?(this.videoTrak=this.meta.ext.videoTrak,this.audioTrak=this.meta.ext.audioTrak,this.mdatStart=this.meta.ext.mdatStart,this.timeRage=this.meta.ext.timeRage,this.size=this.meta.size,this.timeRage.forEach((function(e){e.downloaded=!1})),e.initSeg?setTimeout((function(){t.emit("metaReady",t.meta)})):(this.getMetaInfo(),(0,h.once)(this,"moovReady",this.moovParse.bind(this)))):(this.getMetaInfo(),(0,h.once)(this,"moovReady",this.moovParse.bind(this)))}},{key:"checkMoovReady",value:function(){var e=this._boxes.filter((function(e){return"moov"===e.type}));if(e.length)this.moovBox=e[0],this.emit("moovReady",e);else{var t=new d.ParserError("demux",d.ERROR_CODES.moovError,{line:176,handle:"[MP4] checkMoovReady",msg:"not find moov box"});this.emit("error",t)}}},{key:"getMetaInfo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0+this.CHUNK_SIZE;this.log("getMetaInfo",t,r);var n=t;this.getData(t,r).then((function(t){e.size=t.context.size;var i=t.response;n+=i.byteLength;var s=null;e.bufferLoaded=(0,a.default)(Uint8Array,e.bufferLoaded,new Uint8Array(i));try{var u=0;e._boxes.length>0&&(u=e._boxes[e._boxes.length-1].size+e._boxes[e._boxes.length-1].start),s=new o.default(e.bufferLoaded.buffer.slice(u,r)),e._boxes=e._boxes.concat(s.boxes);var l=!1,c=!1,f=null;if(e._boxes.map((function(e){"moov"===e.type&&(l=!0),"mdat"===e.type&&(f=e,c=!0)})),l&&c)e.checkMoovReady();else{var h=s.nextBox;h&&"moov"===h.type?e.getMetaInfo(n,n+h.size+28):c&&!h?(n=f.start+f.size,e.getData(n,"").then((function(t){s=new o.default(t.response),e._boxes=e._boxes.concat(s.boxes),e.checkMoovReady()}))):e.getMetaInfo(n,n+e.CHUNK_SIZE)}}catch(t){e.emit("error",t.type?t:new d.ParserError("demux",d.ERROR_CODES.boxsError,{line:176,handle:"[MP4] getMetaInfo",msg:t.message}))}})).catch((function(t){e.emit("error",t)}))}},{key:"getSamplesByOrders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",t=arguments[1],r=arguments[2],n="video"===e?this.videoTrak:this.audioTrak,i=c.default.findBox(n,"stsc"),a=c.default.findBox(n,"stsz"),o=c.default.findBox(n,"stts"),s=c.default.findBox(n,"stco"),u="video"===e?this._cttsObj:null,l="video"===e?this._stscVideoObj:this._stscAudioObj,d=this.mdatStart,f=[];if(r=void 0!==r?r:a.entries.length,t instanceof Array)t.forEach((function(e,t){f.push({idx:e,size:a.entries[e],time:c.default.seekSampleTime(o,u,e),offset:c.default.seekSampleOffset(i,s,a,e,d,l)})}));else if(0!==r)for(var h=t;h<r;h++)f.push({idx:h,size:a.entries[h],time:c.default.seekSampleTime(o,u,h),offset:c.default.seekSampleOffset(i,s,a,h,d,l)});else f={idx:t,size:a.entries[t],time:c.default.seekSampleTime(o,u,t),offset:c.default.seekSampleOffset(i,s,a,t,d,l)};return f}},{key:"packMeta",value:function(){if(this.meta){this.kids&&this.kids.clearKeys&&(this.meta.kid=Object.keys(this.kids.clearKeys)[0],this.meta.useEME=this.useEME);var e=new s.default;return e.write(u.default.ftyp()),e.write(u.default.moov(this.meta)),e.buffer}}},{key:"getRangeFromTime",value:function(e){var t=this.getFragmentIdx(e),r=this.getFragRange(t);return r===[0,0]?null:{range:r,fragIndex:t}}},{key:"getDownloadRangeMax",value:function(){return 1e3*(this.options.loadSize||1e3)}},{key:"getFragmentIdx",value:function(e){var t=Math.round(e*this.meta.videoTimeScale),r=void 0,n=this.videoKeyFrames;if(n.every((function(e,i){var a=e.time.time,o=n[i+1]?n[i+1].time.time:Number.MAX_SAFE_INTEGER;return!(a<=t&&t<o&&(r=i,1))})),this.audioTrak){var i=this.audioKeyFrames;i.every((function(e,n){var a=e.startTime,o=i[n+1]?i[n+1].startTime:Number.MAX_SAFE_INTEGER;return!(a<=t&&t<o&&(r=Math.min(n,r),1))}))}return r}},{key:"seek",value:function(e,t,r){for(var n=this,i=this.getFragmentIdx(e),a=-1,o=0;o<this.preloadCacheBuffer.length;o++)this.preloadCacheBuffer[o].index===i&&(a=o);return new Promise(a>-1?function(e,t){n.timeRage[i].downloaded=!0,e({buffer:n.preloadCacheBuffer[a].buffer,context:{}})}:function(e,t){n.loadFragment(i,e,t)})}},{key:"getFragRange",value:function(e){var t=this.videoKeyFrames[e].offset,r=void 0;if(this.audioTrak){var n=this.getSamplesByOrders("audio",this.audioKeyFrames[e].order,0);t=Math.min(t,n.offset)}if(e<this.videoKeyFrames.length-1&&(r=this.videoKeyFrames[e+1].offset,this.audioTrak)){var i=this.getSamplesByOrders("audio",this.audioKeyFrames[e+1].order,0);r=Math.max(r,i.offset)}if(window.isNaN(t)||void 0!==r&&window.isNaN(r))return this.emit("error",new f.default("parse","",{line:366,handle:"[MP4] loadFragment",url:this.url})),[0,0];var a=this.size>0?this.size:"";return[t+this.mdatStart,r?this.mdatStart+r:a-1]}},{key:"loadFragment",value:function(e,t,r){var n=this,i=this.getFragRange(e);if(i===[0,0])return!1;this.timeRage[e].isLoading=!0,this.log("loadFragment fragIndex: ",e,i,i[0],i[1],i[1]-i[0]);var o=[];if(i.length>2&&i[1]&&i[1]<=this.bufferLoaded.byteLength){var s=new Promise((function(e){e({response:new Uint8Array(n.bufferLoaded.buffer.slice(i[0],i[1])),context:{}})}));o.push(s)}else[i].map((function(e){var t=n.getData(e[0],e[1]);o.push(t)}));Promise.all(o).then((function(o){var s={};s.context=o[0].context;var u=o[0].context.costTime,l=o[0].context.connectTime,c=new Uint8Array(0),d=0,f=[];o.map((function(e){c=(0,a.default)(Uint8Array,c,new Uint8Array(e.response)),d+=e.response.byteLength,f.push(e.context.range[0]),f.push(e.context.range[1]),e.context.costTime>u&&(u=e.context.costTime),e.context.connectTime>l&&(l=e.context.connectTime)})),s.context.costTime=u,s.context.connectTime=l,s.context.range=i,n.timeRage[e].downloaded=!0,i.length>1&&!i[1]&&(i[1]=i[0]+d),s.range=i,n.createFragment(c.buffer,i[0]-n.mdatStart,e,s).then((function(e){t(e)})).catch((function(e){r(e)}))})).catch((function(t){n.timeRage[e].isLoading=!1,r(t)}))}},{key:"addFragment",value:function(e){var t=new s.default;if(e.isVideoEncryption=this.isVideoEncryption,e.isAudioEncryption=this.isAudioEncryption,this.isVideoEncryption||this.isAudioEncryption){e.audioTimeScale=this.meta.audioTimeScale,e.videoTimeScale=this.meta.videoTimeScale,e.useEME=this.useEME,e.kidValue=this.kidValue;var r=e.samples.length,n=e.sampleOffset,i=r+n;return 1===e.id&&this.meta.videoSenc?e.videoSenc=this.meta.videoSenc.slice(n,i):this.meta.audioSenc&&(e.audioSenc=this.meta.audioSenc.slice(n,i)),this.crypto?this.crypto.decryptBody(e,this.kidValue).then((function(e){return e})):new Promise((function(r){t.write(u.default.styp(e)),t.write(u.default.sidx(e)),t.write(u.default.moof(e)),t.write(u.default.mdat(e)),r(t.buffer)}))}return new Promise((function(r){t.write(u.default.moof(e)),t.write(u.default.mdat(e)),r(t.buffer)}))}},{key:"getVideoBuffer",value:function(e,t,r){var n=(this.isVideoEncryption||this.isAudioEncryption)&&this.useEME?3585:3841,i=this.videoKeyFrames.map((function(e){return e.idx})),a=this.getSamplesByOrders("video",i[r],i[r+1]),o=a.map((function(r,n){return{size:r.size,duration:r.time.duration,offset:r.time.offset,buffer:new Uint8Array(e.slice(r.offset-t,r.offset-t+r.size)),key:0===n,idx:r.idx}}));return this.addFragment({id:1,time:a[0].time.time,firstFlags:33554432,flags:n,samples:o,sampleOffset:a[0].idx,fragIndex:r})}},{key:"getAudioBuffer",value:function(e,t,r){var n=(this.isVideoEncryption||this.isAudioEncryption)&&this.useEME?513:1793,i=this.getSamplesByOrders("audio",this.audioKeyFrames[r].order,this.audioKeyFrames[r+1]?this.audioKeyFrames[r+1].order:void 0),a=i.map((function(r,n){return{size:r.size,duration:r.time.duration,offset:r.time.offset,buffer:new Uint8Array(e.slice(r.offset-t,r.offset-t+r.size)),key:0===n}}));return this.addFragment({id:2,time:i[0].time.time,firstFlags:0,flags:n,samples:a,sampleOffset:i[0].idx,fragIndex:r})}},{key:"createFragment",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this,a=[],o=[i.getVideoBuffer(e,t,r)];return this.audioTrak&&o.push(i.getAudioBuffer(e,t,r)),Promise.all(o).then((function(e){a.push(e[0]),e&&e[1]&&a.push(e[1]);var t=0;a.every((function(e){return t+=e.byteLength,!0}));var r=new Uint8Array(t),i=0;return a.every((function(e){return r.set(e,i),i+=e.byteLength,!0})),n.buffer=r,n}))}},{key:"update",value:function(e){this.url=e}},{key:"destroy",value:function(){if(!this.hasDestroyed){for(var e in this)delete this[e];this.hasDestroyed=!0}}},{key:"videoKeyFrames",get:function(){if(this._videoFrames)return this._videoFrames;var e=this.videoTrak,t=c.default.findBox(e,"stss"),r=c.default.findBox(e,"stsc"),n=c.default.findBox(e,"ctts");if(this._cttsObj=null,n){this._cttsObj={};for(var i=0,a=0;a<n.entry.length;a++)for(var o=n.entry[a],s=0;s<o.count;s++)this._cttsObj[i]=o.offset,0===i&&(this._cttsObj[i]=0),i+=1}this._stscVideoObj={};for(var u=0,l=0;l<r.count-1;l++)for(var d=r.entries[l],f=0;f<d.chunk_count*d.samples_per_chunk;f++)u++,this._stscVideoObj[u]=d;var h=this.getSamplesByOrders("video",t.entries.map((function(e){return e-1})));return this._stssObj=t,this._videoFrames=h,h}},{key:"audioKeyFrames",get:function(){if(this._audioFrames)return this._audioFrames;var e,t=c.default.findBox(this.videoTrak,"mdhd").timescale,r=c.default.findBox(this.audioTrak,"mdhd").timescale,n=c.default.findBox(this.audioTrak,"stts").entry,i=c.default.findBox(this.audioTrak,"stsc");this._stscAudioObj={};for(var a=0,o=0;o<i.count-1;o++)for(var s=i.entries[o],u=0;u<s.chunk_count*s.samples_per_chunk;u++)a++,this._stscAudioObj[a]=s;return e=this.videoKeyFrames.map((function(e){return c.default.seekOrderSampleByTime(n,r,e.time.time/t)})),this._audioFrames=e,this._audioFrames}}]),e}();t.default=m,t.MP4_EVENTS=g},function(e,t,r){"use strict";e.exports=function(e){return null!=e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=(n=r(19))&&n.__esModule?n:{default:n},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,r=t.byteLength,n=new Uint8Array(r),i=0,a=0;a<r;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(n[i]=t[a],i++);return new Uint8Array(n.buffer,0,i)}},{key:"parseSPS",value:function(t){var r=e._ebsp2rbsp(t),n=new a.default(r);n.readByte();var i=n.readByte();n.readByte();var o=n.readByte();n.readUEG();var s=e.getProfileString(i),u=e.getLevelString(o),l=1,c=420,d=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(l=n.readUEG())&&n.readBits(1),l<=3&&(c=[0,420,422,444][l]),d=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool()))for(var f=3!==l?8:12,h=0;h<f;h++)n.readBool()&&(h<6?e._skipScalingList(n,16):e._skipScalingList(n,64));n.readUEG();var p=n.readUEG();if(0===p)n.readUEG();else if(1===p){n.readBits(1),n.readSEG(),n.readSEG();for(var v=n.readUEG(),g=0;g<v;g++)n.readSEG()}n.readUEG(),n.readBits(1);var m=n.readUEG(),y=n.readUEG(),_=n.readBits(1);0===_&&n.readBits(1),n.readBits(1);var w=0,b=0,E=0,T=0;n.readBool()&&(w=n.readUEG(),b=n.readUEG(),E=n.readUEG(),T=n.readUEG());var C=1,S=1,k=0,O=!0,R=0,A=0;if(n.readBool()){if(n.readBool()){var x=n.readByte();x>0&&x<16?(C=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][x-1],S=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][x-1]):255===x&&(C=n.readByte()<<8|n.readByte(),S=n.readByte()<<8|n.readByte())}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){var L=n.readBits(32),D=n.readBits(32);O=n.readBool(),k=(R=D)/(A=2*L)}}var P=1;1===C&&1===S||(P=C/S);var M=0,I=0;0===l?(M=1,I=2-_):(M=3===l?1:2,I=(1===l?2:1)*(2-_));var U=16*(m+1),B=16*(y+1)*(2-_);U-=(w+b)*M,B-=(E+T)*I;var F=Math.ceil(U*P);return n.destroy(),n=null,{profile_string:s,level_string:u,bit_depth:d,chroma_format:c,chroma_format_string:e.getChromaFormatString(c),frame_rate:{fixed:O,fps:k,fps_den:A,fps_num:R},par_ratio:{width:C,height:S},codec_size:{width:U,height:B},present_size:{width:F,height:B}}}},{key:"_skipScalingList",value:function(e,t){for(var r=8,n=8,i=0;i<t;i++)0!==n&&(n=(r+e.readSEG()+256)%256),r=0===n?r:n}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}},{key:"toVideoMeta",value:function(e){var t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;var r=t.frameRate.fps_den,n=t.frameRate.fps_num;t.refSampleDuration=Math.floor(t.timescale*(r/n))}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="Golomb",this._buffer=t,this._bufferIndex=0,this._totalBytes=t.byteLength,this._totalBits=8*t.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}return n(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),r=new Uint8Array(4);r.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(r.buffer).getUint32(0),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}},{key:"readBits",value:function(e){var t=Math.min(this._currentWordBitsLeft,e),r=this._currentWord>>>32-t;if(e>32)throw new Error("Cannot read more than 32 bits at a time");return this._currentWordBitsLeft-=t,this._currentWordBitsLeft>0?this._currentWord<<=t:this._totalBytes-this._bufferIndex>0&&this._fillCurrentWord(),(t=e-t)>0&&this._currentWordBitsLeft?r<<t|this.readBits(t):r}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=(n=r(11))&&n.__esModule?n:{default:n},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffer=new Uint8Array(0)}return i(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){t?e.buffer=(0,a.default)(Uint8Array,e.buffer,t):window.console.error(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_EVENTS={MEDIA_EXPIRED:"MEDIA_EXPIRED",INIT_FAIL:"INIT_FAIL",PARSE_ERROR:"PARSE_ERROR",PLAYER_LOG:"PLAYER_LOG",BUFFERED_RESET:"BUFFERED_RESET"},t.TASK_ERROR="TASK_ERROR",t.TASK_PROGRESS="progress_event",t.TASK_ERROR_TYPES={ERROR:"ERROR",CANCEL:"CANCEL",TIMEOUT:"TIMEOUT"},t.BUFFER_BREAK=2e4},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=void 0,r=void 0,n=new Promise((function(e,n){t=e,r=n}));return n.resolve=t,n.reject=r,n}return n(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"install",value:function(){if(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame,!window.requestAnimationFrame){var e=Date.now();window.requestAnimationFrame=function(t){var r=Date.now(),n=Math.max(16.7-(r-e),0),i=setTimeout(t,n);return e=r+n,i}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){e.exports=r(25)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(26),o=r(27),s=r(15),u=r(16),l=O(u),c=O(r(14)),d=O(r(114)),f=O(r(115)),h=O(r(118)),p=r(119),v=O(p),g=r(121),m=O(r(7)),y=O(r(122)),_=O(r(123)),w=r(21),b=r(8),E=O(r(2)),T=O(r(125)),C=r(6),S=r(5),k=O(r(135));function O(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=s.prelaodconstans.PRELOAD_NEXT,x=null,L=null,D=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._pendingPromises=[],r._allInitPromise=new m.default,r._isInit=!1,r._isEventInit=!1,r.playerId=r.player._pluginInfoId,r.mp4Preloader=null,r.bitRateAdapter=null,r.gapJumpInst=null,r.log("playerId",r.playerId),r._tickInSeconds=r.config.tickInSeconds,r._hasStartProgress=!0,r._hasStartProgressBack=!0,r.awManager=null,r._hasInited=!1,r._useVideoLoad=!1,r.mse=null,r.mp4=null,r.eme=null,r._awPromise=null,r._corePromise=null,r._initPromise=null,r._hasStartProgress=!1,r._hasStartProgressBack=!1,r._maxBufferLength=r.config.maxBufferLength,r._minBufferLength=r.config.minBufferLength,r.preLoadData={vid:r.config.vid,duration:0,byteLength:0,type:0},r.forPreloadTimeCache={vid:r.config.vid,preloadTime:r.config.preloadTime,mediaSegList:[],type:0},r._onBufferedReset=r._onBufferedReset.bind(r),r._onSeeking=r._onSeeking.bind(r),r._onMp4Init=r._onMp4Init.bind(r),r._onWaiting=r._onWaiting.bind(r),r._onEnded=r._onEnded.bind(r),r._onUrlChange=r._onUrlChange.bind(r),r._replay=r._onReplay.bind(r),r._onOnlineHandler=r._onOnlineHandler.bind(r),r._onOfflineHandler=r._onOfflineHandler.bind(r),r._unbindNetworkStateChange=r._unbindNetworkStateChange.bind(r),r._onVideoTimeupdate=r._onVideoTimeupdate.bind(r),r._onVideoTimeUpdate=r._onVideoTimeUpdate.bind(r),window&&window.location.href.indexOf("playerInstance=true")>-1&&(void 0===window.mp4PlayerInstanceList&&(window.mp4PlayerInstanceList=[]),window.mp4PlayerInstanceList.push(r.player)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"pluginName",get:function(){return"Mp4EncryptPlayer"}},{key:"defaultConfig",get:function(){return{onlyInit:!1,useWaterLevel:!1,maxBufferLength:10,minBufferLength:5,tickInSeconds:.2,preloadMaxCacheCount:0,getLicenseUrl:"//i.snssdk.com/video/drm/v1/play_licenses",xhrSetup:{},preloadCacheType:1,mp4Init:!1,needPreloadRangeList:!1,cdnHost:"",cdnBucket:"",retryCount:5,isEncrypt:!1,needPreloadCheck:!1,needAutoBitrate:!0,keyValue:null,drm:null}}},{key:"speed",get:function(){return c.default.speed}},{key:"realTimeSpeed",get:function(){return c.default.realTimeSpeed}}]),i(t,[{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,r=this.config,n=this.player;o.MSE.isSupported('video/mp4; codecs="avc1.64001E, mp4a.40.5"')&&(r.onlyInit&&(t.autoplay=!1,t.videoInit=!1,this._hasStartProgress=!1,this._hasStartProgressBack=!1),t.useWaterLevel&&(!t.userGestureEventMiddleware&&(t.userGestureEventMiddleware=C.userGestureEventMiddleware),!t.videoEventMiddleware&&n.setEventsMiddleware(C.videoEventMiddleware)),this.gapJumpInst=new T.default(this.player,this.playerConfig),this.config.needAutoBitrate&&(this.bitRateAdapter=new k.default({config:this.config.bitrateAdapt})),this.mp4Preloader=new _.default(this.config,this,this.bitRateAdapter),this._proxyPlayer(),this.initAwManager(),n.useHooks("replay",(function(t){"xgmse-video"===e.player.config.mediaType?e._onReplay():e.useVideoLoad||(e._startProgress(),e.player.currentTime=0,e._loadData(0,0),e.player.play())})),n.video.addEventListener(w.CUSTOM_EVENTS.BUFFERED_RESET,this._onBufferedReset),n.video.addEventListener("timeupdate",this._onVideoTimeupdate),this._bindNetworkStateChange(),this.on(a.Events.TIME_UPDATE,this._onVideoTimeUpdate))}},{key:"beforePlayerInit",value:function(){var e=this.player,t=this;this._isInit||(a.BasePlugin.defineGetterOrSetter(e,{__url:{get:function(){return t.mse?t.mse.url:e.config.url}}}),this._isInit=!0)}},{key:"initAwManager",value:function(){var e=this,t=this.config;this.awManager||(this.awManager=new v.default(t.cdnHost,t.cdnBucket));var r=new m.default;if(r.id="aw",this._awPromise=r,this.config.isEncrypt){var n=new h.default;n.push(this.awManager.init()),n.startup().then((function(){n.destroy(),r.resolve()})).catch((function(t){n.destroy(),t===p.AW_ERRORS.FETCH_ERROR?e._hasInited=!1:e._emitInitFail(t),r.reject()}))}else r.resolve()}},{key:"_proxyPlayer",value:function(){var e=this;"function"==typeof this.player.playNext&&(x=this.player.playNext),this.player.playNext=function(){e.playNext.apply(e,arguments)},L=this.player._startInit,this.player._startInit=this.playerStartInit.bind(this)}},{key:"getInitBitrate",value:function(){var e=this,t=this.player,r=this.config,n=this.playerConfig,i=r.preloadTime,a=r.vid,o=null;return t.definitionList&&t.definitionList.length>0&&(t.definitionList.map((function(t){var r=E.default.generateUniqueKey({vid:a,preloadTime:i,definition:t.definition||""});t.cacheKey=r,!o&&e.mp4Preloader&&e.mp4Preloader.hasItemSameVid(r)&&((o=t).type="preload")})),!o&&this.bitRateAdapter&&c.default.speed&&(this.bitRateAdapter.speed=c.default.speed,(o=this.bitRateAdapter.select(t.definitionList)).type="bitRateAdapter")),o?(this.playerConfig.url=o.url,r.definition=o.definition):o={url:n.url,definition:n.defaultDefinition||r.definition,bitrate:n.defaultBitrate||n.bitrate,type:"default"},o.networkSpeed=c.default.speed,t.curDefinition=o,o}},{key:"_setPlayerSrc",value:function(e){var t=this.player;this._removeVideoSource(),"Array"===a.Util.typeOf(e)?(t.video.removeAttribute("src"),!t._detachSourceEvents&&e.forEach((function(e){t.video.appendChild(a.Util.createDom("source","",{src:""+e.src,type:""+(e.type||"")}))})),t._attachSourceEvents(t.video,e),t.play()):(t.video.src=e,t.play())}},{key:"_removeVideoSource",value:function(e){var t=this.player,r=t.video.children;if(r.length>0)for(t._detachSourceEvents(t.video);r.length>0;)t.video.removeChild(r[0])}},{key:"_initMp4Kernel",value:function(){var e=this,t=this.playerConfig,r=this.config,n=new m.default;try{var i=this.getInitBitrate();if(this.log("curDefinition",i),!this._handleUrl(t.url))return n.reject(new Error("emptyUrl")),n;var a=[];a.push(this._getLicense()),a.push(this._checkPreloader()),Promise.all(a).then((function(t){e.isDestroy&&n.reject(new Error("destroy"));var i=null,a=null;if(t&&t.length>0&&t[1]&&(a=(i=t[1].data)&&i.meta?i.meta:null),!a&&r.needPreloadCheck)e.useVideoLoad=!0,n.reject(new Error("no_preload"));else{var o=r._mainURL;e._initMp4(o,n,i)}})).catch((function(t){e.changeState(22,{d:i.definition}),n.reject(t)}))}catch(e){n.reject(e)}return n}},{key:"playerStartInit",value:function(e){var t=this;this.isDestroy||(this.changeState(0),this._awPromise.then((function(){if(!t.isDestroy){t.changeState(11);var r=t._initMp4Kernel();t._corePromise=r,r.then((function(r){t.log("_initMp4Kernel.then:isDestroy"+t.isDestroy,r),t.isDestroy||(t.mse&&(e=t.mse.url),t.changeState(72),t._bindEvents(),t._startProgress())})).catch((function(r){if(t.log("_initMp4Kernel.catch:isDestroy:"+t.isDestroy,r),!t.isDestroy){var n=r;n.errorCode||((n=new a.Errors(t.player,{errorType:"runtime",errorTypeCode:1002,errorCode:S.ERROR_CODES.other,vid:t.config.vid,errorMessage:r.message,mediaError:{code:S.ERROR_CODES.other,message:r.message}})).url=e),t.changeState(71,{c:n.errorCode,m:n.message}),t.player.emit("playCatch","dash1mp4",n)}})).finally((function(){t.log("_initMp4Kernel.finally:isDestroy"+t.isDestroy),!t.isDestroy&&L.call(t.player,e)}))}})).catch((function(r){t.log("_awPromise.error",r),t.changeState(12),!t.isDestroy&&L.call(t.player,e)})))}},{key:"playNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.preLoadData={vid:this.config.vid,duration:0,byteLength:0,type:0},this.player.curDefinition=null;var r=this.playerConfig,n=this.config,i=this.player;n.vid=e.vid,n.definition=e.definition,r.url=e.url,r.backupURL=e.backupURL,r.vid=e.vid,Object.keys(t).map((function(e){n[e]=t[e]})),this.player.definitionList=e.definitionList||[],this._useVideoLoad=!1,i.currentTime=0,i.pause(),this._onDestroy(),this._handleUrl(e.url),i.video.removeAttribute("src"),this._removeVideoSource(),i.resetState(),i.play(),this.emit("logger_next")}},{key:"switchURL",value:function(e){var t=this,r=this.config,n=this.player,i=new l.default(e,{xhrSetup:r.xhrSetup,chunkSize:r.preloadSize,playerId:this.playerId,vid:r.vid,useUrlRange:r.useUrlRange},this,null,{}),s=this.mp4;(0,C.on)(i,"moovReady",(function(){s.timeRage;var e=n.currentTime,r=s.timeRage.find((function(t){return t[0]-e>2}))[0],u=n.getBufferedRange(n.buffered2)[1];u-r>0&&"safari"!==a.Sniffer.browser&&t.mse.removeBuffer(o.CONTENT_TYPES.VIDEO,r,u),t.mp4=i,t.mse.appendBuffer(o.CONTENT_TYPES.VIDEO,i.packMeta(s.meta)).catch((function(e){console.error("appendBuffer error",e);var r=new a.Errors(t.player,{errorType:"runtime",errorTypeCode:1002,errorCode:S.ERROR_CODES.mse,vid:n.config.vid,errorMessage:e.message,mediaError:{code:S.ERROR_CODES.mse,message:e.message}});t._errorHandler(r)})),s.destroy()})),(0,C.on)(i,"error",(function(e){console.error("_errorHandle3",e),t._errorHandler(e)}))}},{key:"_handleUrl",value:function(e){var t=this.config,r=this.playerConfig;if(!e)return!1;var n=void 0,i=[];if("String"===a.Util.typeOf(e))n=e,r.backupURL&&i.push(r.backupURL);else if("Array"===a.Util.typeOf(e)&&e.length>0&&(n=e[0].src,e.length>1))for(var o=1;o<e.length;o++)i.push(e[o].src);return!(!n&&0===i.length||(t._mainURL=n,t._backupURL=i,0))}},{key:"_bindEvents",value:function(){this._isEventInit||(this.on("seeking",this._onSeeking),this.on("waiting",this._onWaiting),this.on("urlchange",this._onUrlChange),this.on("ended",this._onEnded)),this._isEventInit=!0;var e=this.player;this.once("playing",this._onMp4Init),this.once("canplay",(function(){if("safari"===a.Sniffer.browser&&e.buffered&&e.config.autoplay){var t=e.buffered.start(0);t>0&&(e.currentTime=t+.1)}}))}},{key:"_unbindEvents",value:function(){this.off("seeking",this._onSeeking),this.off("waiting",this._onWaiting),this.off("urlchange",this._onUrlChange),this.off("playing",this._onMp4Init),this.off("ended",this._onEnded),this._isEventInit=!1}},{key:"changeState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pTime||(this._pTime=E.default.nowTime()),this.log(">>>changeState["+e+"]",E.default.nowTime()-this._pTime,t),this._pTime=E.default.nowTime();var r=E.default.nowTime()-this._pTime;t.state=e,r&&(t.t=r),this.emit("mp4StateChange",t)}},{key:"checkIfCanPreload",value:function(){var e=this.player,t=this.useVideoLoad,r=t?15:this._minBufferLength,n=e.currentTime+r;n=n>e.duration?e.duration:n;var i=(t?e.getBufferedRange(e.buffered):e.getBufferedRange(e.buffered2))[1]-n;(i>0||Math.abs(i)<1)&&(this.mp4Preloader&&this.mp4Preloader.preloadNext(),this.emit(A))}},{key:"_getLicense",value:function(){var e=this,t=this.config,r=t.vid,n=t.kid,i=t.secretKey,a=new m.default,o={method:"getLicense",success:0};if(n||i){var s=(0,C.getKeyValue)(r,n,i,this);s.id="licensePromise",this._addPendingPromise(s),s.then((function(t){e._removePendingPromise(s),t.clearKeys?e.config.drm=t:e.config.keyValue=t,o.success=1,a.resolve(o)})).catch((function(t){throw e.log("licensePromise reject"),o.success=0,o.error=t,a.reject(o),t}))}else o.success=0,a.resolve(o);return a}},{key:"_initMp4",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.config;return n&&n.meta||!i.needPreloadCheck?(this.mp4=new l.default(e,{xhrSetup:i.xhrSetup,chunkSize:i.preloadSize,loadSize:800,playerId:this.playerId,vid:i.vid,useUrlRange:i.useUrlRange},this,null,n),(0,C.once)(this.mp4,"metaReady",(function(e){var i=r._checkCodecH265(e);if(r.changeState(41,{is265:i?1:0}),!i&&e)try{r._initEME(r.mp4,e),r._initMse(r.mp4,e,n),t.resolve()}catch(e){t.reject(e)}else t.reject(i)})),(0,C.once)(this.mp4,"error",(function(e){r.log("_errorHandle2",e),r.changeState(42,{c:e.errorCode}),t.reject(e)})),setTimeout((function(){r.isDestroy||"pending"!==t.state||t.reject(new Error("timeout"))}),5e3),(0,C.on)(this.mp4,u.MP4_EVENTS.TASK_PROGRESS,(function(e){r.emit("progress_event",e)})),t):(this.useVideoLoad=!0,void t.reject(new Error("no_preload")))}},{key:"_checkPreloader",value:function(){var e=this,t=this.config,r=this.player,n=new m.default,i=t.preloadTime,a={method:"checkPreloader",success:0,type:"error",cacheKey:""};if(this.changeState(32),i){var o=r.curDefinition&&r.curDefinition.cacheKey?r.curDefinition.cacheKey:E.default.generateUniqueKey({vid:t.vid,preloadTime:i,definition:t.definition||""});a.cacheKey=o,o&&this.preloader?(this.log(">>>>check Preloader result",o),this.preloader.getItemSameVid(o).then((function(t){if(e.log(">>>>check Preloader result",o,t),t.value){var r=t.value,i=r.mediaSegList,s=r.meta,u=r.type,l=i&&i.length>0?i[i.length-1]:null;e.preLoadData={duration:l?-1===l.timeRage[1]?s.duration:l.timeRage[1]:0,byteLength:l&&l.range?l.range[1]:0,vid:e.config.vid,type:u||1},e.log("checkPreloader result",e.preLoadData,l.range),e.emit("PRELOAD_INFO",e.preLoadData),a.success=1,a.data=t.value,e.changeState(31,{l:e.preLoadData.byteLength,ck:o}),n.resolve(a)}else e.changeState(33,{t:0}),a.success=0,a.error=new Error("none_preload"),n.resolve(a)})).catch((function(t){e.changeState(33,{t:1}),a.success=0,a.error=t,n.resolve(a)}))):(this.changeState(33,{t:2}),a.success=0,a.error=new Error("no_preloader"),n.resolve(a))}else this.changeState(33,{t:3}),a.success=0,a.error=new Error("no_preloadTime"),n.resolve(a);return n}},{key:"_getPreloadRangeList",value:function(e){var t=this.config;if(this.mp4Preloader){var r=this.mp4Preloader.getRangeList(t.vid);if(r.contentRange.length>0)for(var n=0;n<e.timeRage.length;n++)for(var i=e.getFragRange(n),a=0;a<r.contentRange.length;a++){var o=r.contentRange[a][0],s=r.contentRange[a][1];o<=i[0]&&i[0]<=s&&(e.timeRage[n].preloaded=!0),i[0]>=o&&i[1]<=s&&""!==i[1]&&(e.timeRage[n].fullData=!0)}if(r.timeRange.length>0)for(var u=0;u<e.timeRage.length;u++)for(var l=e.timeRage[u],c=0;c<r.timeRange.length;c++)l[0]>=r.timeRange[c][0]&&l[1]<=r.timeRange[c][1]&&-1!==l[1]&&(e.timeRage[u].preloaded=!0,e.timeRage[u].fullData=!0);for(var d=JSON.parse(JSON.stringify(e.timeRage)),f=0;f<e.timeRage.length;f++)d[f].downloaded=e.timeRage[f].preloaded||!1,d[f].fullData=e.timeRage[f].fullData||!1;this.emit("PRELOAD_RANGE_LIST",d)}}},{key:"_initEME",value:function(e,t){var r=this.player,n=this.config,i=t.videoCodec.indexOf("hvc1")>-1||t.encv&&t.encv.data_format.indexOf("hvc1")>-1;n.useEME=!(!1===n.useEME||i),t.kid&&n.keyValue&&(n.drm={clearKeys:R({},t.kid,n.keyValue)});var a=n.drm;a&&a.clearKeys&&(this.eme=new d.default(a),e.kids=a,this.log("config.useEME: ",n.useEME),e.useEME=n.useEME,e.useEME||(e.kidValue=a.clearKeys[Object.keys(a.clearKeys)[0]],e.crypto=new f.default)),!n.keyValue&&!a||e.useEME||(e.kidValue||(e.kidValue=n.keyValue||a),e.crypto=new f.default),e.useEME&&this.eme&&(this.eme.Options('video/mp4; codecs="avc1.64001E"','audio/mp4; codecs="mp4a.40.2"'),this.eme.SetupEME(r.video))}},{key:"_initMse",value:function(e,t){var r=this,n=this.player,i=this.playerConfig,s=this.config,u=t.videoCodec.indexOf("hvc1")>-1||t.encv&&t.encv.data_format.indexOf("hvc1")>-1;if(s.preloadTime){for(var l=[],c=0;c<e.timeRage.length&&!(s.preloadTime<e.timeRage[c][0]);c++)l.push({timeRage:e.timeRage[c]});this.forPreloadTimeCache={vid:s.vid,preloadTime:s.preloadTime,mediaSegList:l}}s.needPreloadRangeList&&this._getPreloadRangeList(e);var d,f=!!t.videoCodec,h=!!t.audioCodec;d=f&&h?u?'video/mp4; codecs="hev1.1.6.L93.B0, mp4a.40.5"':'video/mp4; codecs="avc1.64001E, mp4a.40.5"':f?u?'video/mp4; codecs="hev1.1.6.L93.B0"':'video/mp4; codecs="avc1.64001E"':'video/mp4; codecs="mp4a.40.5"';var p=R({},o.CONTENT_TYPES.VIDEO,{mimeType:"video/mp4",codec:d}),v=new o.MSE(i.mediaType);v.init(p),v.sourceOpenPromise().then((function(){r.log("player sourceopen appendBuffer"),r.changeState(51);var i=e.packMeta(e.meta);s.preloadTime&&(r.forPreloadTimeCache.meta=t,r.forPreloadTimeCache.initSeg=i),v.appendBuffer(o.CONTENT_TYPES.VIDEO,i).then((function(){r.log("player init seg updateend"),r.changeState(52),e.useEME&&r.eme&&r.eme.emit("encrypted"),r._loadData()})).catch((function(e){r.changeState(54),r.log("appendBuffer error",e);var t=new a.Errors(r.player,{errorType:"runtime",errorTypeCode:1002,errorCode:S.ERROR_CODES.mse,vid:n.config.vid,errorMessage:e.message,mediaError:{code:S.ERROR_CODES.mse,message:e.message}});r._errorHandler(t)}))})).catch((function(e){r.changeState(53);var t=new a.Errors(r.player,{errorType:"runtime",errorTypeCode:1002,errorCode:S.ERROR_CODES.mseOpen,errorMessage:e.message,vid:n.config.vid,mediaError:{code:S.ERROR_CODES.mseOpen,message:e.message}});r._errorHandler(t)})),this.mse=v}},{key:"_checkCodecH265",value:function(e){return!(!e||!(e.videoCodec.indexOf("hvc1")>-1||e.encv&&e.encv.data_format.indexOf("hvc1")>-1))&&new a.Errors(this.player,{errorType:"format",errorTypeCode:1005,errorCode:S.ERROR_CODES.h265Error,errorMessage:"h265_is_not_support",vid:this.player.config.vid,mediaError:{code:S.ERROR_CODES.h265Error,message:"h265_is_not_support"}})}},{key:"_cacheBuffer",value:function(e,t,r,n){var i=this,a=this.config;if(this.forPreloadTimeCache.vid===a.vid){for(var o=this.mp4.timeRage,s=0;s<o.length;s++)e>=o[s][0]&&(e<o[s][1]||-1===o[s][1])&&(this.forPreloadTimeCache.mediaSegList[s].buffer=t,this.forPreloadTimeCache.mediaSegList[s].index=s,this.forPreloadTimeCache.mediaSegList[s].range=r,this.forPreloadTimeCache.mediaSegList[s].costTime=n?n.costTime:0);var u=this.forPreloadTimeCache.mediaSegList.every((function(e){return!!e.buffer}));if(this.log("_cacheBuffer","time:"+e+", needSetItem:"+u),u){var l=this.player.curDefinition,c=l&&l.cacheKey?l.cacheKey:E.default.generateUniqueKey({vid:a.vid,preloadTime:a.preloadTime,definition:a.definition||""});c&&this.preloader.getItemSameVid(c).then((function(e){e.value||i.preloader.setItem(c,{meta:i.forPreloadTimeCache.meta,initSeg:i.forPreloadTimeCache.initSeg,mediaSegList:i.forPreloadTimeCache.mediaSegList,type:2}).catch((function(e){console.error("this.preloader.setItem error",e)}))})).catch((function(e){console.error("getItemSameVid error",e)}))}}}},{key:"_onVideoTimeupdate",value:function(){null===this._requestTimer&&this._startProgress()}},{key:"_onVideoTimeUpdate",value:function(){this.useVideoLoad&&this.checkIfCanPreload()}},{key:"_onBufferedReset",value:function(e){this.mp4&&this.mp4.timeRage&&this.mp4.timeRage.forEach((function(e){e.downloaded=!1}))}},{key:"_onOnlineHandler",value:function(){var e=this.config;this.log("online hasInit:",this._hasInited),this._hasInited?(this._hasStartProgressBack&&this._startProgress(),this._hasStartProgressBack=!1):this.src=e._mainURL}},{key:"_onOfflineHandler",value:function(){this.log("offline"),this._hasStartProgress&&(this._stopProgress(),this._hasStartProgressBack=!0)}},{key:"_bindNetworkStateChange",value:function(){window.addEventListener("online",this._onOnlineHandler),window.addEventListener("offline",this._onOfflineHandler)}},{key:"_unbindNetworkStateChange",value:function(){window.removeEventListener("online",this._onOnlineHandler),window.removeEventListener("offline",this._onOfflineHandler)}},{key:"_onSuperStart",value:function(e){var t=this,r=this.player;(0,b.log)("_onSuperStart:"+e,this.mse),r.video.src=e,this.once("canplay",(function(){r.play(),t.on("waiting",t._onWaiting)}))}},{key:"_onUrlChange",value:function(e){}},{key:"_loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(navigator.onLine)if(this.mp4){var n=this.player,i=this.config;r=null===r?n.currentTime:r;var s=i.vid;this.mp4.seek(r+.1*t).then((function(u){if(!e.isDestroy){var l=u.buffer,c=u.range,d=u.context;if(l&&e.mse){var f=e.mse;if(i.preloadTime&&r+.1*t<=i.preloadTime&&e.preloader&&e._cacheBuffer(r+.1*t,l,c,d),s!==i.vid)return;f.appendBuffer(o.CONTENT_TYPES.VIDEO,l).then((function(){e.gapJumpInst&&e.gapJumpInst.onSegmentAppend(e.mp4.timeRage)})).catch((function(t){console.error("appendBuffer error",s,d.range,t);var r=new a.Errors(e.player,{errorType:"runtime",errorTypeCode:1002,errorCode:S.ERROR_CODES.mseAppend,errorMessage:t.message,vid:n.config.vid,mediaError:{code:S.ERROR_CODES.mseAppend,message:t.message}});e._errorHandler(r)})),e.on("detectGap",(function(){i.gapDegrade&&i.useEME&&(i.useEME=!1,e._replay())}))}}}),(function(n){if(!e.isDestroy){var i=e.config.retryCount;"network"===n.errorType&&(408===n.errorCode||-1===n.errorCode)&&t<i?setTimeout((function(){e._loadData&&e._loadData(t+1,r)}),2e3):(e.log("_errorHandle5",n),e._errorHandler(n))}}))}else this.log("loadData, player.mp4 null")}},{key:"_onTimeUpdate",value:function(){var e=this,t=this.mse,r=this.mp4,n=this.player,i=this.config;if(this.useVideoLoad)this.checkIfCanPreload();else if(t&&r&&r.canDownload){i.disableBufferBreakCheck||(n.currentTime-(this._lastCurrentTime||0)>.1||n.paused?1!==this._bufferBreakFlag&&2!==this._bufferBreakFlag||(this.log("视频没有卡死，重置卡死标记"),this._bufferBreakFlag=0,clearTimeout(this._bufferBreakTimer),this._bufferBreakFlag=null):this._bufferBreakFlag||(this._bufferBreakFlag=1,this.log("卡死计时开始！持续"+w.BUFFER_BREAK+"毫秒则确认卡死"),this._bufferBreakTimer=setTimeout((function(){e.isDestroy||(1===e._bufferBreakFlag&&(e._bufferBreakFlag=2,e.log("确认卡死！！！"),e._errorHandler(new a.Errors(e.player,{errorType:"runtime",errorTypeCode:1002,errorCode:S.ERROR_CODES.waitTimeout,errorMessage:"wait_timeout",vid:n.config.vid,mediaError:{code:S.ERROR_CODES.waitTimeout}}))),e._bufferBreakTimer=null)}),w.BUFFER_BREAK)),this._lastCurrentTime=n.currentTime);var o=r.timeRage,s=n.getBufferedRange(n.buffered2),u=n.currentTime+this._maxBufferLength;s[1]-u<0&&o.every((function(t,r){return!(!t.downloaded&&(0===s[1]?t[0]<=n.currentTime&&(n.currentTime<t[1]||-1===t[1])&&(e._loadData(0,t[0]),1):(t[0]>=s[1]||t[1]-1>=s[1]||s[1]>=t[0]&&s[1]<=t[0]+1)&&(e._loadData(0,t[0]),1)))})),this.checkIfCanPreload(),this._isEnded()}}},{key:"_onWaiting",value:function(){var e=this.player,t=e.currentTime;this._onInnerWait(t),t+2<e.duration&&this._onInnerWait(t+2),t-2>0&&this._onInnerWait(t-2)}},{key:"_onEnded",value:function(){this.off("waiting",this._onWaiting),this._stopProgress()}},{key:"_onReplay",value:function(){var e=this,t=this.playerConfig,r=this.player;this._onDestroy(),this._init(t.url).then((function(t){var n=t[0],i=t[1];r.video.src=i.url,e._startProgress(),e.mp4=n,e.mse=i,e.log("_replay play"),e.once("canplay",(function(){r.play(),e.on("waiting",e._onWaiting)}))}),(function(t){e.log("_errorHandler6",t),e._errorHandler(t)}))}},{key:"_onDestroy",value:function(){this._hasInited=!1,this._unbindNetworkStateChange(),this.log("destroy clear"),c.default.clear(this.playerId),this.mp4&&(this.mp4.destroy(),this.mp4=null),this.mse&&(this.mse.destroy(),this.mse=null),this._clearMediaKeys(),this._unloadVideo(),this._stopProgress(),this.cancelPendingPromises()}},{key:"removeExpiredUrls",value:function(e,t,r){var n=this.playerConfig;if(-499897===e.errorCode&&"Array"===a.Util.typeOf(n.url)){console.log("this.mp4.url",t);for(var i=0;i<n.url.length;i++)if(r[i].src===this.mp4.url){r.splice(i,1),r.length<2&&(r=r[0].src);break}}return r}},{key:"_errorHandler",value:function(e){var t=this,r=this.player,i=this.config,o=this.playerConfig;if(e.vid=this.config.vid,e.preloadHit=this.preLoadData&&this.preLoadData.byteLength>0?1:0,e.preloadCached=this.preLoadData?this.preLoadData.duration:0,e=new a.Errors(this.player,e),this.log("_errorHandle",e),e.vid=i.vid,!e.url&&(e.url=r.src),this.player.emit("playCatch","dash2mp4",e),e.errd&&"object"===n(e.errd)&&this.mp4&&(e.errd.url=this.mp4.url,e.url=this.mp4.url),this.emit("DATA_REPORT",e),this.mp4&&this.mp4.url){var s=this.removeExpiredUrls(e,this.mp4.url,o.url);console.log("urls",s)}if(this.mp4&&(-499897===e.errorCode||-499892===e.errorCode)&&i._backupURL.length>0)return this.log("_errorHandle updateUrl to recover"),this.mp4.update(i._backupURL[0]),void i._backupURL.splice(0,1);this.log("error task cancel"),c.default.clear(this.playerId),this.mp4&&(this.mp4.canDownload=!1),this.mp4&&this.mp4.bufferCache&&this.mp4.bufferCache.clear(),r.currentTime&&(this._currentTime=r.currentTime),this.useVideoLoad=!0,this.player.pause(),this._onDestroy(),this._replay=null,this.off("seeking",this._onSeeking),this.off("playing",this._onMp4Init),this.off("waiting",this._onWaiting),this.off("ended",this._onEnded),this._setPlayerSrc(r.config.url),this.once("canplay",(function(){t._currentTime&&(r.currentTime=t._currentTime),t.log("_replay canplay",t._currentTime),r.play()}))}},{key:"_onSeeking",value:function(){var e=this.player.currentTime;this._onCheckLoad(e),this._isEnded()}},{key:"_onInnerWait",value:function(e){this._onCheckLoad(e)}},{key:"_onCheckLoad",value:function(e){var t=this,r=this.player;if(this.mp4){var n=r.buffered2||r.buffered,i=!1,a=this.mp4.timeRage;if(n.length){for(var o=0,s=n.length;o<s;o++)if(e>=n.start(o)&&e<=n.end(o)){i=!0;break}i||a.every((function(r,n){return!(r[0]<=e&&(r[1]>e||-1===r[1])&&(t._loadData(0,r[0]),1))}))}else a.every((function(r,n){return!(r[0]<=e&&r[1]>e&&(t._loadData(0,r[0]),1))}))}}},{key:"_onMp4Init",value:function(){var e=this.player;this.config.mp4Init&&e.pause()}},{key:"_stopProgress",value:function(){this._hasStartProgress=!1,this._requestTimer&&(this._requestTimer.stop(),this._requestTimer=null),this._bufferBreakTimer&&(clearTimeout(this._bufferBreakTimer),this._bufferBreakTimer=null,this._bufferBreakFlag=void 0)}},{key:"_startProgress",value:function(){var e=this;this._hasStartProgress||(this._stopProgress(),this._requestTimer=new y.default((function(){e._requestTimer&&e._onTimeUpdate()})),this._requestTimer.tickEvery(this._tickInSeconds),this._hasStartProgress=!0)}},{key:"_unloadVideo",value:function(){var e=this.player;try{this.log("unloadVideo src "+e.video.src),e.video&&e.video.src&&(e.video.removeAttribute("src"),e.video.load())}catch(e){this.log("unloadVideo error",e)}}},{key:"_addPendingPromise",value:function(e){this._pendingPromises.push(e)}},{key:"_removePendingPromise",value:function(e){this.log("removePendingPromise",e.id);var t=this._pendingPromises.indexOf(e);t>-1&&this._pendingPromises.splice(t,1)}},{key:"_onMediaExpired",value:function(){this._stopProgress(),this.emit(w.CUSTOM_EVENTS.MEDIA_EXPIRED)}},{key:"_onDestroyWasm",value:function(){this.awManager&&(this.awManager.destroy(),this.awManager=null)}},{key:"_isEnded",value:function(){var e=this.player,t=this.mp4;return!!(t&&t.meta&&t.meta.endTime-e.currentTime<.5)&&(this.mse.endOfStream().catch((function(e){console.error(e)})),this._stopProgress(),!0)}},{key:"_clearMediaKeys",value:function(){var e=this.player;"function"==typeof e.video.setMediaKeys&&e.video.setMediaKeys(null).catch((function(){}))}},{key:"onMediaUpdate",value:function(e){var t=e.vid,r=e.kid,n=e.url,i=this.player,a=this.config;if(t===a.vid&&r===a.kid&&n){this.playerConfig.url=n,this._handleUrl(n);var o=a._mainURL;return this._hasInited?this.mp4&&this.mp4.update(o):i.src=n,!0}return!1}},{key:"cancelPendingPromises",value:function(){this._pendingPromises.length>0&&this._pendingPromises.forEach((function(e){e.reject("DESTROYED")})),this._pendingPromises=[]}},{key:"enableAutoBuffer",value:function(e){var t=this;if(e){if(!this._allInitPromise)return void this.log("player destroyed!!");this._allInitPromise.then((function(){t.log("enableAutoBuffer true"),t._startProgress()}))}else this._stopProgress(),this.log("enableAutoBuffer false")}},{key:"addPreloader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.playerId=this.playerId,this.mp4Preloader?this.mp4Preloader.addPreloader(e):this.log("mp4Preloader has destroyed")}},{key:"addPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.mp4Preloader?this.mp4Preloader.addPreloaderList(e,this.playerId):this.log("mp4Preloader has destroyed")}},{key:"destroy",value:function(){var e=this.player;this.log("destroy",this.playerId),this.mp4Preloader.cancelLoading(this.playerId),this._onDestroy(),this._onDestroyWasm(),this.player.playNext=x,e.video&&(e.video.removeEventListener(w.CUSTOM_EVENTS.BUFFERED_RESET,this._onBufferedReset),e.video.removeEventListener("timeupdate",this._onVideoTimeupdate))}},{key:"log",value:function(e){for(var t=this.playerConfig,r=t&&t.uid?t.uid+" "+e:e,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];b.log.apply(void 0,[r].concat(i))}},{key:"_emitInitFail",value:function(e){this.log("initFail, reason:",e),this.emit(w.CUSTOM_EVENTS.INIT_FAIL,e)}},{key:"emitParseError",value:function(){this.log("parseError"),this.emit(w.CUSTOM_EVENTS.PARSE_ERROR)}},{key:"cancelPreloadTask",value:function(){this.mp4Preloader&&this.mp4Preloader.cancelLoading(this.playerId)}},{key:"preloader",get:function(){return this.mp4Preloader?this.mp4Preloader:null}},{key:"useVideoLoad",set:function(e){this._useVideoLoad=e},get:function(){return this._useVideoLoad}},{key:"ready",get:function(){return this._allInitPromise}},{key:"isDestroy",get:function(){return!this.player}}]),t}(a.BasePlugin);D.isSupported=g.isSupported,D.isEMESupported=g.isEMESupported,D.isSupportedWithXgmse=g.isSupportedWithXgmse,D.isMediaSourceSupported=g.isMediaSourceSupported,D.isWebAssemblySupported=g.isWebAssemblySupported,D.getPlayLicenses=C.getPlayLicenses,D.CUSTOM_EVENTS=w.CUSTOM_EVENTS,t.default=D,e.exports=t.default},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);Object.defineProperty(t,"MSE",{enumerable:!0,get:function(){return(e=n,e&&e.__esModule?e:{default:e}).default;var e}}),Object.defineProperty(t,"CONTENT_TYPES",{enumerable:!0,get:function(){return n.CONTENT_TYPES}}),Object.defineProperty(t,"ERROR_TYPES",{enumerable:!0,get:function(){return n.ERROR_TYPES}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_TYPES=t.CONTENT_TYPES=void 0;var n,i=(n=r(29))&&n.__esModule?n:{default:n},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=t.CONTENT_TYPES={VIDEO:"video",AUDIO:"audio"},u=t.ERROR_TYPES={MSE_OP_FAIL:"MS_OP_FAIL",MSE_DESTROY:"MSE_DESTROY",QuotaExceededError:"QuotaExceededError"},l=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaSource=new window.MediaSource(t),this.url=window.URL.createObjectURL(this.mediaSource),this.queue=[],this._hasDestroyed=!1,this._sourceOpenPromise=new i.default,this._onSourceOpen=this._onSourceOpen.bind(this),this._onSourceBufferError=this._onSourceBufferError.bind(this),this._onSourceBufferUpdateEnd=this._onSourceBufferUpdateEnd.bind(this),this.mediaSource.addEventListener("sourceopen",this._onSourceOpen),this.opQueues={},this.sourceBuffers={},this.updateHanders={},this.errorHandlers={},this.logger=r||function(){},this._sourceOpenDonePromise=new i.default}return a(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o({},s.VIDEO,{mimeType:"video/mp4",codec:'video/mp4; codecs="avc1.64001E, mp4a.40.5"'});this.contentTypes=t;var r=Object.keys(this.contentTypes);this._sourceOpenPromise.then((function(){for(var t=function(t){var n=r[t],i=e.contentTypes[n].codec,a=e.mediaSource.addSourceBuffer(i),o=function(){return e._onSourceBufferError(n)};a.addEventListener("error",o);var s=function(){return e._onSourceBufferUpdateEnd(n)};a.addEventListener("updateend",s),e.updateHanders={},e.sourceBuffers[n]=a,e.opQueues[n]=[],e.updateHanders[n]=s,e.errorHandlers[n]=o},n=0;n<r.length;n++)t(n);e.logger("[debug mse] mse init ready, readyState",e.mediaSource.readyState),e._sourceOpenDonePromise.resolve()}))}},{key:"sourceOpenPromise",value:function(){return this._sourceOpenPromise}},{key:"_onSourceOpen",value:function(){this.mediaSource.removeEventListener("sourceopen",this._onSourceOpen),this._sourceOpenPromise.resolve()}},{key:"_onSourceBufferError",value:function(e){this._hasDestroyed||(this.logger("[debug mse] sourceBuffer error, contentType",e,"readyState",this.mediaSource.readyState),this.opQueues[e][0].p.reject(new Error(u.MSE_OP_FAIL)))}},{key:"_onSourceBufferUpdateEnd",value:function(e){if(!this._hasDestroyed){var t=this.opQueues[e][0];t&&(t.p.resolve(),this.pop(e))}}},{key:"setDuration",value:function(e){var t=this;return this.mediaSource.duration>e?Promise.resolve():this.enqueueBlockOp((function(){t.ended()?t.logger("[debug mse] setDuration ended"):(t.logger("[debug mse] setDuration"),t.mediaSource.duration=e)}),"setDuration")}},{key:"appendBuffer",value:function(e,t){var r=this;return this.enqueueOp(e,(function(){return r._append(e,t)}),"appendBuffer")}},{key:"_append",value:function(e,t){this.sourceBuffers[e].appendBuffer(t)}},{key:"enqueueOp",value:function(e,t,r){var n=this;if(this._hasDestroyed)return Promise.reject(new Error(u.MSE_DESTROY)).catch((function(){}));var a={handler:t,p:new i.default,name:r};return this._sourceOpenDonePromise.then((function(){if(n._hasDestroyed)return a.p.reject(new Error(u.MSE_DESTROY)).catch((function(){}));n.opQueues[e]||(n.opQueues[e]=[]),n.opQueues[e].push(a),1===n.opQueues[e].length&&n.handleOp(e)})),a.p}},{key:"enqueueBlockOp",value:function(e,t){var r=this;if(this._hasDestroyed)return Promise.reject(new Error(u.MSE_DESTROY));var n=new i.default;return this._sourceOpenDonePromise.then((function(){if(r._hasDestroyed)return n.reject(new Error(u.MSE_DESTROY));for(var a=[],o=Object.keys(r.contentTypes),s=function(e){var n=o[e],s=new i.default,u={handler:function(){return s.resolve()},p:s,name:t};r.opQueues[n]||(r.opQueues[n]=[]),r.opQueues[n].push(u),a.push(s),1===r.opQueues[n].length&&u.handler()},l=0;l<o.length;l++)s(l);Promise.all(a).then((function(){try{e()}catch(e){console.log(e)}finally{for(var t=0;t<o.length;t++){var i=o[t];r.pop(i)}n.resolve()}})).catch((function(e){console.log("waiting cath",e)}))})),n}},{key:"handleOp",value:function(e){if(!this._hasDestroyed){var t=this.opQueues[e][0];if(t)try{t.handler()}catch(r){t.p.reject(new Error(r.name)),this.pop(e)}}}},{key:"pop",value:function(e){this._hasDestroyed||(this.opQueues[e].shift(),this.handleOp(e))}},{key:"removeBuffer",value:function(e,t,r){var n=this;return this.enqueueOp(e,(function(){return n._remove(e,t,r)}),"removeBuffer")}},{key:"_remove",value:function(e,t,r){r<=t?this._onSourceBufferUpdateEnd(e):this.sourceBuffers[e].remove(t,r)}},{key:"endOfStream",value:function(){var e=this;return this.enqueueBlockOp((function(){e.ended()||e._hasDestroyed||e.mediaSource.endOfStream()}),"endOfStream")}},{key:"ended",value:function(){return!this.mediaSource||"ended"===this.mediaSource.readyState}},{key:"isMediaSourceOpen",value:function(){return!!this.mediaSource&&"open"===this.mediaSource.readyState}},{key:"abort",value:function(e){var t=this;return this.isMediaSourceOpen()?this.enqueueOp(e,(function(){t.sourceBuffers[e].abort(),t._onSourceBufferUpdateEnd(e)}),"abort"):Promise.resolve()}},{key:"reuse",value:function(e,t){for(var r=Object.keys(this.contentTypes),n=0;n<r.length;n++){var i=r[n];this.removeBuffer(i,e,t)}}},{key:"_forceAbort",value:function(){try{for(var e=Object.keys(this.contentTypes),t=0;t<e.length;t++){var r=e[t];this.sourceBuffers[r].abort()}}catch(e){console.log("forceAbort error")}}},{key:"destroy",value:function(){if(this.logger("[debug mse] destroy execute"),!this._hasDestroyed){this._forceAbort(),this._hasDestroyed=!0,window.URL.revokeObjectURL(this.url),this.mediaSource&&(this.mediaSource.removeEventListener("sourceclose",this._onMediaSourceClose),this.mediaSource.removeEventListener("sourceopen",this._onSourceOpen));for(var e=Object.keys(this.contentTypes),t=0;t<e.length;t++){var r=e[t],n=this.sourceBuffers[r];if(n){var i=this.errorHandlers[r];n.removeEventListener("error",i);var a=this.updateHanders[r];n.removeEventListener("updateend",a)}}this.opQueues={},this.sourceBuffers={}}}},{key:"buffered",value:function(e){return this.sourceBuffers[e]&&this.sourceBuffers[e].buffered}},{key:"sourceBuffer",value:function(e){return this.sourceBuffers[e]}},{key:"removeSourceBuffer",value:function(e){var t=this.sourceBuffer(e);if(t){this.mediaSource.removeSourceBuffer(t);var r=this.errorHandlers[e];t.removeEventListener("error",r);var n=this.updateHanders[e];t.removeEventListener("updateend",n),delete this.errorHandlers[e],delete this.sourceBuffers[e],delete this.updateHanders[e]}}},{key:"setTimeoffset",value:function(e,t){var r=this;return this.enqueueOp(e,(function(){t<0&&(t+=.001),r.sourceBuffers[e].timestampOffset=t,r._onSourceBufferUpdateEnd(e)}),"setTimeoffset")}},{key:"state",get:function(){return this.mediaSource.readyState}},{key:"duration",get:function(){return this.mediaSource.duration}}],[{key:"isSupported",value:function(e){return window.MediaSource&&window.MediaSource.isTypeSupported(e)}}]),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=void 0,r=void 0,n=new Promise((function(e,n){t=e,r=n}));return n.resolve=t,n.reject=r,n}return n(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}();t.default=i},function(e,t,r){"use strict";var n=r(17),i=r(31),a=r(35),o=r(43),s=r(44);(e.exports=function(e,t){var r,i,u,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],n(e)?(r=s.call(e,"c"),i=s.call(e,"e"),u=s.call(e,"w")):(r=u=!0,i=!1),c={value:t,configurable:r,enumerable:i,writable:u},l?a(o(l),c):c}).gs=function(e,t,r){var u,l,c,d;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],n(t)?i(t)?n(r)?i(r)||(c=r,r=void 0):r=void 0:(c=t,t=r=void 0):t=void 0,n(e)?(u=s.call(e,"c"),l=s.call(e,"e")):(u=!0,l=!1),d={get:t,set:r,configurable:u,enumerable:l},c?a(o(c),d):d}},function(e,t,r){"use strict";var n=r(32),i=/^\s*class[\s{/}]/,a=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!i.test(a.call(e))}},function(e,t,r){"use strict";var n=r(33);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(34);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(17),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!i(e)&&hasOwnProperty.call(a,void 0===e?"undefined":n(e))}},function(e,t,r){"use strict";e.exports=r(36)()?Object.assign:r(37)},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(38),i=r(42),a=Math.max;e.exports=function(e,t){var r,o,s,u=a(arguments.length,2);for(e=Object(i(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},o=1;o<u;++o)n(t=arguments[o]).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(39)()?Object.keys:r(40)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(10),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(10);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";var n=r(10),i=Array.prototype.forEach,a=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=a(null);return i.call(arguments,(function(e){n(e)&&o(Object(e),t)})),t}},function(e,t,r){"use strict";e.exports=r(45)()?String.prototype.contains:r(46)},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)t+=u.value.length}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}var c=new e(t),d=0,f=!0,h=!1,p=void 0;try{for(var v,g=n[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;c.set(m,d),d+=m.length}}catch(e){h=!0,p=e}finally{try{!f&&g.return&&g.return()}finally{if(h)throw p}}return c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=oe(r(0)),i=oe(r(11)),a=oe(r(1)),o=oe(r(51)),s=oe(r(52)),u=oe(r(53)),l=oe(r(54)),c=oe(r(55)),d=oe(r(56)),f=oe(r(57)),h=oe(r(58)),p=oe(r(59)),v=oe(r(60)),g=oe(r(61)),m=oe(r(62)),y=oe(r(63)),_=oe(r(64)),w=oe(r(65)),b=oe(r(66)),E=oe(r(18)),T=oe(r(67)),C=oe(r(68)),S=oe(r(69)),k=oe(r(70)),O=oe(r(71)),R=oe(r(72)),A=oe(r(73)),x=oe(r(74)),L=oe(r(75)),D=oe(r(76)),P=oe(r(77)),M=oe(r(78)),I=oe(r(79)),U=oe(r(80)),B=oe(r(81)),F=oe(r(82)),N=oe(r(83)),j=oe(r(84)),H=oe(r(85)),z=oe(r(86)),V=oe(r(87)),K=oe(r(88)),G=oe(r(89)),X=oe(r(90)),Z=oe(r(19)),W=oe(r(91)),q=oe(r(92)),Y=oe(r(93)),Q=oe(r(94)),J=oe(r(95)),$=oe(r(96)),ee=oe(r(97)),te=oe(r(98)),re=oe(r(99)),ne=oe(r(100)),ie=oe(r(101)),ae=oe(r(102));function oe(e){return e&&e.__esModule?e:{default:e}}var se={};function ue(e,t,r){var n=e;t.map((function(e,i){n[e]=i==t.length-1?r:n[e]||{},n=n[e]}))}ue(se,["box","avc1"],oe(r(103)).default),ue(se,["box","avcC"],ae.default),ue(se,["box","btrt"],ie.default),ue(se,["box","co64"],ne.default),ue(se,["box","colr"],re.default),ue(se,["box","ctts"],te.default),ue(se,["box","dref"],ee.default),ue(se,["box","elst"],$.default),ue(se,["box","enca"],J.default),ue(se,["box","encv"],Q.default),ue(se,["box","esds"],Y.default),ue(se,["box","frma"],q.default),ue(se,["box","ftyp"],W.default),ue(se,["box","golomb"],Z.default),ue(se,["box","hdlr"],X.default),ue(se,["box","hmhd"],G.default),ue(se,["box","hvc1"],K.default),ue(se,["box","hvcC"],V.default),ue(se,["box","iods"],z.default),ue(se,["box","mdat"],H.default),ue(se,["box","mdhd"],j.default),ue(se,["box","mfhd"],N.default),ue(se,["box","mp4a"],F.default),ue(se,["box","MP4DecConfigDescrTag"],B.default),ue(se,["box","MP4DecSpecificDescrTag"],U.default),ue(se,["box","MP4ESDescrTag"],I.default),ue(se,["box","mvhd"],M.default),ue(se,["box","nmhd"],P.default),ue(se,["box","pasp"],D.default),ue(se,["box","pssh"],L.default),ue(se,["box","saio"],x.default),ue(se,["box","saiz"],A.default),ue(se,["box","sbgp"],R.default),ue(se,["box","schm"],O.default),ue(se,["box","sdtp"],k.default),ue(se,["box","senc"],S.default),ue(se,["box","SLConfigDescriptor"],C.default),ue(se,["box","smhd"],T.default),ue(se,["box","sps"],E.default),ue(se,["box","stco"],b.default),ue(se,["box","stsc"],w.default),ue(se,["box","stsd"],_.default),ue(se,["box","stsh"],y.default),ue(se,["box","stss"],m.default),ue(se,["box","stsz"],g.default),ue(se,["box","stts"],v.default),ue(se,["box","stz2"],p.default),ue(se,["box","tenc"],h.default),ue(se,["box","tfhd"],f.default),ue(se,["box","tkhd"],d.default),ue(se,["box","traf"],c.default),ue(se,["box","trun"],l.default),ue(se,["box","udta"],u.default),ue(se,["box","url"],s.default),ue(se,["box","vmhd"],o.default),t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffer=null,this.boxes=[],this.nextBox=null,this.start=0,this.buffer?(0,i.default)(Uint8Array,this.buffer,t):this.buffer=t;var r=t.byteLength;t.position=0;for(var o=new a.default(t);r-o.position>=8;){var s=new n.default;if(s.readHeader(o),s.size-8<=r-o.position)s.readBody(o),this.boxes.push(s);else{if("mdat"!==s.type){this.nextBox=s,o.position-=8;break}s.readBody(o),this.boxes.push(s)}}this.buffer=new Uint8Array(this.buffer.slice(o.position))},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="3.0.0-alpha.28-41",e.exports=t.default},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.vmhd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=[e.readUint8(),e.readUint8(),e.readUint8()],this.graphicsmode=e.readUint16(),this.opcolor=[e.readUint16(),e.readUint16(),e.readUint16()],delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default["url "]=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=[e.readUint8(),e.readUint8(),e.readUint8()];for(var t=[],r=e.buffer.byteLength;e.position<r;)t.push(e.readUint8());this.location=t,delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n;((n=r(0))&&n.__esModule?n:{default:n}).default.udta=function(){delete this.subBox}},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";var n=o(r(0)),i=o(r(1)),a=o(r(12));function o(e){return e&&e.__esModule?e:{default:e}}n.default.tkhd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3,0),1===this.version?(this.create=e.readUint64(),this.modify=e.readUint64(),this.createTime=(new a.default).setTime(1e3*this.create),this.modifyTime=(new a.default).setTime(1e3*this.modify),this.trackID=e.readUint32(),this.reserverd=e.readUint32(),this.duration=e.readUint64()):(this.create=e.readUint32(),this.modify=e.readUint32(),this.createTime=(new a.default).setTime(1e3*this.create),this.modifyTime=(new a.default).setTime(1e3*this.modify),this.trackID=e.readUint32(),this.reserverd=e.readUint32(),this.duration=e.readUint32()),e.readUint64(),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16();for(var t=[],r=0;r<9;r++)t.push(e.readUint16()+"."+e.readUint16());this.matrix=t,this.width=e.readUint16()+"."+e.readUint16(),this.height=e.readUint16()+"."+e.readUint16(),delete this.data,delete this.subBox,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.tfhd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.track_id=e.readUint32();var t=1&this.flag,r=2&this.flag,n=8&this.flag,a=16&this.flag,o=32&this.flag;t&&(this.baseDataOffset=e.readUint32()),r&&(this.sampleDescriptionIndex=e.readUint32()),n&&(this.defaultSampleDuration=e.readUint32()),a&&(this.defaultSampleSize=e.readUint32()),o&&(this.defaultSampleFlags=e.readUint32()),delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){for(var n=String(r),i=t>>0,a=Math.ceil(i/n.length),o=[],s=String(e);a--;)o.push(n);return o.join("").substring(0,i-s.length)+s},s=function(){for(var e=[],t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){e.push(o(Number(t).toString(16),2,0))})),e[0]};n.default.tenc=function(){var e=new i.default(this.data);e.skip(6),this.default_IsEncrypted=e.readUint8(),this.default_IV_size=e.readUint8(),this.default_KID=[];for(var t=0;t<16;t++)this.default_KID.push(s(e.readUint8()))}},function(e,t,r){},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.stts=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.count=e.readUint32();for(var t=[],r=0,n=this.count;r<n;r++)t.push({sampleCount:e.readUint32(),sampleDuration:e.readUint32()});this.entry=t,delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.stsz=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.sampleSize=e.readUint32(),this.count=e.readUint32();var t=[];this.entries=t;for(var r=0,n=this.count;r<n;r++)this.sampleSize?t.push(this.sampleSize):t.push(e.readUint32());delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.stss=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var r=0,n=this.count;r<n;r++)t.push(e.readUint32());delete this.subBox,delete this.data,e=null}},function(e,t,r){},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.stsd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.entryCount=e.readUint32();var t=new n.default;t.readHeader(e),this.subBox.push(t),t.readBody(e),delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.stsc=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var r=0,n=this.count;r<n;r++)t.push({first_chunk:e.readUint32(),samples_per_chunk:e.readUint32(),sample_desc_index:e.readUint32()});for(var a,o,s=0,u=this.count;s<u-1;s++)a=t[s],o=t[s-1],a.chunk_count=t[s+1].first_chunk-a.first_chunk,a.first_sample=0===s?1:o.first_sample+o.chunk_count*o.samples_per_chunk;if(1===this.count){var l=t[0];l.first_sample=1,l.chunk_count=0}else if(this.count>1){var c=t[this.count-1],d=t[this.count-2];c.first_sample=d.first_sample+d.chunk_count*d.samples_per_chunk,c.chunk_count=0}delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.stco=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var r=0,n=this.count;r<n;r++)t.push(e.readUint32());delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.smhd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.balance=e.readInt8()+"."+e.readInt8(),delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n,i=(n=r(0))&&n.__esModule?n:{default:n};i.default.SLConfigDescriptor=function(e){var t=new i.default,r=void 0;return t.type=e.readUint8(),128===(r=e.readUint8())?(t.extend=!0,e.skip(2),r=e.readUint8()+5):r+=2,t.size=r,t.SL=e.readUint8(),delete t.subBox,t}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.senc=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flags=e.readUint24();var t=e.readUint32();this.samples=[];for(var r=0;r<t;r++){var n={};if(n.InitializationVector=[e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()],2&this.flags){n.subsamples=[];for(var a=e.readUint16(),o=0;o<a;o++){var s={};s.BytesOfClearData=e.readUint16(),s.BytesOfProtectedData=e.readUint32(),n.subsamples.push(s)}}this.samples.push(n)}}},function(e,t,r){},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.schm=function(){var e=new i.default(this.data);this.scheme_version=e.readUint32(),this.scheme_type="";for(var t=0;t<4;t++)this.scheme_type+=String.fromCharCode(e.readUint8());if(1&this.flags){this.scheme_uri="";for(var r=0;r<this.size-this.hdr_size-8;r++)this.scheme_uri+=String.fromCharCode(e.readUint8())}}},function(e,t,r){},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.saiz=function(){var e=new i.default(this.data);this.default_sample_info_size=e.readUint8(),e.readUint32(),this.sample_info_size=e.readUint32(),e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.saio=function(){var e=new i.default(this.data);this.entry_count=e.readUint32(),e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){for(var n=String(r),i=t>>0,a=Math.ceil(i/n.length),o=[],s=String(e);a--;)o.push(n);return o.join("").substring(0,i-s.length)+s},s=function(){for(var e=[],t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){e.push(o(Number(t).toString(16),2,0))})),e[0]};n.default.pssh=function(){var e=new i.default(this.data);e.skip(2);for(var t=[],r=[],n=0;n<16;n++)r.push(s(e.readUint8()));if(this.version>0)for(var a=e.readUint32(),o=0;o<(""+a).length;o++)for(var u=0;u<16;u++){var l=e.readUint8();t.push(s(l))}var c=e.readUint32();this.data_size=c,e.skip(c),this.kid=t,this.system_id=r,this.buffer=e.buffer,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.pasp=function(){var e=new i.default(this.data);this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32(),e=null}},function(e,t,r){},function(e,t,r){"use strict";var n=o(r(0)),i=o(r(1)),a=o(r(12));function o(e){return e&&e.__esModule?e:{default:e}}n.default.mvhd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.create=e.readUint32(),this.modify=e.readUint32(),this.createTime=(new a.default).setTime(1e3*this.create),this.modifyTime=(new a.default).setTime(1e3*this.modify),this.timeScale=e.readUint32(),this.duration=e.readUint32(),this.rate=e.readUint16()+"."+e.readUint16(),this.volume=e.readUint8()+"."+e.readUint8(),i.default.readByte(e.dataview,8),i.default.readByte(e.dataview,2);for(var t=[],r=0;r<9;r++)t.push(e.readUint16()+"."+e.readUint16());this.matrix=t,i.default.readByte(e.dataview,24),this.nextTrackID=e.readUint32(),delete this.subBox,delete this.data}},function(e,t,r){"use strict";var n,i=(n=r(0))&&n.__esModule?n:{default:n};i.default.MP4ESDescrTag=function(e){var t=new i.default,r=void 0;return t.type=e.readUint8(),128===(r=e.readUint8())?(t.extend=!0,e.skip(2),r=e.readUint8()+5):r+=2,t.size=r,t.esID=e.readUint16(),t.priority=e.readUint8(),t.subBox.push(i.default.MP4DecConfigDescrTag(e)),t.subBox.push(i.default.SLConfigDescriptor(e)),t}},function(e,t,r){"use strict";var n,i=(n=r(0))&&n.__esModule?n:{default:n};i.default.MP4DecSpecificDescrTag=function(e){var t=new i.default,r=void 0,n=void 0;t.type=e.readUint8(),128===(r=e.readUint8())?(t.extend=!0,e.skip(2),n=(r=e.readUint8()+5)-5):(n=r,r+=2),t.size=r;for(var a=[],o=0;o<n;o++)a.push(Number(e.readUint8()).toString(16).padStart(2,"0"));return t.EScode=a,delete t.subBox,t}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.MP4DecConfigDescrTag=function(e){var t=new n.default,r=void 0;return t.type=e.readUint8(),128===(r=e.readUint8())?(t.extend=!0,e.skip(2),r=e.readUint8()+5):r+=2,t.size=r,t.typeID=e.readUint8(),t.streamUint=e.readUint8(),t.bufferSize=i.default.readByte(e.dataview,3),t.maximum=e.readUint32(),t.average=e.readUint32(),t.subBox.push(n.default.MP4DecSpecificDescrTag(e)),t}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.mp4a=function(){var e=new i.default(this.data);e.skip(6),this.dataReferenceIndex=e.readUint16(),e.skip(8),this.channelCount=e.readUint16(),this.sampleSize=e.readUint16(),e.skip(4),this.sampleRate=e.readUint32()>>16;var t=new n.default;t.readHeader(e),this.subBox.push(t),t.readBody(e),delete this.data,e=null}},function(e,t,r){},function(e,t,r){"use strict";var n=o(r(0)),i=o(r(1)),a=o(r(12));function o(e){return e&&e.__esModule?e:{default:e}}n.default.mdhd=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),1===this.version?(this.create=e.readUint64(),this.modify=e.readUint64(),this.createTime=(new a.default).setTime(1e3*this.create),this.modifyTime=(new a.default).setTime(1e3*this.modify),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.create=e.readUint32(),this.modify=e.readUint32(),this.createTime=(new a.default).setTime(1e3*this.create),this.modifyTime=(new a.default).setTime(1e3*this.modify),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.language=e.readUint16(),e.readUint16(),delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n;((n=r(0))&&n.__esModule?n:{default:n}).default.mdat=function(){delete this.subBox}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.iods=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3);for(var t=[],r=e.buffer.byteLength;e.position<r;)t.push(e.readUint8());this.content=t,delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.hvcC=function(){var e=new i.default(this.data);this.configVersion=e.readUint8(),this.profile=e.readUint8(),this.profileCompatibility=e.readUint32(),this.constraintIndicatorFlags=[];for(var t=0;t<6;t++)this.constraintIndicatorFlags.push(Number(e.readUint8()).toString(16));this.levelIdc=e.readUint8(),this.profileCompatibilityIndications=e.readUint32(),this.bitDepthLumaMinus8=e.readUint8(),this.bitDepthChromaMinus8=e.readUint8(),this.avgFrameRate=e.readUint16(),this.constantFrameRate=e.readUint8(),this.numOfArrays=e.readUint8(),this.vpsHeader=e.readUint24(),this.vpsLength=e.readUint16();for(var r=[],n=0;n<this.vpsLength;n++)r.push(Number(e.readUint8()).toString(16));this.vps=r,this.spsHeader=e.readUint24(),this.spsLength=e.readUint16();for(var a=[],o=0;o<this.spsLength;o++)a.push(Number(e.readUint8()).toString(16));this.sequence=a,this.ppsHeader=e.readUint24(),this.ppsLength=e.readUint16();for(var s=[],u=0;u<this.ppsLength;u++)s.push(Number(e.readUint8()).toString(16));this.pps=s;for(var l=[],c=e.dataview.byteLength;e.position<c;)l.push(e.readUint8());this.last=l,delete this.subBox,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.hvc1=function(){var e=new i.default(this.data);e.skip(6),this.dataReferenceIndex=e.readUint16(),e.skip(16),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.skip(4),this.frameCount=e.readUint16(),e.skip(1);for(var t=0;t<31;t++)String.fromCharCode(e.readUint8());for(this.depth=e.readUint16(),e.skip(2);e.buffer.byteLength-e.position>=8;){var r=new n.default;r.readHeader(e),this.subBox.push(r),r.readBody(e)}e=null}},function(e,t,r){},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.hdlr=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),e.skip(4),this.handleType=""+String.fromCharCode(e.readUint8())+String.fromCharCode(e.readUint8())+String.fromCharCode(e.readUint8())+String.fromCharCode(e.readUint8()),e.skip(12);for(var t=[];e.position<this.size-8;)t.push(String.fromCharCode(e.readUint8()));this.name=t.join(""),delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.ftyp=function(){var e=new i.default(this.data);this.major_brand=String.fromCharCode(e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()),this.minor_version=e.readUint32();for(var t=[],r=0,n=Math.floor((e.buffer.byteLength-8)/4);r<n;r++)t.push(String.fromCharCode(e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()));this.compatible_brands=t,e=null,delete this.subBox,delete this.data}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.frma=function(){var e=new i.default(this.data);this.data_format="";for(var t=0;t<4;t++)this.data_format+=String.fromCharCode(e.readUint8())}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.esds=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3);var t=n.default.MP4ESDescrTag(e);this.subBox.push(t),delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.encv=function(){var e=new i.default(this.data);for(e.readUint16(),e.readUint16(),e.readUint16(),e.readUint16(),e.skip(16),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),e.skip(32),this.depth=e.readUint16(),e.readUint16();e.position<e.buffer.byteLength;){var t=new n.default;t.readHeader(e),this.subBox.push(t),t.readBody(e)}e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.enca=function(){var e=new i.default(this.data);for(e.readUint16(),e.readUint16(),e.readUint16(),this.data_reference_index=e.readUint16(),e.readUint32(),e.readUint32(),this.channelCount=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.sampleRate=e.readUint32()/65536;e.position<e.buffer.byteLength;){var t=new n.default;t.readHeader(e),this.subBox.push(t),t.readBody(e)}e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.elst=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3);var t=[],r=e.readUint32();this.entries=t;for(var n=0;n<r;n++){var a={};t.push(a),1===this.version?(a.segment_duration=e.readUint64(),a.media_time=e.readUint64()):(a.segment_duration=e.readUint32(),a.media_time=e.readInt32()),a.media_rate_integer=e.readInt16(),a.media_rate_fraction=e.readInt16()}delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.dref=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3);var t=e.readUint32();this.entryCount=t;for(var r=0;r<t;r++){var a=new n.default;this.subBox.push(a),a.read(e)}delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.ctts=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.entryCount=e.readUint32();var t=[];this.entry=t;for(var r=0,n=this.entryCount;r<n;r++)t.push({count:e.readUint32(),offset:e.readUint32()});delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.colr=function(){var e=new i.default(this.data);if(this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3,0),this.colour_type=e.readString(4),"nclx"===this.colour_type){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var t=e.readUint8();this.full_range_flag=t>>7}else("rICC"===this.colour_type||"prof"===this.colour_type)&&(this.ICC_profile=e.readUint8Array(this.size-4));delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.co64=function(){var e=new i.default(this.data);this.version=e.readUint8(),this.flag=i.default.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var r=0,n=this.count;r<n;r++)t.push(e.readUint64());delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.btrt=function(){var e=new i.default(this.data);this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=o(r(0)),i=o(r(1)),a=o(r(18));function o(e){return e&&e.__esModule?e:{default:e}}n.default.avcC=function(){var e=new i.default(this.data);this.configVersion=e.readUint8(),this.profile=e.readUint8(),this.profileCompatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=1+(3&e.readUint8()),this.numOfSequenceParameterSets=31&e.readUint8();var t=e.readUint16();this.sequenceLength=t;for(var r=[],n=0;n<t;n++)r.push(e.readUint8());this.spsInfo=a.default.parseSPS(new Uint8Array(r)),this.ppsCount=e.readUint8();var o=e.readUint16();this.ppsLength=o;for(var s=[],u=0;u<o;u++)s.push(Number(e.readUint8()).toString(16));this.pps=s,this.sequence=r;for(var l=[],c=e.dataview.byteLength;e.position<c;)l.push(e.readUint8());this.last=l,delete this.subBox,delete this.data,e=null}},function(e,t,r){"use strict";var n=a(r(0)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}n.default.avc1=function(){var e=new i.default(this.data);e.skip(6),this.dataReferenceIndex=e.readUint16(),e.skip(16),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.skip(4),this.frameCount=e.readUint16(),e.skip(1);for(var t=0;t<31;t++)String.fromCharCode(e.readUint8());for(this.depth=e.readUint16(),e.skip(2);e.position<e.buffer.byteLength;){var r=new n.default;r.readHeader(e),this.subBox.push(r),r.readBody(e)}delete this.data,e=null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(20)),a=s(r(2)),o=s(r(105));function s(e){return e&&e.__esModule?e:{default:e}}var u=Math.pow(2,32)-1,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"type",value:function(e){return new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])}},{key:"size",value:function(e){return i.default.writeUint32(e)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"ftyp",value:function(){var t=new i.default;return t.write(e.size(24),e.type("ftyp"),new Uint8Array([105,115,111,54,0,0,0,1,105,115,111,54,100,97,115,104])),t.buffer}},{key:"moov",value:function(t){var r=new i.default,n=8,a=e.mvhd(t.duration,t.timeScale),o=e.mvex(t.duration,t.timeScale),s=e.videoTrak(t),u=new Uint8Array([]);if(t.channelCount&&(u=e.audioTrak(t)),t.useEME&&t.encv){t.pssh||(t.pssh={kid:t.kid});var l=e.pssh(t.pssh);[a,o,s,u,l].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("moov"),a,o,s,u,l)}else[a,o,s,u].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("moov"),a,o,s,u);return r.buffer}},{key:"pssh",value:function(t){var r=new i.default,n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],a.default.parse(t.kid),[0,0,0,0]));return r.write(e.size(8+n.byteLength),e.type("pssh"),n),r.buffer}},{key:"mvhd",value:function(t,r){var n=new i.default;t*=r;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3]);return n.write(e.size(8+a.length),e.type("mvhd"),new Uint8Array(a)),n.buffer}},{key:"videoTrak",value:function(t){var r=new i.default,n=8,a=e.tkhd({id:1,duration:t.videoDuration,timescale:t.videoTimeScale,width:t.width,height:t.height,type:"video"}),o=e.mdia({type:"video",timescale:t.videoTimeScale,duration:t.videoDuration,vps:t.vps,sps:t.sps,pps:t.pps,pixelRatio:t.pixelRatio,width:t.width,height:t.height,encv:t.encv,useEME:t.useEME,videoCodec:t.videoCodec,hvc1Data:t.hvc1Data,hvcCData:t.hvcCData,stss:t.stss});return[a,o].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("trak"),a,o),r.buffer}},{key:"audioTrak",value:function(t){var r=new i.default,n=8,a=e.tkhd({id:2,duration:t.audioDuration,timescale:t.audioTimeScale,width:0,height:0,type:"audio"}),o=t.channelCount,s=t.sampleRate;t.enca&&(o=t.enca.channelCount,s=t.enca.sampleRate);var u=e.mdia({type:"audio",timescale:t.audioTimeScale,duration:t.audioDuration,channelCount:o,sampleRate:s,audioConfig:t.audioConfig,enca:t.enca,useEME:t.useEME});return[a,u].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("trak"),a,u),r.buffer}},{key:"tkhd",value:function(t){var r=new i.default,n=t.id,a=t.duration*t.timeScale,o=t.width,s=t.height,u=t.type,l=new Uint8Array([0,0,0,3,0,0,0,0,217,172,236,86,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,"video"===u?1:0,"audio"===u?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,s>>8&255,255&s,0,0]);return r.write(e.size(8+l.byteLength),e.type("tkhd"),l),r.buffer}},{key:"edts",value:function(t){var r=new i.default,n=t.duration,a=t.mediaTime;return r.write(e.size(36),e.type("edts")),r.write(e.size(28),e.type("elst")),r.write(new Uint8Array([0,0,0,1,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,1])),r.buffer}},{key:"mdia",value:function(t){var r=new i.default,n=8,a=e.mdhd(t.timescale),o=e.hdlr(t.type),s=e.minf(t);return[a,o,s].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("mdia"),a,o,s),r.buffer}},{key:"mdhd",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,217,20,37,90,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,21,199,0,0]);return r.write(e.size(12+n.byteLength),e.type("mdhd"),e.extension(0,0),n),r.buffer}},{key:"hdlr",value:function(t){var r=new i.default,n=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===t&&(n.splice.apply(n,[8,4].concat([115,111,117,110])),n.splice.apply(n,[24,13].concat([83,111,117,110,100,72,97,110,100,108,101,114,0]))),r.write(e.size(8+n.length),e.type("hdlr"),new Uint8Array(n)),r.buffer}},{key:"minf",value:function(t){var r=new i.default,n=8,a="video"===t.type?e.vmhd():e.smhd(),o=e.dinf(),s=e.stbl(t);return[a,o,s].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("minf"),a,o,s),r.buffer}},{key:"vmhd",value:function(){var t=new i.default;return t.write(e.size(20),e.type("vmhd"),new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])),t.buffer}},{key:"smhd",value:function(){var t=new i.default;return t.write(e.size(16),e.type("smhd"),new Uint8Array([0,0,0,0,0,0,0,0])),t.buffer}},{key:"dinf",value:function(){var t=new i.default;return t.write(e.size(36),e.type("dinf"),e.size(28),e.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),t.buffer}},{key:"stbl",value:function(t){var r=new i.default,n=8,a=e.stsd(t),o=e.stts(),s=e.stsc(),u=e.stsz(),l=e.stco();if("video"===t.type){var c=e.stss(t.stss);[a,o,c,s,u,l].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("stbl"),a,o,c,s,u,l)}else[a,o,s,u,l].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("stbl"),a,o,s,u,l);return r.buffer}},{key:"stsd",value:function(t){var r,n=new i.default;return r="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):t.videoCodec.indexOf("hvc1")>-1||t.encv&&t.encv.data_format.indexOf("hvc1")>-1?e.hvc1(t):e.avc1(t),n.write(e.size(16+r.byteLength),e.type("stsd"),e.extension(0,0),new Uint8Array([0,0,0,1]),r),n.buffer}},{key:"encv",value:function(t){var r=new i.default,n=t.sps,a=t.pps,o=t.width,s=t.height,u=t.pixelRatio[0],l=t.pixelRatio[1],c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,s>>8&255,255&s,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d=new Uint8Array([1,n[1],n[2],n[3],255,225,n.length>>>8&255,255&n.length].concat(n).concat([1,a.length>>>8&255,255&a.length]).concat(a)),f=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),h=e.sinf(t.encv),p=new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,l>>24,l>>16&255,l>>8&255,255&l]);return r.write(e.size(40+c.byteLength+d.byteLength+f.byteLength+p.byteLength+h.byteLength),e.type("encv"),c,e.size(8+d.byteLength),e.type("avcC"),d,e.size(8+f.byteLength),e.type("btrt"),f,e.size(8+h.byteLength),e.type("sinf"),h,e.size(8+p.byteLength),e.type("pasp"),p),r.buffer}},{key:"sinf",value:function(t){var r=new i.default,n=new Uint8Array([]),a=e.frma(t),o=e.schm(),s=e.schi(t);return r.write(n,a,o,s),r.buffer}},{key:"frma",value:function(t){var r=new i.default,n=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]);return r.write(e.size(8+n.byteLength),e.type("frma"),n),r.buffer}},{key:"schm",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);return t.write(e.size(8+r.byteLength),e.type("schm"),r),t.buffer}},{key:"schi",value:function(t){var r=new i.default,n=new Uint8Array([]),a=e.tenc(t);return r.write(e.size(8+n.byteLength+a.byteLength),e.type("schi"),n,a),r.buffer}},{key:"tenc",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat(a.default.parse(t.default_KID)));return r.write(e.size(8+n.byteLength),e.type("tenc"),n),r.buffer}},{key:"enca",value:function(t){var r=new i.default,n=t.enca.channelCount,a=t.enca.sampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,a>>8&255,255&a,0,0]),s=e.esds(t.audioConfig),u=e.sinf(t.enca);return r.write(e.size(16+o.byteLength+s.byteLength+u.byteLength),e.type("enca"),o,s,e.size(8+u.byteLength),e.type("sinf"),u),r.buffer}},{key:"mp4a",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),a=e.esds(t.audioConfig);return r.write(e.size(8+n.byteLength+a.byteLength),e.type("mp4a"),n,a),r.buffer}},{key:"esds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[43,146,8,0],r=t.length,n=new i.default,a=new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(t).concat([6,1,2]));return n.write(e.size(8+a.byteLength),e.type("esds"),a),n.buffer}},{key:"avc1",value:function(t){var r=new i.default,n=t.sps,a=t.pps,o=t.width,s=t.height,u=t.pixelRatio[0],l=t.pixelRatio[1],c=new Uint8Array([1,n[1],n[2],n[3],255,225].concat([n.length>>>8&255,255&n.length]).concat(n).concat(1).concat([a.length>>>8&255,255&a.length]).concat(a)),d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,s>>8&255,255&s,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),f=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),h=new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,l>>24,l>>16&255,l>>8&255,255&l]);return r.write(e.size(40+d.byteLength+c.byteLength+f.byteLength),e.type("avc1"),d,e.size(8+c.byteLength),e.type("avcC"),c,e.size(20),e.type("btrt"),f,e.size(16),e.type("pasp"),h),r.buffer}},{key:"hvc1",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return r.write(e.size(8+n.byteLength+8+t.hvcCData.byteLength+10),e.type("hvc1"),n,e.size(8+t.hvcCData.byteLength),e.type("hvcC"),new Uint8Array(t.hvcCData),e.size(10),e.type("fiel"),new Uint8Array([1,0])),r.buffer}},{key:"stts",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stts"),r),t.buffer}},{key:"stss",value:function(t){var r=new i.default,n=[];t.entries.forEach((function(e){n.push(e>>24),n.push(e>>16&255),n.push(e>>8&255),n.push(255&e)}));var a=new Uint8Array([0,0,0,0,t.count>>24,t.count>>16&255,t.count>>8&255,255&t.count].concat(n));return r.write(e.size(16+4*t.count),e.type("stss"),a),r.buffer}},{key:"stsc",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stsc"),r),t.buffer}},{key:"stco",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stco"),r),t.buffer}},{key:"stsz",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return t.write(e.size(20),e.type("stsz"),r),t.buffer}},{key:"mvex",value:function(t,r){var n=new i.default,a=i.default.writeUint32(t*r);return n.write(e.size(88),e.type("mvex"),e.size(16),e.type("mehd"),e.extension(0,0),a,e.trex1(1),e.trex2(2)),n.buffer}},{key:"trex",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return r.write(e.size(8+n.byteLength),e.type("trex"),n),r.buffer}},{key:"trex1",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]);return r.write(e.size(8+n.byteLength),e.type("trex"),n),r.buffer}},{key:"trex2",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]);return r.write(e.size(8+n.byteLength),e.type("trex"),n),r.buffer}},{key:"styp",value:function(t){var r=new i.default,n=new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]);return r.write(e.size(8+n.byteLength),e.type("styp"),n),r.buffer}},{key:"sidx",value:function(t){var r=new i.default,n=1===t.id?t.videoTimeScale:t.audioTimeScale,a=t.samples[0].duration,o=a*t.samples.length,s=t.sampleOffset*a,u=8;t.samples.forEach((function(e){u+=e.size}));var l=0;if(1===t.id){var c=0,d=t.videoSenc;1===t.id&&d.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,l=u+141+12*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(l=u+12*t.samples.length+84)}else l=u+104+4*t.samples.length,t.useEME&&t.isAudioEncryption&&(l=u+169+12*t.samples.length);var f=new Uint8Array([0,0,0,0,0,0,0,255&t.id,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,1,0,l>>16&255,l>>8&255,255&l,o>>24&255,o>>16&255,o>>8&255,255&o,144,0,0,0]);return r.write(e.size(8+f.byteLength),e.type("sidx"),f),r.buffer}},{key:"moof",value:function(t){var r=new i.default,n=8,a=e.mfhd(t),o=e.traf(t);return[a,o].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("moof"),a,o),r.buffer}},{key:"mfhd",value:function(t){var r,n=new i.default;return t.id,r=i.default.writeUint32((t.fragIndex||0)+1),n.write(e.size(16),e.type("mfhd"),e.extension(0,0),r),n.buffer}},{key:"traf",value:function(t){var r=new i.default,n=8,a=e.tfhd(t.id),o=e.tfdt(t,t.time);if(t.useEME&&(t.isVideoEncryption||t.isAudioEncryption))if(t.isVideoEncryption)if(1===t.id){var s=e.saiz(t),u=e.saio(t),l=e.trun1(t),c=e.senc(t);[a,o,s,u,l,c].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,s,u,l,c)}else if(t.isAudioEncryption){var d=e.sbgp(t),f=e.saiz(t),h=e.saio(t),p=e.senc(t),v=e.trun1(t);[a,o,d,f,h,p,v].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,d,f,h,p,v)}else{var g=e.sbgp(t),m=e.trun1(t);[a,o,g,m].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,g,m)}else if(1===t.id){var y=e.trun1(t);[a,o,y].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,y)}else{var _=e.sbgp(t),w=e.saiz(t),b=e.saio(t),E=e.senc(t),T=e.trun1(t);[a,o,_,w,b,E,T].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,_,w,b,E,T)}else{var C=e.sdtp(t),S=e.trun(t,C.byteLength);[a,o,C,S].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,C,S)}return r.buffer}},{key:"sbgp",value:function(t){var r=new i.default,n=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return r.write(e.size(12+n.byteLength),e.type("sbgp"),e.extension(0,0),n),r.buffer}},{key:"saiz",value:function(t){var r=new i.default,n=t.samples.length,a=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,255&n]);return r.write(e.size(8+a.byteLength),e.type("saiz"),a),r.buffer}},{key:"saio",value:function(t){var r=new i.default,n=12*t.samples.length+141;2===t.id&&t.isAudioEncryption&&(n=149);var a=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n]);return r.write(e.size(8+a.byteLength),e.type("saio"),a),r.buffer}},{key:"senc",value:function(t){var r=new i.default,n=t.samples.length,a=1===t.id?16:8,o=1===t.id?2:0,s=[],u=0;return 1===t.id?(s=t.videoSenc,u=t.videoSencLength):s=t.audioSenc,u=u||a*n,r.write(e.size(16+u),e.type("senc"),e.extension(0,o)),r.write(i.default.writeUint32(n)),s.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)r.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(r.write(i.default.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){r.write(i.default.writeUint16(e.BytesOfClearData)),r.write(i.default.writeUint32(e.BytesOfProtectedData))})))})),r.buffer}},{key:"tfhd",value:function(t){var r=new i.default,n=i.default.writeUint32(t);return r.write(e.size(16),e.type("tfhd"),new Uint8Array([0,2,0,0]),n),r.buffer}},{key:"tfdt",value:function(t,r){var n=new i.default,a=Math.floor(r/(u+1)),o=Math.floor(r%(u+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?n.write(e.size(16),e.type("tfdt"),e.extension(0,0),i.default.writeUint32(o)):n.write(e.size(20),e.type("tfdt"),e.extension(1,0),i.default.writeUint32(a),i.default.writeUint32(o)),n.buffer}},{key:"trun1",value:function(t){var r=t.id,n=1===r?12:4,a=new i.default,o=i.default.writeUint32(t.samples.length),s=null;if(1===t.id){var u=0;1===t.id&&(u=t.videoSencLength),s=i.default.writeUint32(12*t.samples.length+u+149),!t.isVideoEncryption&&t.isAudioEncryption&&(s=i.default.writeUint32(t.samples.length*n+92))}else{var l=4*t.samples.length+120;t.isAudioEncryption&&(l=12*t.samples.length+177),s=i.default.writeUint32(l)}return a.write(e.size(20+n*t.samples.length),e.type("trun"),e.extension(0,t.flags),o,s),t.samples.forEach((function(e){a.write(i.default.writeUint32(e.size)),1===r&&(a.write(i.default.writeUint32(e.key?33554432:65536)),a.write(i.default.writeUint32(e.offset)))})),a.buffer}},{key:"trun",value:function(t,r){var n=t.id,a=1===n?16:12,o=new i.default,s=i.default.writeUint32(t.samples.length),u=i.default.writeUint32(96+a*t.samples.length+r);return o.write(e.size(20+a*t.samples.length),e.type("trun"),e.extension(0,t.flags),s,u),t.samples.forEach((function(e,t){o.write(i.default.writeUint32(e.duration)),o.write(i.default.writeUint32(e.size)),1===n?(o.write(i.default.writeUint32(e.key?33554432:16842752)),o.write(i.default.writeUint32(e.offset))):o.write(i.default.writeUint32(16777216))})),o.buffer}},{key:"sdtp",value:function(t){var r=new i.default;return r.write(e.size(12+t.samples.length),e.type("sdtp"),e.extension(0,0)),t.samples.forEach((function(e){r.write(new Uint8Array(1===t.id?[e.key?32:16]:[16]))})),r.buffer}},{key:"mdat",value:function(t){var r=new i.default,n=8;t.samples.forEach((function(e){n+=e.size})),r.write(e.size(n),e.type("mdat"));var a=t.kidValue;if(t.useEME)return t.samples.forEach((function(e){r.write(e.buffer)})),r.buffer;if(t.videoSenc&&1===t.id){var s=t.videoSenc;return t.samples.forEach((function(e,t){var n=s[t],u=e.buffer,l=[],c=[],d=n.InitializationVector;if(n.subsamples&&n.subsamples.length)n.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,r=u.slice(0,t);l.push(r.slice(0,e.BytesOfClearData)),c.push(r.slice(e.BytesOfClearData)),u=u.slice(t)}));else{var f=e.size;l.push(u.slice(0,0)),c.push(u.slice(0,f)),u=u.slice(f)}var h=new i.default;h.write.apply(h,c);var p=o.default.decryptWordArray(h.buffer,a,d);l.forEach((function(e,t){var n=c[t].length,i=p.slice(0,n);r.write(e),r.write(i),p=p.slice(n)}))})),r.buffer}if(t.audioSenc&&2===t.id){var u=t.audioSenc;return t.samples.forEach((function(e,t){var n=u[t],i=o.default.decryptWordArray(e.buffer,a,n.InitializationVector);r.write(i)})),r.buffer}return t.samples.forEach((function(e){r.write(e.buffer)})),r.buffer}}]),e}();t.default=l,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3),a=r(13),o=r(109),s=r(110),u=r(111),l=(n=r(2))&&n.__esModule?n:{default:n},c={decryptWordArray:function(e,t,r){var n=i.Hex.parse(t),d=i.Hex.parse(l.default.formatIV(r)),f=i.WordArray.create(new Uint8Array(e)),h=o.AES.decrypt(a.CipherParams.create({ciphertext:f}),n,{iv:d,mode:s.CTR,padding:u.NoPadding});return c.wordArrayToUint8Array(h)},wordArrayToUint8Array:function(e){for(var t=e.sigBytes,r=e.words,n=new Uint8Array(t),i=0,a=0;i!==t;){var o=r[a++];if(n[i++]=(4278190080&o)>>>24,i===t)break;if(n[i++]=(16711680&o)>>>16,i===t)break;if(n[i++]=(65280&o)>>>8,i===t)break;n[i++]=255&o}return n}};t.default=c,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;var n=r(3);t.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<r;s+=1)i.push(n.charAt(o>>>6*(3-s)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(var a=0;a<r.length;a+=1)i[r.charCodeAt(a)]=a}var o=r.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,r){for(var i=[],a=0,o=0;o<t;o+=1)if(o%4){var s=r[e.charCodeAt(o-1)]<<o%4*2|r[e.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=s<<24-a%4*8,a+=1}return n.WordArray.create(i,a)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EvpKDF=t.EvpKDFAlgo=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3),a=r(108),o=t.EvpKDFAlgo=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.cfg=Object.assign(new i.Base,{keySize:4,hasher:a.MD5Algo,iterations:1},e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"compute",value:function(e,t){for(var r=void 0,n=this.cfg,a=n.hasher.create(),o=i.WordArray.create(),s=o.words,u=n.keySize,l=n.iterations;s.length<u;){r&&a.update(r),r=a.update(e).finalize(t),a.reset();for(var c=1;c<l;c+=1)r=a.finalize(r),a.reset();o.concat(r)}return o.sigBytes=4*u,o}}]),t}(i.Base);t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HmacMD5=t.MD5=t.MD5Algo=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}for(var s=[],u=0;u<64;u+=1)s[u]=4294967296*Math.abs(Math.sin(u+1))|0;var l=function(e,t,r,n,i,a,o){var s=e+(t&r|~t&n)+i+o;return(s<<a|s>>>32-a)+t},c=function(e,t,r,n,i,a,o){var s=e+(t&n|r&~n)+i+o;return(s<<a|s>>>32-a)+t},d=function(e,t,r,n,i,a,o){var s=e+(t^r^n)+i+o;return(s<<a|s>>>32-a)+t},f=function(e,t,r,n,i,a,o){var s=e+(r^(t|~n))+i+o;return(s<<a|s>>>32-a)+t},h=t.MD5Algo=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_doReset",value:function(){this._hash=new i.WordArray([1732584193,4023233417,2562383102,271733878])}},{key:"_doProcessBlock",value:function(e,t){for(var r=e,n=0;n<16;n+=1){var i=t+n,a=e[i];r[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,u=r[t+0],h=r[t+1],p=r[t+2],v=r[t+3],g=r[t+4],m=r[t+5],y=r[t+6],_=r[t+7],w=r[t+8],b=r[t+9],E=r[t+10],T=r[t+11],C=r[t+12],S=r[t+13],k=r[t+14],O=r[t+15],R=o[0],A=o[1],x=o[2],L=o[3];R=l(R,A,x,L,u,7,s[0]),L=l(L,R,A,x,h,12,s[1]),x=l(x,L,R,A,p,17,s[2]),A=l(A,x,L,R,v,22,s[3]),R=l(R,A,x,L,g,7,s[4]),L=l(L,R,A,x,m,12,s[5]),x=l(x,L,R,A,y,17,s[6]),A=l(A,x,L,R,_,22,s[7]),R=l(R,A,x,L,w,7,s[8]),L=l(L,R,A,x,b,12,s[9]),x=l(x,L,R,A,E,17,s[10]),A=l(A,x,L,R,T,22,s[11]),R=l(R,A,x,L,C,7,s[12]),L=l(L,R,A,x,S,12,s[13]),x=l(x,L,R,A,k,17,s[14]),A=l(A,x,L,R,O,22,s[15]),R=c(R,A,x,L,h,5,s[16]),L=c(L,R,A,x,y,9,s[17]),x=c(x,L,R,A,T,14,s[18]),A=c(A,x,L,R,u,20,s[19]),R=c(R,A,x,L,m,5,s[20]),L=c(L,R,A,x,E,9,s[21]),x=c(x,L,R,A,O,14,s[22]),A=c(A,x,L,R,g,20,s[23]),R=c(R,A,x,L,b,5,s[24]),L=c(L,R,A,x,k,9,s[25]),x=c(x,L,R,A,v,14,s[26]),A=c(A,x,L,R,w,20,s[27]),R=c(R,A,x,L,S,5,s[28]),L=c(L,R,A,x,p,9,s[29]),x=c(x,L,R,A,_,14,s[30]),A=c(A,x,L,R,C,20,s[31]),R=d(R,A,x,L,m,4,s[32]),L=d(L,R,A,x,w,11,s[33]),x=d(x,L,R,A,T,16,s[34]),A=d(A,x,L,R,k,23,s[35]),R=d(R,A,x,L,h,4,s[36]),L=d(L,R,A,x,g,11,s[37]),x=d(x,L,R,A,_,16,s[38]),A=d(A,x,L,R,E,23,s[39]),R=d(R,A,x,L,S,4,s[40]),L=d(L,R,A,x,u,11,s[41]),x=d(x,L,R,A,v,16,s[42]),A=d(A,x,L,R,y,23,s[43]),R=d(R,A,x,L,b,4,s[44]),L=d(L,R,A,x,C,11,s[45]),x=d(x,L,R,A,O,16,s[46]),A=d(A,x,L,R,p,23,s[47]),R=f(R,A,x,L,u,6,s[48]),L=f(L,R,A,x,_,10,s[49]),x=f(x,L,R,A,k,15,s[50]),A=f(A,x,L,R,m,21,s[51]),R=f(R,A,x,L,C,6,s[52]),L=f(L,R,A,x,v,10,s[53]),x=f(x,L,R,A,E,15,s[54]),A=f(A,x,L,R,h,21,s[55]),R=f(R,A,x,L,w,6,s[56]),L=f(L,R,A,x,O,10,s[57]),x=f(x,L,R,A,y,15,s[58]),A=f(A,x,L,R,S,21,s[59]),R=f(R,A,x,L,g,6,s[60]),L=f(L,R,A,x,T,10,s[61]),x=f(x,L,R,A,p,15,s[62]),A=f(A,x,L,R,b,21,s[63]),o[0]=o[0]+R|0,o[1]=o[1]+A|0,o[2]=o[2]+x|0,o[3]=o[3]+L|0}},{key:"_doFinalize",value:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var i=Math.floor(r/4294967296),a=r;t[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,s=o.words,u=0;u<4;u+=1){var l=s[u];s[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return o}},{key:"clone",value:function(){var e=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e._hash=this._hash.clone(),e}}]),t}(i.Hasher);t.MD5=i.Hasher._createHelper(h),t.HmacMD5=i.Hasher._createHmacHelper(h)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AES=t.AESAlgo=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(13);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}for(var s=[],u=[],l=[],c=[],d=[],f=[],h=[],p=[],v=[],g=[],m=[],y=0;y<256;y+=1)m[y]=y<128?y<<1:y<<1^283;for(var _=0,w=0,b=0;b<256;b+=1){var E=w^w<<1^w<<2^w<<3^w<<4;E=E>>>8^255&E^99,s[_]=E,u[E]=_;var T=m[_],C=m[T],S=m[C],k=257*m[E]^16843008*E;l[_]=k<<24|k>>>8,c[_]=k<<16|k>>>16,d[_]=k<<8|k>>>24,f[_]=k,k=16843009*S^65537*C^257*T^16843008*_,h[E]=k<<24|k>>>8,p[E]=k<<16|k>>>16,v[E]=k<<8|k>>>24,g[E]=k,_?(_=T^m[m[m[S^T]]],w^=m[m[w]]):_=w=1}var O=[0,1,2,4,8,16,32,64,128,27,54],R=t.AESAlgo=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_doReset",value:function(){var e=void 0;if(!this._nRounds||this._keyPriorReset!==this._key){this._keyPriorReset=this._key;var t=this._keyPriorReset,r=t.words,n=t.sigBytes/4;this._nRounds=n+6;var i=4*(this._nRounds+1);this._keySchedule=[];for(var a=this._keySchedule,o=0;o<i;o+=1)o<n?a[o]=r[o]:(e=a[o-1],o%n?n>6&&o%n==4&&(e=s[e>>>24]<<24|s[e>>>16&255]<<16|s[e>>>8&255]<<8|s[255&e]):(e=s[(e=e<<8|e>>>24)>>>24]<<24|s[e>>>16&255]<<16|s[e>>>8&255]<<8|s[255&e],e^=O[o/n|0]<<24),a[o]=a[o-n]^e);this._invKeySchedule=[];for(var u=this._invKeySchedule,l=0;l<i;l+=1){var c=i-l;e=l%4?a[c]:a[c-4],u[l]=l<4||c<=4?e:h[s[e>>>24]]^p[s[e>>>16&255]]^v[s[e>>>8&255]]^g[s[255&e]]}}}},{key:"encryptBlock",value:function(e,t){this._doCryptBlock(e,t,this._keySchedule,l,c,d,f,s)}},{key:"decryptBlock",value:function(e,t){var r=e,n=r[t+1];r[t+1]=r[t+3],r[t+3]=n,this._doCryptBlock(r,t,this._invKeySchedule,h,p,v,g,u),n=r[t+1],r[t+1]=r[t+3],r[t+3]=n}},{key:"_doCryptBlock",value:function(e,t,r,n,i,a,o,s){for(var u=e,l=this._nRounds,c=u[t]^r[0],d=u[t+1]^r[1],f=u[t+2]^r[2],h=u[t+3]^r[3],p=4,v=1;v<l;v+=1){var g=n[c>>>24]^i[d>>>16&255]^a[f>>>8&255]^o[255&h]^r[p];p+=1;var m=n[d>>>24]^i[f>>>16&255]^a[h>>>8&255]^o[255&c]^r[p];p+=1;var y=n[f>>>24]^i[h>>>16&255]^a[c>>>8&255]^o[255&d]^r[p];p+=1;var _=n[h>>>24]^i[c>>>16&255]^a[d>>>8&255]^o[255&f]^r[p];p+=1,c=g,d=m,f=y,h=_}var w=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^r[p];p+=1;var b=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^r[p];p+=1;var E=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^r[p];p+=1;var T=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^r[p];p+=1,u[t]=w,u[t+1]=b,u[t+2]=E,u[t+3]=T}}]),t}(i.BlockCipher);R.keySize=8,t.AES=i.BlockCipher._createHelper(R)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTR=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(13);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.CTR=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(i.BlockCipherMode);u.Encryptor=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),n(t,[{key:"processBlock",value:function(e,t){var r=e,n=this._cipher,i=n.blockSize,a=this._iv,o=this._counter;a&&(this._counter=a.slice(0),o=this._counter,this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[i-1]=o[i-1]+1|0;for(var u=0;u<i;u+=1)r[t+u]^=s[u]}}]),t}(u),u.Decryptor=u.Encryptor},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoPadding={pad:function(){},unpad:function(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformHeaders=function(e){var t=Object.assign({},e);return Object.keys(n).forEach((function(r){var i=n[r];e&&e[r]&&(t[i]=e[r],delete t[r])})),t},t.default=function(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var r=e.split(": "),n=r.shift(),i=r.join(": ");t[n]=i}))}catch(e){}return t},t.getFileSize=function(e){var t=e["content-range"]||"",r=t?t.split("/"):[];return r.length>1?parseInt(r[1],10):0};var n={"x-cache":"x_cache","x-response-sinfo":"server_ip"}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.url,i=t.method,a=void 0===i?"GET":i,o=t.type,s=void 0===o?"arraybuffer":o,u=t.data,l=void 0===u?{}:u;return n(this,e),new Promise((function(e,t){var n=new window.XMLHttpRequest,i=a.toUpperCase(),o=[];for(var u in s&&(n.responseType=s),l)o.push("k="+l[u]);if("GET"===i)n.open(i,r+"?"+o.join("&")),n.send();else{if("POST"!==i)throw new Error("xhr "+i+" is not supported");n.open(i,r,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(l))}n.onload=function(){200===n.status||206===n.status?e(n):t(n)},n.onerror=function(){t(n)}}))},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(4)),a=s(r(2)),o=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.drm=t,this.KEYSYSTEM_TYPE="",this.keys={},this.drm.clearKeys&&(this.KEYSYSTEM_TYPE="org.w3.clearkey",this.keys=this.drm.clearKeys),this.options=[],this.ensurePromise=void 0,(0,i.default)(this)}return n(e,[{key:"setOptions",value:function(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t={videoCapabilities:e},r={videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]};this.options=[r,t]}},{key:"bail",value:function(e){}},{key:"UpdateSessionFunc",value:function(e){var t=this;return function(r){var n=[],i=[];Object.keys(e).forEach((function(t){var r=e[t],o=a.default.fromHex(t),s=a.default.fromHex(r),u={kty:"oct",kid:a.default.toBase64(o,!1),k:a.default.toBase64(s,!1)};n.push(u),i.push(u.kid)}));var o={keys:n},s=JSON.stringify(o);r.target.update(a.default.StringToArrayBuffer(s)).then((function(){}),t.bail(" MediaKeySession update failed"))}}},{key:"KeysChange",value:function(e){}},{key:"EnsureMediaKeysCreated",value:function(e,t,r){return this.ensurePromise||(this.ensurePromise=navigator.requestMediaKeySystemAccess(t,r).then((function(e){return e.createMediaKeys()}),this.bail(" Failed to request key system access.")).then((function(t){return e.setMediaKeys(t)}),this.bail(" failed to create MediaKeys object"))),this.ensurePromise}},{key:"SetupEME",value:function(e,t){var r=this;e.sessions=[],(0,o.on)(this,"encrypted",(function(){var t=JSON.stringify({kids:["0123456789abcdef0123456789abcdef"]}),n=new Uint8Array(a.default.toUTF8(t));r.EnsureMediaKeysCreated(e,r.KEYSYSTEM_TYPE,r.options).then((function(){var t=e.mediaKeys.createSession();return e.sessions.push(t),t.addEventListener("message",r.UpdateSessionFunc(r.keys)),t.addEventListener("keystatuseschange",r.KeysChange),t.generateRequest("keyids",n.buffer)}),r.bail(" failed to ensure MediaKeys on HTMLMediaElement")).then((function(){}),r.bail(" Failed to generate request."))}))}}]),e}();t.default=u,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=o(r(116)),a=o(r(4));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,a.default)(this),this.workerList=[],this.bodyId=0,this.isSwitchHeader=!1,this.workerIndex=0,this.init()}return n(e,[{key:"init",value:function(){for(var e=this,t=0;t<2;t++){var r=new i.default;r.onmessage=function(t){e.emit(t.data.method,t.data)},this.workerList.push(r)}}},{key:"destroy",value:function(){this.workerList.forEach((function(e){e.terminate()})),this.workerList=[]}},{key:"decryptHeader",value:function(e,t){var r=this;return new Promise((function(n){var i=new Parser(e),a=Math.floor(1e3*Math.random());r.workerList[0].postMessage({method:"decryptHeader",id:a,args:{buf:e,parsed:i}}),r.on("decryptHeader",(function e(i){if(t){var o=i.args.data;r.isSwitchHeader&&(r.off("decryptHeader",e),r.isSwitchHeader=!1,n(o)),r.on("decryptBody",(function t(i){i.id===r.bodyId&&(r.off("decryptBody",t),r.off("decryptHeader",e),n(o))}))}else i.id===a&&(r.off("decryptHeader",e),n(i.args.data))}))}))}},{key:"decryptBody",value:function(e,t){var r=this,n=r.bodyId+1;return r.bodyId=n,new Promise((function(i){r.on("decryptBody",(function e(t){t.id===n&&(t.id===r.bodyId&&(r.isSwitchHeader=!0),r.off("decryptBody",e),i(t.args.data))})),r.workerList[r.workerIndex].postMessage({method:"decryptBody",id:n,args:{data:e,keyValue:t}}),r.workerIndex=r.workerIndex+1,r.workerIndex>=2&&(r.workerIndex=0)}))}}]),e}();t.default=s,e.exports=t.default},function(e,t,r){e.exports=function(){return r(117)('!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=t.Base=function(){function e(){u(this,e)}return i(e,[{key:"mixIn",value:function(e){return Object.assign(this,e)}},{key:"clone",value:function(){var e=new this.constructor;return Object.assign(e,this),e}}],[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(this,[null].concat(t)))}}]),e}(),f=t.WordArray=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*e.length;u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=e;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){for(var o=i.byteLength,s=[],f=0;f<o;f+=1)s[f>>>2]|=i[f]<<24-f%4*8;n.words=s,n.sigBytes=o}else n.words=e,n.sigBytes=r;return n}return o(t,e),i(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return e.stringify(this)}},{key:"concat",value:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<i;a+=1){var o=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(var u=0;u<i;u+=4)t[n+u>>>2]=r[u>>>2];return this.sigBytes+=i,this}},{key:"clamp",value:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}},{key:"clone",value:function(){var e=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.words=this.words.slice(0),e}}],[{key:"random",value:function(e){for(var r,n=[],i=function(e){var t=e,r=987654321,n=4294967295;return function(){var e=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return e/=4294967296,(e+=.5)*(Math.random()>.5?1:-1)}},a=0;a<e;a+=4){var o=i(4294967296*(r||Math.random()));r=987654071*o(),n.push(4294967296*o()|0)}return new t(n,e)}}]),t}(s),c=t.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=1){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new f(r,t/2)}},l=t.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=1){var a=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new f(r,t)}},p=t.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},y=t.BufferedBlockAlgorithm=function(e){function t(){u(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._minBufferSize=0,e}return o(t,e),i(t,[{key:"reset",value:function(){this._data=new f,this._nDataBytes=0}},{key:"_append",value:function(e){var t=e;"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}},{key:"_process",value:function(e){var t=void 0,r=this._data,n=this.blockSize,i=r.words,a=r.sigBytes,o=a/(4*n),u=(o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0))*n,s=Math.min(4*u,a);if(u){for(var c=0;c<u;c+=n)this._doProcessBlock(i,c);t=i.splice(0,u),r.sigBytes-=s}return new f(t,s)}},{key:"clone",value:function(){var e=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e._data=this._data.clone(),e}}]),t}(s),h=(t.Hasher=function(e){function t(e){u(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.blockSize=16,r.cfg=Object.assign(new s,e),r.reset(),r}return o(t,e),i(t,[{key:"reset",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this._doReset()}},{key:"update",value:function(e){return this._append(e),this._process(),this}},{key:"finalize",value:function(e){return e&&this._append(e),this._doFinalize()}}],[{key:"_createHelper",value:function(e){return function(t,r){return new e(r).finalize(t)}}},{key:"_createHmacHelper",value:function(e){return function(t,r){return new h(e,r).finalize(t)}}}]),t}(y),t.HMAC=function(e){function t(e,r){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=new e;n._hasher=i;var o=r;"string"==typeof o&&(o=p.parse(o));var s=i.blockSize,f=4*s;o.sigBytes>f&&(o=i.finalize(r)),o.clamp();var c=o.clone();n._oKey=c;var l=o.clone();n._iKey=l;for(var y=c.words,h=l.words,d=0;d<s;d+=1)y[d]^=1549556828,h[d]^=909522486;return c.sigBytes=f,l.sigBytes=f,n.reset(),n}return o(t,e),i(t,[{key:"reset",value:function(){var e=this._hasher;e.reset(),e.update(this._iKey)}},{key:"update",value:function(e){return this._hasher.update(e),this}},{key:"finalize",value:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}]),t}(s))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordBasedCipher=t.OpenSSLKdf=t.SerializableCipher=t.OpenSSLFormatter=t.CipherParams=t.BlockCipher=t.Pkcs7=t.CBC=t.BlockCipherMode=t.StreamCipher=t.Cipher=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},a=r(0),o=r(9),u=r(10);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=t.Cipher=function(e){function t(e,r,n){s(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.cfg=Object.assign(new a.Base,n),i._xformMode=e,i._key=r,i.reset(),i}return c(t,e),n(t,[{key:"reset",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this._doReset()}},{key:"process",value:function(e){return this._append(e),this._process()}},{key:"finalize",value:function(e){return e&&this._append(e),this._doFinalize()}}],[{key:"createEncryptor",value:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}},{key:"createDecryptor",value:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}},{key:"_createHelper",value:function(e){var t=function(e){return"string"==typeof e?_:b};return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}]),t}(a.BufferedBlockAlgorithm);l._ENC_XFORM_MODE=1,l._DEC_XFORM_MODE=2,l.keySize=4,l.ivSize=4;t.StreamCipher=function(e){function t(){var e;s(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return a.blockSize=1,a}return c(t,e),n(t,[{key:"_doFinalize",value:function(){return this._process(!0)}}]),t}(l);var p=t.BlockCipherMode=function(e){function t(e,r){s(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._cipher=e,n._iv=r,n}return c(t,e),n(t,null,[{key:"createEncryptor",value:function(e,t){return this.Encryptor.create(e,t)}},{key:"createDecryptor",value:function(e,t){return this.Decryptor.create(e,t)}}]),t}(a.Base);function y(e,t,r){var n=e,i=void 0,a=this._iv;a?(i=a,this._iv=void 0):i=this._prevBlock;for(var o=0;o<r;o+=1)n[t+o]^=i[o]}var h=t.CBC=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),t}(p);h.Encryptor=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,[{key:"processBlock",value:function(e,t){var r=this._cipher,n=r.blockSize;y.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}]),t}(h),h.Decryptor=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,[{key:"processBlock",value:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),y.call(this,e,t,n),this._prevBlock=i}}]),t}(h);var d=t.Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],u=0;u<n;u+=4)o.push(i);var s=a.WordArray.create(o,n);e.concat(s)},unpad:function(e){var t=e,r=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=r}},v=(t.BlockCipher=function(e){function t(e,r,n){s(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,Object.assign({mode:h,padding:d},n)));return i.blockSize=4,i}return c(t,e),n(t,[{key:"reset",value:function(){var e=void 0;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this);var r=this.cfg,n=r.iv,a=r.mode;this._xformMode===this.constructor._ENC_XFORM_MODE?e=a.createEncryptor:(e=a.createDecryptor,this._minBufferSize=1),this._mode=e.call(a,this,n&&n.words),this._mode.__creator=e}},{key:"_doProcessBlock",value:function(e,t){this._mode.processBlock(e,t)}},{key:"_doFinalize",value:function(){var e=void 0,t=this.cfg.padding;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}]),t}(l),t.CipherParams=function(e){function t(e){s(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.mixIn(e),r}return c(t,e),n(t,[{key:"toString",value:function(e){return(e||this.formatter).stringify(this)}}]),t}(a.Base)),w=t.OpenSSLFormatter={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.WordArray.create([1398893684,1701076831]).concat(r).concat(t):t).toString(o.Base64)},parse:function(e){var t=void 0,r=o.Base64.parse(e),n=r.words;return 1398893684===n[0]&&1701076831===n[1]&&(t=a.WordArray.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),v.create({ciphertext:r,salt:t})}},b=t.SerializableCipher=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,null,[{key:"encrypt",value:function(e,t,r,n){var i=Object.assign(new a.Base,this.cfg,n),o=e.createEncryptor(r,i),u=o.finalize(t),s=o.cfg;return v.create({ciphertext:u,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:o.blockSize,formatter:i.format})}},{key:"decrypt",value:function(e,t,r,n){var i=t,o=Object.assign(new a.Base,this.cfg,n);return i=this._parse(i,o.format),e.createDecryptor(r,o).finalize(i.ciphertext)}},{key:"_parse",value:function(e,t){return"string"==typeof e?t.parse(e,this):e}}]),t}(a.Base);b.cfg=Object.assign(new a.Base,{format:w});var g=t.OpenSSLKdf={execute:function(e,t,r,n){var i=n;i||(i=a.WordArray.random(8));var o=u.EvpKDFAlgo.create({keySize:t+r}).compute(e,i),s=a.WordArray.create(o.words.slice(t),4*r);return o.sigBytes=4*t,v.create({key:o,iv:s,salt:i})}},_=t.PasswordBasedCipher=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,null,[{key:"encrypt",value:function(e,t,r,n){var i=Object.assign(new a.Base,this.cfg,n),o=i.kdf.execute(r,e.keySize,e.ivSize);i.iv=o.iv;var u=b.encrypt.call(this,e,t,o.key,i);return u.mixIn(o),u}},{key:"decrypt",value:function(e,t,r,n){var i=t,o=Object.assign(new a.Base,this.cfg,n);i=this._parse(i,o.format);var u=o.kdf.execute(r,e.keySize,e.ivSize,i.salt);return o.iv=u.iv,b.decrypt.call(this,e,i,u.key,o)}}]),t}(b);_.cfg=Object.assign(b.cfg,{kdf:g})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=(n=a)&&n.__esModule?n:{default:n};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffer=new Uint8Array(0)}return i(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){t?e.buffer=(0,o.default)(Uint8Array,e.buffer,t):window.console.error(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}();t.default=u,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={findBox:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.type!==t){if(e&&e.subBox){var i=e.subBox.filter((function(e){return e.type===t}));i.length?i.forEach((function(e){return r.push(e)})):e.subBox.forEach((function(e){return n.findBox(e,t,r)}))}}else r.push(e);return(r=[].concat(r)).length>1?r:r[0]},padStart:function(e,t,r){for(var n=String(r),i=t>>0,a=Math.ceil(i/n.length),o=[],u=String(e);a--;)o.push(n);return o.join("").substring(0,i-u.length)+u},toHex:function(){for(var e=[],t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.forEach((function(t){e.push(n.padStart(Number(t).toString(16),2,0))})),e},sum:function(){for(var e=0,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){e+=t})),e},stscOffset:function(e,t,r){var n=r[t];if(n){var i=Math.floor((t-n.first_sample)/n.samples_per_chunk),a=n.first_sample+i*n.samples_per_chunk;return{chunk_index:n.first_chunk+i,samples_offset:[a,t]}}var o=e.entries.pop();e.entries.push(o);var u=Math.floor((t-o.first_sample)/o.samples_per_chunk);return{chunk_index:o.first_chunk+u,samples_offset:[o.first_sample+o.samples_per_chunk*u,t]}},seekSampleOffset:function(e,t,r,i,a,o){var u=n.stscOffset(e,i+1,o),s=t.entries[u.chunk_index-1]+n.sum.apply(null,r.entries.slice(u.samples_offset[0]-1,u.samples_offset[1]-1))-a;if(void 0===s)throw new Error("result="+s+",stco.length="+t.entries.length+",sum="+n.sum.apply(null,r.entries.slice(0,i)));if(s<0)throw new Error("result="+s+",stco.length="+t.entries.length+",sum="+n.sum.apply(null,r.entries.slice(0,i)));return s},seekSampleTime:function(e,t,r){var n=void 0,i=void 0,a=0,o=0,u=0;return e.entry.every((function(e){return i=e.sampleDuration,r<a+e.sampleCount?(n=o+(r-a)*e.sampleDuration,!1):(a+=e.sampleCount,o+=e.sampleCount*i,!0)})),t&&t[r]&&(u=t[r]),n||(n=o+(r-a)*i),{time:n,duration:i,offset:u}},seekOrderSampleByTime:function(e,t,r){var n=0,i=0,a=0,o=void 0;return e.every((function(e,u){return o=e.sampleCount*e.sampleDuration/t,r<=n+o?(i=a+Math.ceil((r-n)*t/e.sampleDuration),n+=Math.ceil((r-n)*t/e.sampleDuration)*e.sampleDuration/t,!1):(n+=o,a+=e.sampleCount,!0)})),0===i&&a>0&&(i=a-1),{order:i,startTime:n}},seekTrakDuration:function(e,t){var r=n.findBox(e,"stts"),i=0;return r.entry.forEach((function(e){i+=e.sampleCount*e.sampleDuration})),Number(i/t).toFixed(4)},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t},fromHex:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=window.parseInt(e.substr(r,2),16);return t},fromCharCode:function(e){for(var t="",r=0;r<e.length;r+=16e3){var n=e.subarray(r,r+16e3);t+=String.fromCharCode.apply(null,n)}return t},ArrayBufferToString:function(e){for(var t="",r=new Uint8Array(e),n=0;n<r.length;n++)t+=String.fromCharCode(r[n]);return t},Base64ToHex:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),r="",n=0;n<t.length;n++)r+=("0"+t.charCodeAt(n).toString(16)).substr(-2);return r},toBase64:function(e,t){var r=n.fromCharCode(e);t=void 0===t||t;var i=window.btoa(r).replace(/\\+/g,"-").replace(/\\//g,"_");return t?i:i.replace(/=*$/,"")},toUTF8:function(e){for(var t=encodeURIComponent(e),r=unescape(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n.buffer},bufferToString:function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()},strToBuf:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e[r]+e[r+1],16));return new Uint8Array(t)},formatIV:function(e){var t="";if(e.forEach((function(e){t+=n.bufferToString(e)})),t.length<=32)for(var r=32-t.length,i=0;i<r;i++)t+="0";return t},str2hex:function(e){if(""===e)return"";for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t},parse:function(e){if(!Array.isArray(e)){for(var t=[],r="",n=0;n<e.length;n++)n%2&&(r=e[n-1]+e[n],t.push(parseInt(r,16)),r="");return t}return e.map((function(e){return parseInt(e,16)}))}};t.default=n,n.generateUniqueKey=function(e){var t=e.vid,r=e.start,n=e.end,i=e.mediaType,a=e.definition,o=e.preloadTime;return r=r||0,n=n||0,i=i||"video",t?o?a?t+"#"+i+"#"+a+"#pretime"+o+"#mp4":t+"#"+i+"#pretime"+o+"#mp4":a?t+"#"+i+"#"+a+"#"+r+"#"+n+"#mp4":t+"#"+i+"#"+r+"#"+n+"#mp4":null},n.validateFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e instanceof ArrayBuffer){try{if(2===t.length){var r=t[1]-t[0]+1;if(!(e.byteLength===r))return}}catch(e){return console.error(e),!1}return!0}return!1},n.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\\s.*]+)(?=]$)/g)[0]},n.getBufferSplits=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e5,n=t-e;if(n-r<r/2||!t)return[[e,t]];for(var i=[];e<t;){var a=e+r;(a>t||t-a<r/2)&&(a=t),i.push([e,a]),e=a+1}return i},n.nowTime=function(){try{return parseInt(performance.now(),10)}catch(e){return(new Date).getTime()}},e.exports=t.default},function(e,t,r){"use strict";var n=a(r(2)),i=a(r(7));function a(e){return e&&e.__esModule?e:{default:e}}onmessage=function(e){if("decryptBody"===e.data.method){var t=function(e){var t=new n.default;return t.write(i.default.styp(e)),t.write(i.default.sidx(e)),t.write(i.default.moof(e)),t.write(i.default.mdat(e)),t.buffer}(e.data.args.data,e.data.args.keyValue);this.postMessage({method:"decryptBody",id:e.data.id,args:{data:t}})}}},function(e,t,r){"use strict";var n,i=r(6),a=(n=i)&&n.__esModule?n:{default:n};e.exports=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=!0,o=!1,u=void 0;try{for(var s,f=n[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var c=s.value;t+=c.length}}catch(e){o=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(o)throw u}}var l=new e(t),p=0,y=!0,h=!1,d=void 0;try{for(var v,w=n[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var b=v.value;l.set(b,p),p+=b.length}}catch(e){h=!0,d=e}finally{try{!y&&w.return&&w.return()}finally{if(h)throw d}}return l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(2)),a=u(r(3)),o=u(r(8));function u(e){return e&&e.__esModule?e:{default:e}}var s=Math.pow(2,32)-1,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"type",value:function(e){return new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])}},{key:"size",value:function(e){return i.default.writeUint32(e)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"ftyp",value:function(){var t=new i.default;return t.write(e.size(24),e.type("ftyp"),new Uint8Array([105,115,111,54,0,0,0,1,105,115,111,54,100,97,115,104])),t.buffer}},{key:"moov",value:function(t){var r=new i.default,n=8,a=e.mvhd(t.duration,t.timeScale),o=e.mvex(t.duration,t.timeScale),u=e.videoTrak(t),s=new Uint8Array([]);if(t.channelCount&&(s=e.audioTrak(t)),t.useEME&&t.encv){t.pssh||(t.pssh={kid:t.kid});var f=e.pssh(t.pssh);[a,o,u,s,f].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("moov"),a,o,u,s,f)}else[a,o,u,s].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("moov"),a,o,u,s);return r.buffer}},{key:"pssh",value:function(t){var r=new i.default,n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],a.default.parse(t.kid),[0,0,0,0]));return r.write(e.size(8+n.byteLength),e.type("pssh"),n),r.buffer}},{key:"mvhd",value:function(t,r){var n=new i.default;t*=r;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3]);return n.write(e.size(8+a.length),e.type("mvhd"),new Uint8Array(a)),n.buffer}},{key:"videoTrak",value:function(t){var r=new i.default,n=8,a=e.tkhd({id:1,duration:t.videoDuration,timescale:t.videoTimeScale,width:t.width,height:t.height,type:"video"}),o=e.mdia({type:"video",timescale:t.videoTimeScale,duration:t.videoDuration,vps:t.vps,sps:t.sps,pps:t.pps,pixelRatio:t.pixelRatio,width:t.width,height:t.height,encv:t.encv,useEME:t.useEME,videoCodec:t.videoCodec,hvc1Data:t.hvc1Data,hvcCData:t.hvcCData,stss:t.stss});return[a,o].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("trak"),a,o),r.buffer}},{key:"audioTrak",value:function(t){var r=new i.default,n=8,a=e.tkhd({id:2,duration:t.audioDuration,timescale:t.audioTimeScale,width:0,height:0,type:"audio"}),o=t.channelCount,u=t.sampleRate;t.enca&&(o=t.enca.channelCount,u=t.enca.sampleRate);var s=e.mdia({type:"audio",timescale:t.audioTimeScale,duration:t.audioDuration,channelCount:o,sampleRate:u,audioConfig:t.audioConfig,enca:t.enca,useEME:t.useEME});return[a,s].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("trak"),a,s),r.buffer}},{key:"tkhd",value:function(t){var r=new i.default,n=t.id,a=t.duration*t.timeScale,o=t.width,u=t.height,s=t.type,f=new Uint8Array([0,0,0,3,0,0,0,0,217,172,236,86,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,"video"===s?1:0,"audio"===s?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,u>>8&255,255&u,0,0]);return r.write(e.size(8+f.byteLength),e.type("tkhd"),f),r.buffer}},{key:"edts",value:function(t){var r=new i.default,n=t.duration,a=t.mediaTime;return r.write(e.size(36),e.type("edts")),r.write(e.size(28),e.type("elst")),r.write(new Uint8Array([0,0,0,1,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,1])),r.buffer}},{key:"mdia",value:function(t){var r=new i.default,n=8,a=e.mdhd(t.timescale),o=e.hdlr(t.type),u=e.minf(t);return[a,o,u].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("mdia"),a,o,u),r.buffer}},{key:"mdhd",value:function(t){var r=new i.default;var n=new Uint8Array([0,0,0,0,217,20,37,90,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,21,199,0,0]);return r.write(e.size(12+n.byteLength),e.type("mdhd"),e.extension(0,0),n),r.buffer}},{key:"hdlr",value:function(t){var r=new i.default,n=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===t&&(n.splice.apply(n,[8,4].concat([115,111,117,110])),n.splice.apply(n,[24,13].concat([83,111,117,110,100,72,97,110,100,108,101,114,0]))),r.write(e.size(8+n.length),e.type("hdlr"),new Uint8Array(n)),r.buffer}},{key:"minf",value:function(t){var r=new i.default,n=8,a="video"===t.type?e.vmhd():e.smhd(),o=e.dinf(),u=e.stbl(t);return[a,o,u].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("minf"),a,o,u),r.buffer}},{key:"vmhd",value:function(){var t=new i.default;return t.write(e.size(20),e.type("vmhd"),new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])),t.buffer}},{key:"smhd",value:function(){var t=new i.default;return t.write(e.size(16),e.type("smhd"),new Uint8Array([0,0,0,0,0,0,0,0])),t.buffer}},{key:"dinf",value:function(){var t=new i.default;return t.write(e.size(36),e.type("dinf"),e.size(28),e.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),t.buffer}},{key:"stbl",value:function(t){var r=new i.default,n=8,a=e.stsd(t),o=e.stts(),u=e.stsc(),s=e.stsz(),f=e.stco();if("video"===t.type){var c=e.stss(t.stss);[a,o,c,u,s,f].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("stbl"),a,o,c,u,s,f)}else[a,o,u,s,f].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("stbl"),a,o,u,s,f);return r.buffer}},{key:"stsd",value:function(t){var r=new i.default,n=void 0;return n="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):t.videoCodec.indexOf("hvc1")>-1||t.encv&&t.encv.data_format.indexOf("hvc1")>-1?e.hvc1(t):e.avc1(t),r.write(e.size(16+n.byteLength),e.type("stsd"),e.extension(0,0),new Uint8Array([0,0,0,1]),n),r.buffer}},{key:"encv",value:function(t){var r=new i.default,n=t.sps,a=t.pps,o=t.width,u=t.height,s=t.pixelRatio[0],f=t.pixelRatio[1],c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l=new Uint8Array([1,n[1],n[2],n[3],255,225,n.length>>>8&255,255&n.length].concat(n).concat([1,a.length>>>8&255,255&a.length]).concat(a)),p=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),y=e.sinf(t.encv),h=new Uint8Array([s>>24,s>>16&255,s>>8&255,255&s,f>>24,f>>16&255,f>>8&255,255&f]);return r.write(e.size(40+c.byteLength+l.byteLength+p.byteLength+h.byteLength+y.byteLength),e.type("encv"),c,e.size(8+l.byteLength),e.type("avcC"),l,e.size(8+p.byteLength),e.type("btrt"),p,e.size(8+y.byteLength),e.type("sinf"),y,e.size(8+h.byteLength),e.type("pasp"),h),r.buffer}},{key:"sinf",value:function(t){var r=new i.default,n=new Uint8Array([]),a=e.frma(t),o=e.schm(),u=e.schi(t);return r.write(n,a,o,u),r.buffer}},{key:"frma",value:function(t){var r=new i.default,n=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]);return r.write(e.size(8+n.byteLength),e.type("frma"),n),r.buffer}},{key:"schm",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);return t.write(e.size(8+r.byteLength),e.type("schm"),r),t.buffer}},{key:"schi",value:function(t){var r=new i.default,n=new Uint8Array([]),a=e.tenc(t);return r.write(e.size(8+n.byteLength+a.byteLength),e.type("schi"),n,a),r.buffer}},{key:"tenc",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat(a.default.parse(t.default_KID)));return r.write(e.size(8+n.byteLength),e.type("tenc"),n),r.buffer}},{key:"enca",value:function(t){var r=new i.default,n=t.enca.channelCount,a=t.enca.sampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,a>>8&255,255&a,0,0]),u=e.esds(t.audioConfig),s=e.sinf(t.enca);return r.write(e.size(16+o.byteLength+u.byteLength+s.byteLength),e.type("enca"),o,u,e.size(8+s.byteLength),e.type("sinf"),s),r.buffer}},{key:"mp4a",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),a=e.esds(t.audioConfig);return r.write(e.size(8+n.byteLength+a.byteLength),e.type("mp4a"),n,a),r.buffer}},{key:"esds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[43,146,8,0],r=t.length,n=new i.default,a=new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(t).concat([6,1,2]));return n.write(e.size(8+a.byteLength),e.type("esds"),a),n.buffer}},{key:"avc1",value:function(t){var r=new i.default,n=t.sps,a=t.pps,o=t.width,u=t.height,s=t.pixelRatio[0],f=t.pixelRatio[1],c=new Uint8Array([1,n[1],n[2],n[3],255,225].concat([n.length>>>8&255,255&n.length]).concat(n).concat(1).concat([a.length>>>8&255,255&a.length]).concat(a)),l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),y=new Uint8Array([s>>24,s>>16&255,s>>8&255,255&s,f>>24,f>>16&255,f>>8&255,255&f]);return r.write(e.size(40+l.byteLength+c.byteLength+p.byteLength),e.type("avc1"),l,e.size(8+c.byteLength),e.type("avcC"),c,e.size(20),e.type("btrt"),p,e.size(16),e.type("pasp"),y),r.buffer}},{key:"hvc1",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return r.write(e.size(8+n.byteLength+8+t.hvcCData.byteLength+10),e.type("hvc1"),n,e.size(8+t.hvcCData.byteLength),e.type("hvcC"),new Uint8Array(t.hvcCData),e.size(10),e.type("fiel"),new Uint8Array([1,0])),r.buffer}},{key:"stts",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stts"),r),t.buffer}},{key:"stss",value:function(t){var r=new i.default,n=[];t.entries.forEach((function(e){n.push(e>>24),n.push(e>>16&255),n.push(e>>8&255),n.push(255&e)}));var a=new Uint8Array([0,0,0,0,t.count>>24,t.count>>16&255,t.count>>8&255,255&t.count].concat(n));return r.write(e.size(16+4*t.count),e.type("stss"),a),r.buffer}},{key:"stsc",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stsc"),r),t.buffer}},{key:"stco",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stco"),r),t.buffer}},{key:"stsz",value:function(){var t=new i.default,r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return t.write(e.size(20),e.type("stsz"),r),t.buffer}},{key:"mvex",value:function(t,r){var n=new i.default,a=i.default.writeUint32(t*r);return n.write(e.size(88),e.type("mvex"),e.size(16),e.type("mehd"),e.extension(0,0),a,e.trex1(1),e.trex2(2)),n.buffer}},{key:"trex",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return r.write(e.size(8+n.byteLength),e.type("trex"),n),r.buffer}},{key:"trex1",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]);return r.write(e.size(8+n.byteLength),e.type("trex"),n),r.buffer}},{key:"trex2",value:function(t){var r=new i.default,n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]);return r.write(e.size(8+n.byteLength),e.type("trex"),n),r.buffer}},{key:"styp",value:function(t){var r=new i.default,n=new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]);return r.write(e.size(8+n.byteLength),e.type("styp"),n),r.buffer}},{key:"sidx",value:function(t){var r=new i.default,n=1===t.id?t.videoTimeScale:t.audioTimeScale,a=t.samples[0].duration,o=a*t.samples.length,u=t.sampleOffset*a,s=8;t.samples.forEach((function(e){s+=e.size}));var f=0;if(1===t.id){var c=0,l=t.videoSenc;1===t.id&&l.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,f=s+141+12*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(f=s+12*t.samples.length+84)}else f=s+104+4*t.samples.length,t.useEME&&t.isAudioEncryption&&(f=s+169+12*t.samples.length);var p=new Uint8Array([0,0,0,0,0,0,0,255&t.id,n>>24&255,n>>16&255,n>>8&255,255&n,u>>24&255,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,1,0,f>>16&255,f>>8&255,255&f,o>>24&255,o>>16&255,o>>8&255,255&o,144,0,0,0]);return r.write(e.size(8+p.byteLength),e.type("sidx"),p),r.buffer}},{key:"moof",value:function(t){var r=new i.default,n=8,a=e.mfhd(t),o=e.traf(t);return[a,o].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("moof"),a,o),r.buffer}},{key:"mfhd",value:function(t){var r=new i.default,n=null;return n=(t.id,i.default.writeUint32((t.fragIndex||0)+1)),r.write(e.size(16),e.type("mfhd"),e.extension(0,0),n),r.buffer}},{key:"traf",value:function(t){var r=new i.default,n=8,a=e.tfhd(t.id),o=e.tfdt(t,t.time);if(t.useEME&&(t.isVideoEncryption||t.isAudioEncryption))if(t.isVideoEncryption)if(1===t.id){var u=e.saiz(t),s=e.saio(t),f=e.trun1(t),c=e.senc(t);[a,o,u,s,f,c].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,u,s,f,c)}else if(t.isAudioEncryption){var l=e.sbgp(t),p=e.saiz(t),y=e.saio(t),h=e.senc(t),d=e.trun1(t);[a,o,l,p,y,h,d].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,l,p,y,h,d)}else{var v=e.sbgp(t),w=e.trun1(t);[a,o,v,w].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,v,w)}else if(1===t.id){var b=e.trun1(t);[a,o,b].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,b)}else{var g=e.sbgp(t),_=e.saiz(t),m=e.saio(t),k=e.senc(t),O=e.trun1(t);[a,o,g,_,m,k,O].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,g,_,m,k,O)}else{var A=e.sdtp(t),z=e.trun(t,A.byteLength);[a,o,A,z].forEach((function(e){n+=e.byteLength})),r.write(e.size(n),e.type("traf"),a,o,A,z)}return r.buffer}},{key:"sbgp",value:function(t){var r=new i.default,n=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return r.write(e.size(12+n.byteLength),e.type("sbgp"),e.extension(0,0),n),r.buffer}},{key:"saiz",value:function(t){var r=new i.default,n=t.samples.length,a=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,255&n]);return r.write(e.size(8+a.byteLength),e.type("saiz"),a),r.buffer}},{key:"saio",value:function(t){var r=new i.default,n=12*t.samples.length+141;2===t.id&&t.isAudioEncryption&&(n=149);var a=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n]);return r.write(e.size(8+a.byteLength),e.type("saio"),a),r.buffer}},{key:"senc",value:function(t){var r=new i.default,n=t.samples.length,a=1===t.id?16:8,o=1===t.id?2:0,u=[],s=0;return 1===t.id?(u=t.videoSenc,s=t.videoSencLength):u=t.audioSenc,s=s||a*n,r.write(e.size(16+s),e.type("senc"),e.extension(0,o)),r.write(i.default.writeUint32(n)),u.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)r.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(r.write(i.default.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){r.write(i.default.writeUint16(e.BytesOfClearData)),r.write(i.default.writeUint32(e.BytesOfProtectedData))})))})),r.buffer}},{key:"tfhd",value:function(t){var r=new i.default,n=i.default.writeUint32(t);return r.write(e.size(16),e.type("tfhd"),new Uint8Array([0,2,0,0]),n),r.buffer}},{key:"tfdt",value:function(t,r){var n=new i.default,a=Math.floor(r/(s+1)),o=Math.floor(r%(s+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?n.write(e.size(16),e.type("tfdt"),e.extension(0,0),i.default.writeUint32(o)):n.write(e.size(20),e.type("tfdt"),e.extension(1,0),i.default.writeUint32(a),i.default.writeUint32(o)),n.buffer}},{key:"trun1",value:function(t){var r=t.id,n=1===r?12:4,a=new i.default,o=i.default.writeUint32(t.samples.length),u=null;if(1===t.id){var s=0;1===t.id&&(s=t.videoSencLength),u=i.default.writeUint32(12*t.samples.length+s+149),!t.isVideoEncryption&&t.isAudioEncryption&&(u=i.default.writeUint32(t.samples.length*n+92))}else{var f=4*t.samples.length+120;t.isAudioEncryption&&(f=12*t.samples.length+177),u=i.default.writeUint32(f)}return a.write(e.size(20+n*t.samples.length),e.type("trun"),e.extension(0,t.flags),o,u),t.samples.forEach((function(e){a.write(i.default.writeUint32(e.size)),1===r&&(a.write(i.default.writeUint32(e.key?33554432:65536)),a.write(i.default.writeUint32(e.offset)))})),a.buffer}},{key:"trun",value:function(t,r){var n=t.id,a=1===n?16:12,o=new i.default,u=i.default.writeUint32(t.samples.length),s=i.default.writeUint32(96+a*t.samples.length+r);return o.write(e.size(20+a*t.samples.length),e.type("trun"),e.extension(0,t.flags),u,s),t.samples.forEach((function(e,t){o.write(i.default.writeUint32(e.duration)),o.write(i.default.writeUint32(e.size)),1===n?(o.write(i.default.writeUint32(e.key?33554432:16842752)),o.write(i.default.writeUint32(e.offset))):o.write(i.default.writeUint32(16777216))})),o.buffer}},{key:"sdtp",value:function(t){var r=new i.default;return r.write(e.size(12+t.samples.length),e.type("sdtp"),e.extension(0,0)),t.samples.forEach((function(e){r.write(new Uint8Array(1===t.id?[e.key?32:16]:[16]))})),r.buffer}},{key:"mdat",value:function(t){var r=new i.default,n=8;t.samples.forEach((function(e){n+=e.size})),r.write(e.size(n),e.type("mdat"));var a=t.kidValue;if(t.useEME)return t.samples.forEach((function(e){r.write(e.buffer)})),r.buffer;if(t.videoSenc&&1===t.id){var u=t.videoSenc;return t.samples.forEach((function(e,t){var n=u[t],s=e.buffer,f=[],c=[],l=n.InitializationVector;if(n.subsamples&&n.subsamples.length)n.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,r=s.slice(0,t);f.push(r.slice(0,e.BytesOfClearData)),c.push(r.slice(e.BytesOfClearData)),s=s.slice(t)}));else{var p=e.size;f.push(s.slice(0,0)),c.push(s.slice(0,p)),s=s.slice(p)}var y=new i.default;y.write.apply(y,c);var h=o.default.decryptWordArray(y.buffer,a,l);f.forEach((function(e,t){var n=c[t].length,i=h.slice(0,n);r.write(e),r.write(i),h=h.slice(n)}))})),r.buffer}if(t.audioSenc&&2===t.id){var s=t.audioSenc;return t.samples.forEach((function(e,t){var n=s[t],i=o.default.decryptWordArray(e.buffer,a,n.InitializationVector);r.write(i)})),r.buffer}return t.samples.forEach((function(e){r.write(e.buffer)})),r.buffer}}]),e}();t.default=f,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(1),o=r(12),u=r(13),s=r(14),f=r(3),c=(n=f)&&n.__esModule?n:{default:n};var l={decryptWordArray:function(e,t,r){var n=i.Hex.parse(t),f=i.Hex.parse(c.default.formatIV(r)),p=i.WordArray.create(new Uint8Array(e)),y=o.AES.decrypt(a.CipherParams.create({ciphertext:p}),n,{iv:f,mode:u.CTR,padding:s.NoPadding});return l.wordArrayToUint8Array(y)},wordArrayToUint8Array:function(e){for(var t=e.sigBytes,r=e.words,n=new Uint8Array(t),i=0,a=0;i!==t;){var o=r[a++];if(n[i++]=(4278190080&o)>>>24,i===t)break;if(n[i++]=(16711680&o)>>>16,i===t)break;if(n[i++]=(65280&o)>>>8,i===t)break;n[i++]=255&o}return n}};t.default=l,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;var n=r(0);t.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,u=0;u<4&&a+.75*u<r;u+=1)i.push(n.charAt(o>>>6*(3-u)&63));var s=n.charAt(64);if(s)for(;i.length%4;)i.push(s);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(var a=0;a<r.length;a+=1)i[r.charCodeAt(a)]=a}var o=r.charAt(64);if(o){var u=e.indexOf(o);-1!==u&&(t=u)}return function(e,t,r){for(var i=[],a=0,o=0;o<t;o+=1)if(o%4){var u=r[e.charCodeAt(o-1)]<<o%4*2|r[e.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=u<<24-a%4*8,a+=1}return n.WordArray.create(i,a)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EvpKDF=t.EvpKDFAlgo=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),a=r(11);var o=t.EvpKDFAlgo=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.cfg=Object.assign(new i.Base,{keySize:4,hasher:a.MD5Algo,iterations:1},e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"compute",value:function(e,t){for(var r=void 0,n=this.cfg,a=n.hasher.create(),o=i.WordArray.create(),u=o.words,s=n.keySize,f=n.iterations;u.length<s;){r&&a.update(r),r=a.update(e).finalize(t),a.reset();for(var c=1;c<f;c+=1)r=a.finalize(r),a.reset();o.concat(r)}return o.sigBytes=4*s,o}}]),t}(i.Base);t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HmacMD5=t.MD5=t.MD5Algo=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}for(var u=[],s=0;s<64;s+=1)u[s]=4294967296*Math.abs(Math.sin(s+1))|0;var f=function(e,t,r,n,i,a,o){var u=e+(t&r|~t&n)+i+o;return(u<<a|u>>>32-a)+t},c=function(e,t,r,n,i,a,o){var u=e+(t&n|r&~n)+i+o;return(u<<a|u>>>32-a)+t},l=function(e,t,r,n,i,a,o){var u=e+(t^r^n)+i+o;return(u<<a|u>>>32-a)+t},p=function(e,t,r,n,i,a,o){var u=e+(r^(t|~n))+i+o;return(u<<a|u>>>32-a)+t},y=t.MD5Algo=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_doReset",value:function(){this._hash=new i.WordArray([1732584193,4023233417,2562383102,271733878])}},{key:"_doProcessBlock",value:function(e,t){for(var r=e,n=0;n<16;n+=1){var i=t+n,a=e[i];r[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,s=r[t+0],y=r[t+1],h=r[t+2],d=r[t+3],v=r[t+4],w=r[t+5],b=r[t+6],g=r[t+7],_=r[t+8],m=r[t+9],k=r[t+10],O=r[t+11],A=r[t+12],z=r[t+13],E=r[t+14],C=r[t+15],B=o[0],U=o[1],S=o[2],j=o[3];B=f(B,U,S,j,s,7,u[0]),j=f(j,B,U,S,y,12,u[1]),S=f(S,j,B,U,h,17,u[2]),U=f(U,S,j,B,d,22,u[3]),B=f(B,U,S,j,v,7,u[4]),j=f(j,B,U,S,w,12,u[5]),S=f(S,j,B,U,b,17,u[6]),U=f(U,S,j,B,g,22,u[7]),B=f(B,U,S,j,_,7,u[8]),j=f(j,B,U,S,m,12,u[9]),S=f(S,j,B,U,k,17,u[10]),U=f(U,S,j,B,O,22,u[11]),B=f(B,U,S,j,A,7,u[12]),j=f(j,B,U,S,z,12,u[13]),S=f(S,j,B,U,E,17,u[14]),U=f(U,S,j,B,C,22,u[15]),B=c(B,U,S,j,y,5,u[16]),j=c(j,B,U,S,b,9,u[17]),S=c(S,j,B,U,O,14,u[18]),U=c(U,S,j,B,s,20,u[19]),B=c(B,U,S,j,w,5,u[20]),j=c(j,B,U,S,k,9,u[21]),S=c(S,j,B,U,C,14,u[22]),U=c(U,S,j,B,v,20,u[23]),B=c(B,U,S,j,m,5,u[24]),j=c(j,B,U,S,E,9,u[25]),S=c(S,j,B,U,d,14,u[26]),U=c(U,S,j,B,_,20,u[27]),B=c(B,U,S,j,z,5,u[28]),j=c(j,B,U,S,h,9,u[29]),S=c(S,j,B,U,g,14,u[30]),U=c(U,S,j,B,A,20,u[31]),B=l(B,U,S,j,w,4,u[32]),j=l(j,B,U,S,_,11,u[33]),S=l(S,j,B,U,O,16,u[34]),U=l(U,S,j,B,E,23,u[35]),B=l(B,U,S,j,y,4,u[36]),j=l(j,B,U,S,v,11,u[37]),S=l(S,j,B,U,g,16,u[38]),U=l(U,S,j,B,k,23,u[39]),B=l(B,U,S,j,z,4,u[40]),j=l(j,B,U,S,s,11,u[41]),S=l(S,j,B,U,d,16,u[42]),U=l(U,S,j,B,b,23,u[43]),B=l(B,U,S,j,m,4,u[44]),j=l(j,B,U,S,A,11,u[45]),S=l(S,j,B,U,C,16,u[46]),U=l(U,S,j,B,h,23,u[47]),B=p(B,U,S,j,s,6,u[48]),j=p(j,B,U,S,g,10,u[49]),S=p(S,j,B,U,E,15,u[50]),U=p(U,S,j,B,w,21,u[51]),B=p(B,U,S,j,A,6,u[52]),j=p(j,B,U,S,d,10,u[53]),S=p(S,j,B,U,k,15,u[54]),U=p(U,S,j,B,y,21,u[55]),B=p(B,U,S,j,_,6,u[56]),j=p(j,B,U,S,C,10,u[57]),S=p(S,j,B,U,b,15,u[58]),U=p(U,S,j,B,z,21,u[59]),B=p(B,U,S,j,v,6,u[60]),j=p(j,B,U,S,O,10,u[61]),S=p(S,j,B,U,h,15,u[62]),U=p(U,S,j,B,m,21,u[63]),o[0]=o[0]+B|0,o[1]=o[1]+U|0,o[2]=o[2]+S|0,o[3]=o[3]+j|0}},{key:"_doFinalize",value:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var i=Math.floor(r/4294967296),a=r;t[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,u=o.words,s=0;s<4;s+=1){var f=u[s];u[s]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return o}},{key:"clone",value:function(){var e=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e._hash=this._hash.clone(),e}}]),t}(i.Hasher);t.MD5=i.Hasher._createHelper(y),t.HmacMD5=i.Hasher._createHmacHelper(y)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AES=t.AESAlgo=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}for(var u=[],s=[],f=[],c=[],l=[],p=[],y=[],h=[],d=[],v=[],w=[],b=0;b<256;b+=1)w[b]=b<128?b<<1:b<<1^283;for(var g=0,_=0,m=0;m<256;m+=1){var k=_^_<<1^_<<2^_<<3^_<<4;k=k>>>8^255&k^99,u[g]=k,s[k]=g;var O=w[g],A=w[O],z=w[A],E=257*w[k]^16843008*k;f[g]=E<<24|E>>>8,c[g]=E<<16|E>>>16,l[g]=E<<8|E>>>24,p[g]=E,E=16843009*z^65537*A^257*O^16843008*g,y[k]=E<<24|E>>>8,h[k]=E<<16|E>>>16,d[k]=E<<8|E>>>24,v[k]=E,g?(g=O^w[w[w[z^O]]],_^=w[w[_]]):g=_=1}var C=[0,1,2,4,8,16,32,64,128,27,54],B=t.AESAlgo=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_doReset",value:function(){var e=void 0;if(!this._nRounds||this._keyPriorReset!==this._key){this._keyPriorReset=this._key;var t=this._keyPriorReset,r=t.words,n=t.sigBytes/4;this._nRounds=n+6;var i=4*(this._nRounds+1);this._keySchedule=[];for(var a=this._keySchedule,o=0;o<i;o+=1)o<n?a[o]=r[o]:(e=a[o-1],o%n?n>6&&o%n==4&&(e=u[e>>>24]<<24|u[e>>>16&255]<<16|u[e>>>8&255]<<8|u[255&e]):(e=u[(e=e<<8|e>>>24)>>>24]<<24|u[e>>>16&255]<<16|u[e>>>8&255]<<8|u[255&e],e^=C[o/n|0]<<24),a[o]=a[o-n]^e);this._invKeySchedule=[];for(var s=this._invKeySchedule,f=0;f<i;f+=1){var c=i-f;e=f%4?a[c]:a[c-4],s[f]=f<4||c<=4?e:y[u[e>>>24]]^h[u[e>>>16&255]]^d[u[e>>>8&255]]^v[u[255&e]]}}}},{key:"encryptBlock",value:function(e,t){this._doCryptBlock(e,t,this._keySchedule,f,c,l,p,u)}},{key:"decryptBlock",value:function(e,t){var r=e,n=r[t+1];r[t+1]=r[t+3],r[t+3]=n,this._doCryptBlock(r,t,this._invKeySchedule,y,h,d,v,s),n=r[t+1],r[t+1]=r[t+3],r[t+3]=n}},{key:"_doCryptBlock",value:function(e,t,r,n,i,a,o,u){for(var s=e,f=this._nRounds,c=s[t]^r[0],l=s[t+1]^r[1],p=s[t+2]^r[2],y=s[t+3]^r[3],h=4,d=1;d<f;d+=1){var v=n[c>>>24]^i[l>>>16&255]^a[p>>>8&255]^o[255&y]^r[h];h+=1;var w=n[l>>>24]^i[p>>>16&255]^a[y>>>8&255]^o[255&c]^r[h];h+=1;var b=n[p>>>24]^i[y>>>16&255]^a[c>>>8&255]^o[255&l]^r[h];h+=1;var g=n[y>>>24]^i[c>>>16&255]^a[l>>>8&255]^o[255&p]^r[h];h+=1,c=v,l=w,p=b,y=g}var _=(u[c>>>24]<<24|u[l>>>16&255]<<16|u[p>>>8&255]<<8|u[255&y])^r[h];h+=1;var m=(u[l>>>24]<<24|u[p>>>16&255]<<16|u[y>>>8&255]<<8|u[255&c])^r[h];h+=1;var k=(u[p>>>24]<<24|u[y>>>16&255]<<16|u[c>>>8&255]<<8|u[255&l])^r[h];h+=1;var O=(u[y>>>24]<<24|u[c>>>16&255]<<16|u[l>>>8&255]<<8|u[255&p])^r[h];h+=1,s[t]=_,s[t+1]=m,s[t+2]=k,s[t+3]=O}}]),t}(i.BlockCipher);B.keySize=8;t.AES=i.BlockCipher._createHelper(B)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTR=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=t.CTR=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(i.BlockCipherMode);s.Encryptor=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"processBlock",value:function(e,t){var r=e,n=this._cipher,i=n.blockSize,a=this._iv,o=this._counter;a&&(this._counter=a.slice(0),o=this._counter,this._iv=void 0);var u=o.slice(0);n.encryptBlock(u,0),o[i-1]=o[i-1]+1|0;for(var s=0;s<i;s+=1)r[t+s]^=u[s]}}]),t}(s),s.Decryptor=s.Encryptor},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NoPadding={pad:function(){},unpad:function(){}}}]);',null)}},function(e,t,r){"use strict";var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var r;try{(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),r=r.getBlob()}catch(t){r=new Blob([e])}return new Worker(n.createObjectURL(r))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queue=[]}return n(e,[{key:"push",value:function(e){this.queue.push(e)}},{key:"startup",value:function(){return Promise.all(this.queue)}},{key:"destroy",value:function(){this.queue=[]}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AW_ERRORS=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(120)),a=s(r(2)),o=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}t.AW_ERRORS={FETCH_ERROR:"FETCH_ERROR"};var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cdnHost=t,this.cdnBucket=r}return n(e,[{key:"init",value:function(){var e=new o.default;this.module={onRuntimeInitialized:function(){e.resolve()},onAbort:function(t){e.reject(t)}},this.cdnHost&&(this.module.cdnHost=this.cdnHost);var t=this.cdnBucket?"-"+this.cdnBucket:"";return this.module.cdnBucket="media-fe"+t,(0,i.default)(this.module),e}},{key:"openBox",value:function(e){try{var t=window.atob(e),r=a.default.str2hex(t),n=this.module._malloc(Number(r.length));this.module.HEAP8.set(r,n);var i=this.module._openBox(Number(n),r.length),o=this.module.UTF8ToString(i);return this.module._free(n),o}catch(e){}}},{key:"destroy",value:function(){this.module=null}}]),e}();t.default=u},function(e,t,r){"use strict";(function(e){var r,n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t=void 0!==(e=e||{})?e:{},r={},a=void 0;for(a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);var o=[];if(t.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var s="";if(document.currentScript&&(s=document.currentScript.src),n&&(s=n),s=0!==s.indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):"","object"!==("undefined"==typeof window?"undefined":i(window))&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var u=t.print||console.log.bind(console),l=t.printErr||console.warn.bind(console);for(a in r)r.hasOwnProperty(a)&&(t[a]=r[a]);function c(e){c.shown||(c.shown={}),c.shown[e]||(c.shown[e]=1,l(e))}r=null,t.arguments&&(o=t.arguments),Object.getOwnPropertyDescriptor(t,"arguments")||Object.defineProperty(t,"arguments",{configurable:!0,get:function(){F("Module.arguments has been replaced with plain arguments_")}}),t.thisProgram&&t.thisProgram,Object.getOwnPropertyDescriptor(t,"thisProgram")||Object.defineProperty(t,"thisProgram",{configurable:!0,get:function(){F("Module.thisProgram has been replaced with plain thisProgram")}}),t.quit&&t.quit,Object.getOwnPropertyDescriptor(t,"quit")||Object.defineProperty(t,"quit",{configurable:!0,get:function(){F("Module.quit has been replaced with plain quit_")}}),v(void 0===t.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),v(void 0===t.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),v(void 0===t.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),v(void 0===t.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),v(void 0===t.read,"Module.read option was removed (modify read_ in JS)"),v(void 0===t.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),v(void 0===t.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),v(void 0===t.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),Object.getOwnPropertyDescriptor(t,"read")||Object.defineProperty(t,"read",{configurable:!0,get:function(){F("Module.read has been replaced with plain read_")}}),Object.getOwnPropertyDescriptor(t,"readAsync")||Object.defineProperty(t,"readAsync",{configurable:!0,get:function(){F("Module.readAsync has been replaced with plain readAsync")}}),Object.getOwnPropertyDescriptor(t,"readBinary")||Object.defineProperty(t,"readBinary",{configurable:!0,get:function(){F("Module.readBinary has been replaced with plain readBinary")}}),ie=function(){F("cannot use the stack before compiled code is ready to run, and has provided stack access")};var d=void 0;t.wasmBinary&&(d=t.wasmBinary),Object.getOwnPropertyDescriptor(t,"wasmBinary")||Object.defineProperty(t,"wasmBinary",{configurable:!0,get:function(){F("Module.wasmBinary has been replaced with plain wasmBinary")}}),t.noExitRuntime&&t.noExitRuntime,Object.getOwnPropertyDescriptor(t,"noExitRuntime")||Object.defineProperty(t,"noExitRuntime",{configurable:!0,get:function(){F("Module.noExitRuntime has been replaced with plain noExitRuntime")}}),"object"!==("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&F("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var f,h=new WebAssembly.Table({initial:1,maximum:1,element:"anyfunc"}),p=!1;function v(e,t){e||F("Assertion failed: "+t)}var g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function m(e,t,r,n){if(!(n>0))return 0;for(var i=r,a=r+n-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(r>=a)break;t[r++]=s}else if(s<=2047){if(r+1>=a)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=a)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=a)break;s>=2097152&&c("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-i}function y(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var _,w=void 0,b=void 0,E=void 0,T=void 0;v(!0,"stack must start aligned"),v(!0,"heap must start aligned"),t.TOTAL_STACK&&v(5242880===t.TOTAL_STACK,"the stack size can no longer be determined at runtime");var C,S=t.TOTAL_MEMORY||16777216;function k(){v(!0),T[429]=34821223,T[430]=2310721022,E[0]=1668509029}function O(){var e=T[429],t=T[430];34821223==e&&2310721022==t||F("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==E[0]&&F("Runtime error: The application has corrupted its heap memory area (address zero)!")}function R(e){for(;e.length>0;){var r=e.shift();if("function"!=typeof r){var n=r.func;"number"==typeof n?void 0===r.arg?t.dynCall_v(n):t.dynCall_vi(n,r.arg):n(void 0===r.arg?null:r.arg)}else r()}}Object.getOwnPropertyDescriptor(t,"TOTAL_MEMORY")||Object.defineProperty(t,"TOTAL_MEMORY",{configurable:!0,get:function(){F("Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY")}}),v(S>=5242880,"TOTAL_MEMORY should be larger than TOTAL_STACK, was "+S+"! (TOTAL_STACK=5242880)"),v("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(f=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:S/65536,maximum:S/65536}))&&(w=f.buffer),v((S=w.byteLength)%65536==0),w=C=w,t.HEAP8=_=new Int8Array(C),t.HEAP16=new Int16Array(C),t.HEAP32=E=new Int32Array(C),t.HEAPU8=b=new Uint8Array(C),t.HEAPU16=new Uint16Array(C),t.HEAPU32=T=new Uint32Array(C),t.HEAPF32=new Float32Array(C),t.HEAPF64=new Float64Array(C),E[388]=5244592,function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var A=[],x=[],L=[],D=[],P=!1;v(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),v(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),v(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),v(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var M=0,I=null,U=null,B={};function F(e){throw t.onAbort&&t.onAbort(e),u(e+=""),l(e),p=!0,e="abort("+e+") at "+(r=function(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}(),t.extraStackTrace&&(r+="\n"+t.extraStackTrace()),r.replace(/\b_Z[\w\d_]+/g,(function(e){var t,r=(t=e,c("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),t);return e===r?e:r+" ["+e+"]"}))),new WebAssembly.RuntimeError(e);var r}t.preloadedImages={},t.preloadedAudios={};var N={error:function(){F("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){N.error()},createDataFile:function(){N.error()},createPreloadedFile:function(){N.error()},createLazyFile:function(){N.error()},open:function(){N.error()},mkdev:function(){N.error()},registerDevice:function(){N.error()},analyzePath:function(){N.error()},loadFilesFromDB:function(){N.error()},ErrnoError:function(){N.error()}};t.FS_createDataFile=N.createDataFile,t.FS_createPreloadedFile=N.createPreloadedFile;var j="sf1-cdn-tos.huoshanstatic.com";t.cdnHost&&(j=t.cdnHost);var H="https://"+j+"/obj/"+t.cdnBucket+"/xgplayer/dash/aw.eac41214.wasm";function z(){try{if(d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}catch(e){F(e)}}document&&document.location&&document.location.protocol&&document.location.protocol.indexOf("http:")>-1&&(H="http://"+j+"/obj/"+t.cdnBucket+"/xgplayer/dash/aw.eac41214.wasm"),x.push({func:function(){re()}});var V={__lock:function(){},__unlock:function(){},emscripten_memcpy_big:function(e,t,r){b.set(b.subarray(t,t+r),e)},emscripten_resize_heap:function(e){!function(e){F("Cannot enlarge memory arrays to size "+e+" bytes (OOM). Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+_.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}(e)},memory:f,table:h},K=function(){var e,r={env:V,wasi_unstable:V};function n(e,r){var n=e.exports;t.asm=n,function(e){if(M--,t.monitorRunDependencies&&t.monitorRunDependencies(M),v(B[e]),delete B[e],0==M&&(null!==I&&(clearInterval(I),I=null),U)){var r=U;U=null,r()}}("wasm-instantiate")}e="wasm-instantiate",M++,t.monitorRunDependencies&&t.monitorRunDependencies(M),v(!B[e]),B[e]=1,null===I&&"undefined"!=typeof setInterval&&(I=setInterval((function(){if(p)return clearInterval(I),void(I=null);var e=!1;for(var t in B)e||(e=!0,l("still waiting on run dependencies:")),l("dependency: "+t);e&&l("(end of list)")}),1e4));var i=t;function a(e){v(t===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,n(e.instance)}function o(e){return(d||"function"!=typeof fetch?new Promise((function(e,t){e(z())})):fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+H+"'";return e.arrayBuffer()})).catch((function(){return z()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){l("failed to asynchronously prepare wasm: "+e),F(e)}))}if(t.instantiateWasm)try{return t.instantiateWasm(r,n)}catch(e){return l("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(d||"function"!=typeof WebAssembly.instantiateStreaming||(e=H,String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,"))||"function"!=typeof fetch)return o(a);var e;fetch(H,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(a,(function(e){l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),o(a)}))})).catch((function(){F("FETCH_ERROR")}))}(),{}}(),G=K.__wasm_call_ctors;K.__wasm_call_ctors=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),G.apply(null,arguments)};var X=K.malloc;K.malloc=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),X.apply(null,arguments)};var Z=K.openBox;K.openBox=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Z.apply(null,arguments)};var W=K.free;K.free=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),W.apply(null,arguments)};var q=K.__errno_location;K.__errno_location=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),q.apply(null,arguments)};var Y=K.fflush;K.fflush=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Y.apply(null,arguments)};var Q=K.setThrew;K.setThrew=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Q.apply(null,arguments)};var J=K.stackSave;K.stackSave=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),J.apply(null,arguments)};var $=K.stackAlloc;K.stackAlloc=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),$.apply(null,arguments)};var ee=K.stackRestore;K.stackRestore=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ee.apply(null,arguments)};var te=K.__growWasmMemory;K.__growWasmMemory=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),te.apply(null,arguments)},t.asm=K;var re=t.___wasm_call_ctors=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.__wasm_call_ctors.apply(null,arguments)},ne=t._malloc=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.malloc.apply(null,arguments)},ie=(t._openBox=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.openBox.apply(null,arguments)},t._free=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.free.apply(null,arguments)},t.___errno_location=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.__errno_location.apply(null,arguments)},t._fflush=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.fflush.apply(null,arguments)},t._setThrew=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.setThrew.apply(null,arguments)},t.stackSave=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.stackSave.apply(null,arguments)});t.stackAlloc=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.stackAlloc.apply(null,arguments)},t.stackRestore=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.stackRestore.apply(null,arguments)},t.__growWasmMemory=function(){return v(P,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),v(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.__growWasmMemory.apply(null,arguments)},t.asm=K,t.intArrayFromString=function(e,t,r){var n=r>0?r:y(e)+1,i=new Array(n),a=m(e,i,0,i.length);return t&&(i.length=a),i},Object.getOwnPropertyDescriptor(t,"intArrayToString")||(t.intArrayToString=function(){F("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ccall")||(t.ccall=function(){F("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"cwrap")||(t.cwrap=function(){F("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setValue")||(t.setValue=function(){F("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getValue")||(t.getValue=function(){F("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocate")||(t.allocate=function(){F("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getMemory")||(t.getMemory=function(){F("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"AsciiToString")||(t.AsciiToString=function(){F("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToAscii")||(t.stringToAscii=function(){F("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ArrayToString")||(t.UTF8ArrayToString=function(){F("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.UTF8ToString=function(e,t){return e?function(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.subarray&&g)return g.decode(e.subarray(t,i));for(var a="";t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|u:(240!=(248&o)&&c("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),o=(7&o)<<18|s<<12|u<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}(b,e,t):""},Object.getOwnPropertyDescriptor(t,"stringToUTF8Array")||(t.stringToUTF8Array=function(){F("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8")||(t.stringToUTF8=function(){F("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF8")||(t.lengthBytesUTF8=function(){F("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF16ToString")||(t.UTF16ToString=function(){F("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF16")||(t.stringToUTF16=function(){F("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF16")||(t.lengthBytesUTF16=function(){F("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF32ToString")||(t.UTF32ToString=function(){F("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF32")||(t.stringToUTF32=function(){F("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF32")||(t.lengthBytesUTF32=function(){F("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.allocateUTF8=function(e){var t=y(e)+1,r=ne(t);return r&&m(e,_,r,t),r},Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){F("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreRun")||(t.addOnPreRun=function(){F("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnInit")||(t.addOnInit=function(){F("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreMain")||(t.addOnPreMain=function(){F("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnExit")||(t.addOnExit=function(){F("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPostRun")||(t.addOnPostRun=function(){F("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeStringToMemory")||(t.writeStringToMemory=function(){F("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeArrayToMemory")||(t.writeArrayToMemory=function(){F("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeAsciiToMemory")||(t.writeAsciiToMemory=function(){F("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addRunDependency")||(t.addRunDependency=function(){F("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"removeRunDependency")||(t.removeRunDependency=function(){F("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"ENV")||(t.ENV=function(){F("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS")||(t.FS=function(){F("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createFolder")||(t.FS_createFolder=function(){F("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPath")||(t.FS_createPath=function(){F("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDataFile")||(t.FS_createDataFile=function(){F("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPreloadedFile")||(t.FS_createPreloadedFile=function(){F("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLazyFile")||(t.FS_createLazyFile=function(){F("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLink")||(t.FS_createLink=function(){F("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDevice")||(t.FS_createDevice=function(){F("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_unlink")||(t.FS_unlink=function(){F("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"GL")||(t.GL=function(){F("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynamicAlloc")||(t.dynamicAlloc=function(){F("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"loadDynamicLibrary")||(t.loadDynamicLibrary=function(){F("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"loadWebAssemblyModule")||(t.loadWebAssemblyModule=function(){F("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getLEB")||(t.getLEB=function(){F("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFunctionTables")||(t.getFunctionTables=function(){F("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"alignFunctionTables")||(t.alignFunctionTables=function(){F("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFunctions")||(t.registerFunctions=function(){F("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addFunction")||(t.addFunction=function(){F("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"removeFunction")||(t.removeFunction=function(){F("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){F("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"prettyPrint")||(t.prettyPrint=function(){F("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"makeBigInt")||(t.makeBigInt=function(){F("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){F("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCompilerSetting")||(t.getCompilerSetting=function(){F("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackSave")||(t.stackSave=function(){F("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackRestore")||(t.stackRestore=function(){F("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackAlloc")||(t.stackAlloc=function(){F("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"establishStackSpace")||(t.establishStackSpace=function(){F("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"print")||(t.print=function(){F("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"printErr")||(t.printErr=function(){F("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTempRet0")||(t.getTempRet0=function(){F("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setTempRet0")||(t.setTempRet0=function(){F("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callMain")||(t.callMain=function(){F("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abort")||(t.abort=function(){F("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.Pointer_stringify=function(e,t){F("this function has been removed - you should use UTF8ToString(ptr, maxBytesToRead) instead!")},Object.getOwnPropertyDescriptor(t,"warnOnce")||(t.warnOnce=function(){F("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.writeStackCookie=k,t.checkStackCookie=O,t.abortStackOverflow=function(e){F("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(1712-ie()+e)+" bytes available!")},Object.getOwnPropertyDescriptor(t,"ALLOC_NORMAL")||Object.defineProperty(t,"ALLOC_NORMAL",{configurable:!0,get:function(){F("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_STACK")||Object.defineProperty(t,"ALLOC_STACK",{configurable:!0,get:function(){F("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_DYNAMIC")||Object.defineProperty(t,"ALLOC_DYNAMIC",{configurable:!0,get:function(){F("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_NONE")||Object.defineProperty(t,"ALLOC_NONE",{configurable:!0,get:function(){F("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"calledRun")||Object.defineProperty(t,"calledRun",{configurable:!0,get:function(){F("'calledRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}});var ae=void 0;function oe(e){function r(){ae||(ae=!0,p||(O(),v(!P),P=!0,R(x),O(),R(L),t.onRuntimeInitialized&&t.onRuntimeInitialized(),v(!t._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(O(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),D.unshift(e);var e;R(D)}()))}e=e||o,M>0||(k(),function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),A.unshift(e);var e;R(A)}(),M>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),r()}),1)):r(),O()))}if(t.then=function(e){if(ae)e(t);else{var r=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){r&&r(),e(t)}}return t},U=function e(){ae||oe(),ae||(U=e)},t.run=oe,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return oe(),e});"object"===i(t)&&"object"===i(e)?e.exports=a:void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}).call(this,r(9)(e))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isMSBrowser=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/");return t>0||r>0},t.isEMESupported=function(){var e,r,n,i,a,o,s,u;return!(!navigator.requestMediaKeySystemAccess||(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=t.isMSBrowser(),e=navigator.mimeTypes,r=navigator.userAgent,n=!1,e&&r.indexOf("Chrome")>1&&(n=Object.keys(e).some((function(t){return!!(e[t].type&&e[t].type.indexOf("360")>-1)||!!(e[t].type&&e[t].type.indexOf("application/vnd.chromium.remoting-viewer")>-1)||!!(e[t].description&&e[t].description.indexOf("360")>-1)}))),o=n,s=navigator.userAgent.indexOf("Firefox")>0,u=navigator.userAgent.indexOf("Edge")>0,i||a||o||s||u))},t.isWebAssemblySupported=function(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":n(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){console.log(e)}return!1},t.isMediaSourceSupported=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource;return e&&"function"==typeof e.isTypeSupported},t.isSupported=function(){return t.isMediaSourceSupported()&&t.isWebAssemblySupported()&&!t.isMSBrowser()},t.isSupportedWithXgmse=function(){return t.isWebAssemblySupported()&&!t.isMSBrowser()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onTick_=t,this.cancelPending_=null}return n(e,[{key:"tickAfter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.stop();var n=!0,i=null;this.cancelPending_=function(){window.clearTimeout(i),n=!1};var a=function(){n&&(t.onTick_(),r&&r())};return i=window.setTimeout(a,1e3*e),this}},{key:"tickEvery",value:function(e){var t=this;this.tickAfter(e,(function(){t.tickEvery(e)}))}},{key:"stop",value:function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(15),a=r(124),o=h(r(7)),s=h(r(14)),u=h(r(16)),l=h(r(2)),c=r(8),d=r(21),f=r(6);function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),n(t,[{key:"init",value:function(){return Promise.resolve()}},{key:"preloadPredict",value:function(e){return e}}]),t}(a.PredictBase),y=function(e){function t(e,r,n){p(this,t);var i=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.player=r,i.bitRateAdapter=n,i}return g(t,e),n(t,[{key:"before",value:function(){var e=this;this.handlers={start:function(t){return e.start(t)},onRequest:function(t,r){var n=t.url,i=t.range,a=t.extData;return e.getData(n,i,a,r)}},this.loggerConfig={logger:function(){},openLog:!1},this.predictInst=new m(this.loggerConfig)}},{key:"start",value:function(e){var t=this,r=this,n={mediaInfos:{dynamic_video_list:[],dynamic_audio_list:[]},onObtain:function(){var e=new o.default;return e.resolve(n.mediaInfos),e},onTransform:function(n){var i=new o.default,a=e.payload||[];if(0===a.length)i.resolve([]);else{var h=null;if(t.bitRateAdapter)t.bitRateAdapter.speed=s.default.speed,(h=t.bitRateAdapter.select(a))&&(h.networkSpeed=t.bitRateAdapter.speed);else{for(var p=0,v=0;v<a.length;v++)if(a[v].definition===e.defaultDefinition){p=v;break}h=a[p]}h||(h=a[0]),(0,c.log)("preloadData",h);var g="Array"===l.default.typeOf(h.url)?h.url[0].src:h.url,m=h.definition,y=e.vid,_=e.preloadTime||t.options.preloadTime;if(_>0){var w=l.default.generateUniqueKey({vid:y,preloadTime:_,definition:m}),b=new u.default(g,{xhrSetup:e.xhrSetup,chunkSize:t.options.preloadSize,vid:y,cacheKey:w,useUrlRange:e.useUrlRange},null,t);(0,f.once)(b,"metaReady",(function(e){for(var n=b.packMeta(e),a=[],o=0,s=function(i){var s=b.getRangeFromTime(b.timeRage[i][0]+.01),u=i;if(r.getFragment(g,s.range,s.fragIndex,b,y,{cacheKey:w}).then((function(r){var i=r.buffer,s=r.range,l=r.context;s&&s.length>1&&!s[1]&&(s[1]=s[0]+i.byteLength),o+=l?l.costTime:0,a.push({timeRage:b.timeRage[u],buffer:i,index:u,range:s}),(0,c.log)("setItem Preloader",w),t.setItem(w,{meta:e,initSeg:n,mediaSegList:a,costTime:o,type:1}).catch((function(e){console.error(e),t.player.emit("log",{type:"oneevent",end_type:"setPreloadCacheFail",data:JSON.stringify({error:e})})})),_<=b.timeRage[u][1]&&t.player.emit("PRELOAD_ITEM_END",{vid:y,costTime:o})})),_<=b.timeRage[i][1])return"break"},u=0;u<b.timeRage.length&&"break"!==s(u);u++);i.resolve([])})),(0,f.on)(b,d.TASK_PROGRESS,(function(e){t.emit(d.TASK_PROGRESS,e)}))}else{var E=[0,(e.preloadSize||t.options.preloadSize||Math.pow(25,4)-1)-1],T=t.getPreloadUrl({url:g,range:E,definition:m,vid:y});i.resolve(T)}}return i}};return Promise.resolve(n)}},{key:"getFragment",value:function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=new o.default;return this.getData(e,t,a,!1).then((function(e){n.createFragment(new Uint8Array(e.res),t[0]-n.mdatStart,r,{range:t,context:e.context}).then((function(e){s.resolve(e)}))})),s}},{key:"getPreloadUrl",value:function(e){var t=e.url,r=e.range,n=e.definition,i=e.vid;return[{url:t,range:r,extData:{cacheKey:l.default.generateUniqueKey({vid:i,start:r[0],end:r[1],definition:n}),vid:i,format:"mp4"}}]}},{key:"getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this;return new Promise((function(a,o){var u=new s.default(e,t,i.player.config.xhrSetup,(function(e,t){i.removeTasker(u),a({res:e,context:t})}),r,n,i);u.once(d.TASK_ERROR_TYPES.CANCEL,(function(e){i.removeTasker(u),o(e)})),i.addTasker(u)}))}},{key:"getRangeList",value:function(e){var t=this.allCachedKeys,r={timeRange:[],contentRange:[]};for(var n in t)if(t.hasOwnProperty(n)&&n.indexOf(e)>-1){var i=n.split("#");0===i[2].indexOf("pretime")?r.timeRange.push([0,parseFloat(i[2].slice(7))]):r.contentRange.push([parseInt(i[2]),parseInt(i[3])])}return r}},{key:"hasItemSameVid",value:function(e){var t=this.allCachedKeys;for(var r in t)if(t.hasOwnProperty(r)){if(r===e)return r;var n=r.split("#"),i=e.split("#");if(n.length>=4&&i.length>=4&&n[0]===i[0]){if(0===n[2].indexOf("pretime")&&0===i[2].indexOf("pretime"))return r;var a=[parseInt(n[2]),parseInt(n[3])],o=[parseInt(i[2]),parseInt(i[3])];if(o[0]>=a[0]&&o[1]>o[0]&&o[1]<=a[1])return r}}return!1}},{key:"removeOthers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=this.allCachedKeys;for(var n in r)r.hasOwnProperty(n)&&n.split("#").length>=1&&function(){var r=n.split("#")[0];t.every((function(e){return e.split("#").length>=1&&e.split("#")[0]!==r}))&&((0,c.log)("移除缓存："+n),e.cacheInst.removeItem(n))}()}},{key:"getItemSameVid",value:function(e,t){var r=this.hasItemSameVid(e);return(0,c.log)("getItemSameVid: key:"+e+" checkResult:"+r),r?this.cacheInst.getItem(r,t).then((function(e){return{value:e,key:r}})):Promise.resolve({})}},{key:"setItem",value:function(e,t){return this.cacheInst.setItem(e,t)}},{key:"cancelLoading",value:function(e){(0,c.log)("cancelLoading",e);for(var t=0;t<this.loadingTasks.length;t++)try{var r=this.loadingTasks[t];"function"==typeof r.cancel&&r.cancel()}catch(e){}this.loadingTasks=[];var n=this._preloadManager;if(n._currentPreloadInst){var i=n._currentPreloadInst._toLoadList,a=[];i.map((function(t){return t.playerId!==e&&a.push(t),t})),n._currentPreloadInst._toLoadList=a}var o=[];n._preloadDataList.map((function(t){return t.playerId!==e&&o.push(t),t})),n._preloadDataList=o}},{key:"addPreloader",value:function(e){if(e.data){for(var t=e.data,r=t.vid,n=t.payload,i=t.preloadTime,a=[],o=!1,s=null,u=0;u<n.length;u++){var d=l.default.generateUniqueKey({vid:r,preloadTime:i,definition:n[u].definition});if((0,c.log)("addPreloader",d,d&&!this.hasItemSameVid(d)),o=d&&this.hasItemSameVid(d)){s=d;break}a.push(n[u]),console.log("addPreloader hasExit:"+o+" hasExitKey:"+s)}a.length>0&&(e.data.payload=a,this.addDashPreloader(e))}}},{key:"addPreloaderList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=[],n=0;n<e.length;n++){for(var i=[],a=e[n].data,o=a.vid,s=a.payload,u=a.preloadTime,d=!1,f=null,h=0;h<s.length;h++){var p=l.default.generateUniqueKey({vid:o,preloadTime:u,definition:s[h].definition});if(s[h].cacheKey=p,d=p&&this.hasItemSameVid(p)){f=p;break}i.push(s[h])}i.length>0&&!d&&(e[n].playerId=t,e[n].data.payload=i,r.push(e[n])),(0,c.log)("addPreloaderList, key is "+f)}this.addDashPreloaderList(r)}},{key:"allCachedKeys",get:function(){return this.cacheInst._allCachedKeys}},{key:"cacheInst",get:function(){return this._preloadManager._cacheInst}}]),t}(i.PreloaderBase);t.default=y,e.exports=t.default},function(e,t,r){"use strict";(function(e){var r,n,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="srSz")}({srSz:function(e,t,r){r.r(t),r.d(t,"PredictBase",(function(){return i}));var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidth2item={},this._mediaInfos=null,this.__p__=!0}return n(e,[{key:"init",value:function(){throw new Error("init func not implement, return promise")}},{key:"preloadPredict",value:function(e){throw new Error("preloadPredict error",e)}},{key:"updateMediaInfos",value:function(e){if(this._mediaInfos=e,this.dynamic_video=e&&e.dynamic_video_list,this.dynamic_video&&0<this.dynamic_video.length)for(var t=0;t<this.dynamic_video.length;t++){var r=this.dynamic_video[t];this.bandwidth2item[r.bitrate||r.bandwidth]=r}}},{key:"getIdx",value:function(e,t){var r=0;return e.forEach((function(e,n){e.definition===t&&(r=n)})),r}},{key:"cachedData",get:function(){return null}}]),e}()}})},"object"==o(t)&&"object"==o(e)?e.exports=a():(n=[],void 0===(i="function"==typeof(r=a)?r.apply(t,n):r)||(e.exports=i))}).call(this,r(9)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(126),a=r(8),o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.mediaElem=t.video,this.config=r,this.timer=new i.IntervalTimer,this.prevReadyState=this.mediaElem.readyState,this.didFireLargeGap=!1,this.seekingEventReceived=!1,this.segmentAppended=!1,this.onWaitFunc=this._onWaiting.bind(this),this.onPlayFunc=this._onPlay.bind(this),this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),!1!==this.config.useGapJump&&this._start(),this.hasPlayed=!1}return n(e,[{key:"_onWaiting",value:function(){this.onGapJump()}},{key:"_onPlay",value:function(){this.hasPlayed=!0}},{key:"_start",value:function(){var e=this;this.mediaElem.addEventListener("waiting",this.onWaitFunc),this.mediaElem.addEventListener("play",this.onPlayFunc),this.timer.repeat((function(){e.onGapJump()}),250)}},{key:"onSegmentAppend",value:function(e){if(this.segmentAppended=!0,this.config.enableCheckBufferDiff&&this.mediaElem){var t=e.reduce((function(e,t){return e+t.downloaded?t[1]-t[0]:0}),0);this._getBuffered(this.mediaElem.buffered).reduce((function(e,t){return e+(t.end-t.start)}),0)/t<.8&&((0,a.log)("onSegmentAppend detectGap"),this.player&&this.player.emit("detectGap"))}this.onGapJump()}},{key:"onSeeking",value:function(){this.seekingEventReceived=!0,this.segmentAppended=!1,this.didFireLargeGap=!1}},{key:"onGapJump",value:function(){if(this.mediaElem.readyState!==HTMLMediaElement.HAVE_NOTHING){if(this.mediaElem.seeking){if(!this.seekingEventReceived)return}else this.seekingEventReceived=!1;if(!this.mediaElem.paused||0===this.mediaElem.currentTime||!this.hasPlayed){this.mediaElem.readyState!==this.prevReadyState&&(this.didFireLargeGap=!1,this.prevReadyState=this.mediaElem.readyState);var t=this.mediaElem.buffered,r=this.config.smallGapLimit||.5,n=this.config.gapDetectionThreshold||.1,i=this.mediaElem.currentTime,o=this._getIndex(t,i,n);if(null!==o&&(0!==o||this.segmentAppended)){var s=t.start(o)+.1;if(!(s>this.mediaElem.duration)){var u=s-i,l=u<=r;u<e.BROWSER_GAP_TOLERANCE||l&&(!0!==this.config.disableGapSetPosition&&((0,a.log)("onGapJump this.mediaElem.currentTime"),this.mediaElem.currentTime=this.isSafari?s+.1:s),this.player&&this.player.emit("detectGap"),(0,a.log)("gapJump gapIndex",o,"isGapSamll",l,"jumpLargeGap",!1,"currentTime",this.mediaElem.currentTime),.08!==s&&this.player&&this.player.emit("log",{type:"oneevent",end_type:"gap",vid:this.player.config.vid,ext:{video_postion:Math.floor(1e3*s)}}))}}}}}},{key:"_getIndex",value:function(e,t,r){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=this._getBuffered(e),i=null,a=0;a<n.length;a++)if(n[a].start>t&&(0===a||n[a-1].end-t<=r)){i=a;break}return i}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}},{key:"destroy",value:function(){this.mediaElem.removeEventListener("waiting",this.onWaitFunc),this.mediaElem.removeEventListener("play",this.onPlayFunc),this.timer.clear(),this.timer=null}}]),e}();t.default=o,o.BROWSER_GAP_TOLERANCE=.001,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(127);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return h(n).default}});var i=r(22);Object.defineProperty(t,"ProxyPromise",{enumerable:!0,get:function(){return h(i).default}});var a=r(23);Object.defineProperty(t,"Raf",{enumerable:!0,get:function(){return h(a).default}});var o=r(128);Object.defineProperty(t,"FpsDetection",{enumerable:!0,get:function(){return h(o).default}});var s=r(129);Object.defineProperty(t,"Xml2JSON",{enumerable:!0,get:function(){return h(s).default}});var u=r(130);Object.defineProperty(t,"isSupportRawCryptoCTR",{enumerable:!0,get:function(){return u.isSupportRawCryptoCTR}});var l=r(131);Object.defineProperty(t,"SpeedSampler",{enumerable:!0,get:function(){return h(l).default}});var c=r(132);Object.defineProperty(t,"getResponseHeaders",{enumerable:!0,get:function(){return h(c).default}});var d=r(133);Object.defineProperty(t,"IntervalTimer",{enumerable:!0,get:function(){return h(d).default}});var f=r(134);function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"localStorage",{enumerable:!0,get:function(){return h(f).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=void 0;return function(){var i=this,a=arguments,o=function(){n=null,r||e.apply(i,a)},s=r&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,a)}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=(n=r(23))&&n.__esModule?n:{default:n},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fps=0,this.isStoped=!0,this.ticks=[],this.isSupport=!0,this.maxFps=0,this.step=this._step.bind(this),this.rafId=null}return a(e,[{key:"_step",value:function(e){var t=this.ticks;if(t.unshift(e),t.length>10){var r=t.pop();r&&(this.fps=Math.floor(1e4/(e-r)),this.updateFpsInfo())}this.isStoped||(this.rafId=window.requestAnimationFrame(this.step))}},{key:"updateFpsInfo",value:function(){this.fps>this.maxFps&&(this.maxFps=this.fps)}},{key:"start",value:function(){void 0!==window.requestAnimationFrame&&(this.isStoped=!1,this.rafId=window.requestAnimationFrame(this.step))}},{key:"stop",value:function(){window.cancelAnimationFrame(this.rafId),this.isStoped=!0}}],[{key:"install",value:function(){i.default.install()}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"parse",value:function(t){var r=e.parseXmlString(t);return null!=r?e.parseDOMChildren(r):null}},{key:"parseXmlString",value:function(e){if(void 0===e)return null;var t=void 0,r=new window.DOMParser;try{(t=r.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}return t}},{key:"parseDOMChildren",value:function(t,r){if(t.nodeType===Node.DOCUMENT_NODE){for(var n={},i=t.childNodes,a=0;a<i.length;a++){var o=i[a];o.nodeType===Node.ELEMENT_NODE&&(n=e.parseDOMChildren(o))}return n}if(t.nodeType===Node.ELEMENT_NODE){for(var s={__cnt:0},u=[],l=t.childNodes,c=0;c<l.length;c++){var d=l[c],f=e.getNodeLocalName(d);if(d.nodeType!==Node.COMMENT_NODE){var h=r+"."+f;if(s.__cnt++,null==s[f]){var p=e.parseDOMChildren(d,h);if("#text"!==f||/[^\s]/.test(p)){var v={};v[f]=p,u.push(v)}s[f]=p,e.toArrayAccessForm(s,f)}else{null!=s[f]&&(s[f]instanceof Array||(s[f]=[s[f]],e.toArrayAccessForm(s,f,h)));var g=e.parseDOMChildren(d,h);if("#text"!==f||/[^\s]/.test(g)){var m={};m[f]=g,u.push(m)}s[f][s[f].length]=g}}}for(var y=0;y<t.attributes.length;y++){var _=t.attributes[y];s.__cnt++;var w=_.value;s[_.name]=w}var b=t.prefix;return null!=b&&""!==b&&(s.__cnt++,s.__prefix=b),null!=s["#text"]&&(s.__text=s["#text"],s.__text instanceof Array&&(s.__text=s.__text.join("\n")),delete s["#text"],delete s["#text_asArray"]),null!=s["#cdata-section"]&&(s.__cdata=s["#cdata-section"],delete s["#cdata-section"],delete s["#cdata-section_asArray"]),1===s.__cnt&&null!=s.__text?s=s.__text:1===s.__cnt&&null!=s.__cdata&&(s=s.__cdata),delete s.__cnt,s}if(t.nodeType===Node.TEXT_NODE||t.nodeType===Node.CDATA_SECTION_NODE)return t.nodeValue}},{key:"getNodeLocalName",value:function(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!==t||(t=e.nodeName),t}},{key:"toArrayAccessForm",value:function(e,t){e[t]instanceof Array||(e[t]=[e[t]])}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportRawCryptoCTR=function(){var e=new i.default,t=window.crypto||window.msCrypto;if(!t)return e.resolve(!1),e;var r=new Uint8Array(16),n=new Uint8Array([1]),a=null;try{t.subtle.generateKey({name:"AES-CTR",length:256},!1,["encrypt","decrypt"]).then((function(e){return a=e,t.subtle.encrypt({name:"AES-CTR",counter:r,length:128},e,n)})).then((function(e){return t.subtle.decrypt({name:"AES-CTR",counter:r,length:128},a,e)})).then((function(t){var r=new Uint8Array(t);e.resolve(r[0]===n[0])})).catch((function(){e.resolve(!1)}))}catch(t){e.resolve(!1)}return e};var n,i=(n=r(22))&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,window.performance&&window.performance.now?this._now=window.performance.now.bind(window.performance):this._now=Date.now}return n(e,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}},{key:"averageKBps",get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var r=e.split(": "),n=r.shift(),i=r.join(": ");t[n]=i}))}catch(e){}return t},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeID=null,this.func=null}return n(e,[{key:"repeat",value:function(e,t){this.timeID=1,this.repeatInterval(e,t)}},{key:"repeatInterval",value:function(e,t){var r=this;this.timeID&&(null===this.func&&(this.func=e),this.func===e&&(this.timeID&&clearTimeout(this.timeID),this.timeID=null,this.timeID=setTimeout((function(){e(),r.repeatInterval(e,t)}),t)))}},{key:"clear",value:function(){clearTimeout(this.timeID),this.timeID=null}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}&&!function(){try{return localStorage.setItem("_localstorage_support_test",!0),localStorage.removeItem("_localstorage_support_test"),!1}catch(e){return!0}}();var i={length:n?localStorage.length:0,clear:function(e){try{for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}catch(e){}},getItem:function(e){try{return localStorage.getItem(e)}catch(e){return null}},key:function(e){try{return localStorage.key(e)}catch(e){return null}},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},isSupport:n};t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=20,a=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=e.defaultConfig;var n=t.config||{};Object.keys(n).map((function(e){r.config[e]=n[e]})),this.netRecords=[],this.speed=0,this.speedKB=0,this._selects=[{name:"simple",handler:function(e,t,r){for(var n=r.autoBitrateParams,i=n.paramA,a=n.paramB,o=n.paramC,s=n.paramD,u=r.defaultBitrate,l=-1===t?u:i*Math.pow(t,3)+a*Math.pow(t,2)+o*t+s,c=-1,d=0;d<e.length;d++)if(l>=e[d].bitrate){c=d;break}return c<0&&(c=e.length-1),e[c]}}]}return n(e,null,[{key:"defaultConfig",get:function(){return{defaultBitrate:1e6,autoBitrateParams:{paramA:0,paramB:4.04330129e-9,paramC:.0164405979,paramD:225511.28,minBitrate:2e5},mSpeedRecordValidThreshold:2}}},{key:"MaxQueueCapacity",get:function(){return i},set:function(e){i=e}}]),n(e,[{key:"netSampling",value:function(t){this.netRecords.push(t),this.netRecords.length>e.MaxQueueCapacity&&(this.netRecords=this.netRecords.shift(0)),this.speed=this.getSpeed(),this.speedKB=this.speed/8/1024}},{key:"getSpeed",value:function(){var e=-1;if(this.netRecords.length<this.config.mSpeedRecordValidThreshold)return e;var t=[];this.netRecords.map((function(e){t.push(e)})),t.sort((function(e,t){return e.mSpeedInbPS-t.mSpeedInbPS}));for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i].mBytes;n/=2;for(var a=0;a<r;a++)(n-=t[a].mBytes)<=0&&(e=t[a].mSpeedInbPS);return e<0?-1:e}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple",r=[];e.map((function(e){r.push(e)})),r.sort((function(e,t){return t.bitrate-e.bitrate}));for(var n=null,i=0;i<this._selects.length;i++)t===this._selects[i].name&&(n=this._selects[i].handler);n||(n=this._selects[0]);var a=n.apply(this,[r,this.speed,this.config]);return a||(a=r[0]),a}},{key:"addSelect",value:function(e){this._selects.push(e)}}]),e}();t.default=a,e.exports=t.default}]))}}]);